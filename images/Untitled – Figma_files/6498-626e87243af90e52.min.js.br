"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="627b2b14-b00c-53f9-9ba2-c609ba624601")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6498],{372135:(e,t,n)=>{n.d(t,{L:()=>f,I:()=>p});var i=n(411855),r=n(460845),a=n(27147),l=n(522725),o=n(345419),c=n(140835),s=n(28487),d=n(367554);let u="resource_page_header--resourceHeaderAvatar--FI-3x",m="resource_page_header--resourceHeaderAvatarWrapper--nn-w8",_="resource_page_header--resourceHeaderFigmaPartnerBadge--cgvkO";function f({publishers:e,size:t=32,showFigmaPartnerBadge:n}){return e.length<5?i.createElement(i.Fragment,null,e.map((e,r)=>i.createElement("div",{key:e.id,className:m,"data-testid":"resource-header-avatar-"+r},i.createElement(c.o3,{to:new l.xn({profileHandle:e.profile_handle}).to,trackingEventName:"resource_creator_click",trackingProperties:{profileId:e.id,target:"avatar"},key:e.id},i.createElement(s.e,{entity:e,size:t,style:{zIndex:3-r},adtlClassName:u})),n&&i.createElement("div",{className:_,style:{zIndex:3-r}},(0,d.C2)(e,!0))))):i.createElement(i.Fragment,null,e.slice(0,3).map((e,t)=>i.createElement("div",{className:m,key:e.id,"data-testid":"resource-header-avatar-"+t},i.createElement(r.N_,{to:new l.xn({profileHandle:e.profile_handle}).to,onClick:e=>e.stopPropagation(),key:e.id},i.createElement(s.e,{entity:e,style:{zIndex:3-t},adtlClassName:u})),n&&i.createElement("div",{className:_,style:{zIndex:3-t}},(0,d.C2)(e,!0)))),i.createElement("div",{className:"resource_page_header--resourceHeaderAvatarWrapperExtraProfiles--P5q2P resource_page_header--resourceHeaderAvatarWrapper--nn-w8"},i.createElement(o.e,{type:"Letter",size:"Large",letter:(e.length-3).toString()})))}function p({publishers:e,useSmallWidth:t=!1,removeByLabel:n=!1,openInNewTab:r=!1}){return i.createElement("span",{className:e.length>2?"resource_page_header--author--k2bGY":"resource_page_header--authorHiddenOverflow--hoVA5"},(0,a.kc)(e,t,n,r))}},538288:(e,t,n)=>{n.d(t,{N:()=>u});var i=n(411855),r=n(188507),a=n(277154),l=n(841962),o=n(728722),c=n(771952),s=n(183739),d=n(597185);function u(){let e=i.useMemo(()=>(0,c.g)(),[]),t=(0,r.d4)(d.kY),n=(0,o.Rs)(s.gfM,{cacheNonce:e},{enabled:!!(0,l.kc)().livegraph_lock_clients_migration_dark_reads});return i.useEffect(()=>{if("loaded"===n.status){let e=n.data?.lockClient;e&&(0,l.kc)().livegraph_lock_clients_migration_logging&&(0,a.sx)("lg_realtime_lock_clients",{userId:e.id,lgLockValue:e.lock,realtimeLockValue:t,analyticsAnonymousId:(0,a.pp)()})}},[n,t]),i.useMemo(()=>{if("loaded"===n.status){let e=n.data?.lockClient;if(e&&(0,l.kc)().livegraph_lock_clients_migration_full_reads)return e.lock}return t},[n,t])}},846007:(e,t,n)=>{n.d(t,{E:()=>a});var i=n(302245);let r=(0,i.Mz)(e=>e.dropdownShown,e=>e?.type),a=e=>(0,i.Mz)(r,t=>t===e)},851166:(e,t,n)=>{n.d(t,{d:()=>Q});var i=n(411855),r=n(188507),a=n(809471),l=n(22562),o=n(623817),c=n(236834),s=n(277154),d=n(728722),u=n(746643),m=n(771952),_=n(826943),f=n(299009),p=n(663844),h=n(933781),k=n(51594),w=n(76265),v=n(910164),E=n(731556),g=n(965361),y=n(585875),b=n(535461),N=n(619560),C=n(981959),A=n(15092),I=n(183739),R=n(828453),P=n(940795),T=n(269049),F=n(804197),B=n(412851),M=n(587037),S=n(699990),D=n(260983),x=n(672680),L=n(7846),q=n(344993),U=n(518692);let O="quick_reply_thread_view--headerButton--wmkPJ",H=new class{get file(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get fileFollower(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}get comments(){throw Error("Data should not be accessed directly from quick replies, we need to create standard API for comments to use this view. see: file_comments_api.tsx")}},j=null,Q=(0,i.forwardRef)((e,t)=>{let n=(0,d.Rs)(I.Uhm,{fileKey:e.quickReplyInfo.fileKey,rootId:e.quickReplyInfo.threadId});return i.createElement("div",{className:"quick_reply_thread_view--container--WPlnN",ref:t},i.createElement("div",{className:"quick_reply_thread_view--column--UrAD4"},i.createElement("div",{className:"quick_reply_thread_view--header--BHlje"},i.createElement("div",{className:O},!e.fileBrowser&&i.createElement(k.J,{"aria-label":(0,w.t)("quick_reply.navigate_back"),onClick:e.onClose},i.createElement(a.C,null))),i.createElement("div",{className:"quick_reply_thread_view--fileName--S2twU"},"loaded"===n.status&&n.data.file&&n.data.file.name),i.createElement("div",{className:O},e.fileBrowser?i.createElement(k.J,{"aria-label":(0,w.t)("quick_reply.close"),onClick:e.onClose},i.createElement(l.A,null)):i.createElement("div",{style:{display:"none"}},i.createElement(k.J,{"aria-label":(0,w.t)("quick_reply.more")},i.createElement(o.J,null))))),i.createElement(V,{quickReplyInfo:e.quickReplyInfo,result:n,hideOverflowMenu:e.fileBrowser})))});function V(e){let t=(0,A.iZ)();return t?"loading"===e.result.status||"disabled"===e.result.status?i.createElement(f.qc,{size:"medium"}):"errors"===e.result.status||null==e.result.data.file?i.createElement("div",{className:"quick_reply_thread_view--errorState--Re4UD"},(0,w.t)("quick_reply.unable_to_load_thread")):i.createElement(z,{quickReplyInfo:e.quickReplyInfo,result:e.result,user:t,hideOverflowMenu:e.hideOverflowMenu}):null}function z(e){let{quickReplyInfo:t,result:n,user:a}=e,{fileKey:l,threadId:o}=t,d=(0,y.dr)({args:{fileKey:l,rootId:o},subscription:n}),u=(0,r.wA)(),{file:m}=n.data,f=(0,P.ST)({component:"QuickReplyThreadViewWithProvider",migrationGroup:T.L.GROUP_1,attribute:"planUserPermission",legacy:e=>e?.file?.org?.currentOrgUser?.permission||"",migrated:e=>e?.file?.org?.currentPlanUser?.permission||"",lgQuery:n}),p=(0,i.useMemo)(()=>(0,R.mp)({currentOrgId:m.org?.id,teamId:m.teamId,fileKey:l,isOrgGuest:"guest"===f,users:[]}),[m.org?.id,m.teamId,l,f]),{mobileCommentThread:v}=m,{currentUserCommentReadStatus:b}=m,A=v.find(e=>e.id===o),{thumbnailUrl:I,onError:B}=function(e){let t=i.useMemo(()=>e.reduce((e,t)=>t.createdAt.getTime()>e.createdAt.getTime()?t:e).thumbnailUrl,[e]),{onError:n,thumbnailLoadError:r}=(0,h.b)(t);return{thumbnailUrl:r?null:t,onError:n}}(v),M=(0,r.d4)(e=>e.comments.savingCommentUuids),S=(0,r.d4)(e=>e.comments.lgPendingUuidToServerIdMap);if(!A)return i.createElement("div",null,(0,w.t)("quick_reply.unable_to_load_thread"));let D=v.map(e=>(0,N.G9)(a.id,A,e,b??N.gj,M,S,e.attachments)),x={id:A.id,key:l,anchored:!1,canvasPosition:null,selectionAnchorCanvasPosition:null,comments:D,messageMeta:D[0].message_meta,page:A.clientMeta?.pageId||null,isActive:!0,replyCount:v.length-1,isCanvasMention:!1,pageName:A.clientMeta?.pageId||null,sidebarItemType:F.kT.COMMENT_THREAD},L={api:d,status:n.status,data:H,threads:{status:n.status,data:[x],errors:n.errors},errors:n.errors,isResolvedLoaded:!0,isUnresolvedLoaded:!0};return i.createElement(g.j9.Provider,{value:L},i.createElement("div",{className:"quick_reply_thread_view--mouseContainer--qyIpH",onMouseEnter:()=>{let e=D.some(e=>e.isUnread);j=setTimeout(()=>{d.commentReceipts&&e&&(u(E.AY({receiptsAPI:d.commentReceipts,thread:x})),(0,s.sx)("Comment Thread Read",{commentThreadId:o,threadType:"file_browser_quick_reply"}))},1e3)},onMouseLeave:()=>{j&&clearTimeout(j)}},i.createElement("div",{className:"quick_reply_thread_view--preview--I47Ds"},i.createElement(_.oW,{src:I||void 0,onError:B,className:"quick_reply_thread_view--previewImage--gSK-n",style:{backgroundColor:(0,C.C)(m.checkpointClientMeta)},alt:"thumbnail"}),i.createElement("div",{className:"quick_reply_thread_view--openFileButton--RBtVz"},i.createElement(k.J,{"aria-label":(0,w.t)("quick_reply.open_file"),onClick:()=>{let e=t.deeplink??`/file/${l}?fuid=${a.id}&#${o}`;window.location.href=e}},i.createElement(c.V,null)))),i.createElement(Y,{loadedComments:D,user:a,quickReplyInfo:t,commentMentionables:p,hideOverflowMenu:e.hideOverflowMenu})))}function $(){let e=(0,r.wA)(),t=(0,r.d4)(e=>e.dropdownShown||null),n=(0,A.iZ)(),a=(0,B.v)();if(!t||t.type!==b.VJ)return null;let{comment:l,parentRect:o,thread:c,isUnread:s}=t.data;return i.createElement(D.V,{dispatch:e,comment:l,parentRect:o,currentUser:n,isUnread:s,thread:c,copyLink:a})}function Y(e){let{loadedComments:t,user:n,quickReplyInfo:a,commentMentionables:l,hideOverflowMenu:o}=e,{fileKey:c,threadId:s}=a,d=(0,r.wA)();(0,i.useEffect)(()=>{d(E.Fm({threadId:s}))},[d,s]);let _=(0,r.d4)(e=>e.comments.typeahead),f=(0,r.d4)(e=>e.comments.editingComment),h=(0,r.d4)(e=>e.dropdownShown||null),k=(0,r.d4)(e=>e.comments.activeThread?.id),y=(0,r.d4)(e=>e.comments.threads),b=k&&y[k]||null,N=b?.reply.messageMeta||[],{submitReply:C,updateMessage:A,submitEdit:I}=function(e){let t=(0,r.wA)(),n=(0,g.I_)().writeAPI,a=g._9()?.threads;return{submitReply:i.useCallback(e=>{if(!n){console.error("Calling submitReply with no write API");return}a&&"loaded"===a.status&&a.data.find(t=>t.id===e.threadId)&&(e.onCommentValidationFailure=(i,r,a,l)=>E.dB(n,t,i,r,a,l,e.uuid,q.y),t(E.lV({...e,commentsWriteApi:n,commentsConfiguration:q.y,trackingContext:{feature:"web_quick_reply_screen"}})))},[t,a,n]),updateMessage:i.useCallback(n=>{t(E.k7({threadId:e,messageMeta:n}))},[t,e]),submitEdit:i.useCallback((e,n)=>{t(E._v({comment:e,messageMeta:n}))},[t])}}(s),R=(0,S._B)(),P=i.useRef(null),T=i.useRef(null),B=i.useRef(null),[O,H]=i.useState(null),[j,Q]=i.useState(i.useRef(null)),V=i.useRef(null),z=0,Y=0,W=0;V.current&&V.current.offsetParent&&(z=V.current.offsetWidth,Y=V.current.offsetLeft,W=V.current.offsetParent.clientHeight-V.current.offsetTop);let X=e=>e||{x:0,y:0},G=i.useRef(null);(0,i.useEffect)(()=>{G.current&&G.current.scrollToBottom()},[]);let J=[...new Set(t.map(e=>e.user.handle))],K=t.find(e=>e.id===s);return K?i.createElement(i.Fragment,null,i.createElement("div",{style:v.sx.flex1.$}),i.createElement(p.P,{className:"quick_reply_thread_view--bottomAnchoredScrollContainer--5-F87",useBottomPinning:!0,ref:G,enableScrollShadow:!0},i.createElement("div",{className:"quick_reply_thread_view--reverseColumn--ur8Yx"},t.slice().reverse().map((e,r)=>i.createElement(D.I,{editorRef:B,key:`thread-comment-${e.id}`,dispatch:d,user:n,thread:{comments:t,key:c,id:s},setHyperlinkLocation:H,hyperlinkLocation:O,setHyperlinkEditorRef:Q,comment:e,typeahead:_,mentionables:l,prevAuthor:0===r?null:t[r-1].user_id,index:r,editingComment:f,submitEdit:I,dropdownShown:h,viewportPositionFromClientPosition:X,editorOnInsert:R.editorOnInsert,editorOnClear:R.editorOnClear,threadPosition:{x:0,y:0},setIsEditorFocused:u.lQ,showEditedIndicator:!!e.edited_at,hideOverflowMenu:o,hideReactions:!1,hideEmojiPicker:!1,allowAttachments:!1,hideResolve:!1,setResolved:u.lQ,mountInputFocused:!0,editorType:"comment-editor-thread",isQuickReplyThreadView:!0})))),i.createElement(x.K,{editorRef:T,dispatch:d,user:n,typeahead:_,mentionables:l,threadPosition:null,messageMeta:N,submitText:(0,w.t)("comments.reply"),placeholderText:(0,w.t)("comments.reply"),setHyperlinkLocation:H,hyperlinkLocation:O,setHyperlinkEditorRef:Q,onCancel:u.lQ,onSubmit:()=>{C({threadId:s,threadUuid:K.uuid||void 0,uuid:(0,m.g)()})},onComposeFocus:void 0,editorOnInsert:R.editorOnClear,editorOnClear:R.editorOnInsert,viewportPositionFromClientPosition:X,isDisabled:!1,mountInputFocused:!0,updateMessage:A,setIsEditorFocused:u.lQ,isEmojiPickerDisabled:null!==f,hideEmojiPicker:!1,allowAttachments:!1,recordingKey:F.Dw.quickReply,className:U.MJ,threadId:s,fileKey:c,editingExistingComment:!1,editorType:"comment-editor-reply",authorNames:J,replyContainerRef:V}),i.createElement(M.rf,{decoratorsRef:P,onClear:R.onClear,onInsert:R.onInsert,width:z,direction:L.ri.UPWARDS,positionFromBottom:{left:Y,bottom:W}}),i.createElement($,null)):null}},36324:(e,t,n)=>{n.d(t,{g:()=>s});var i=n(411855),r=n(629019),a=n.n(r),l=n(693565),o=n(265851),c=n(783423);let s=i.forwardRef((e,t)=>{let n=o.s.h16.w16.ml1.flex.justifyCenter.itemsCenter.with({colorIconOnbrand:e.isOnBrandColor,colorIcon:!e.isOnBrandColor}).$;return i.createElement("button",{className:a()("dropdown_button--button--BR3bZ",e.buttonClassName,{"dropdown_button--active--ZkglI":e.isShowingDropdown}),onClick:e.onClick,ref:t,"data-testid":e.dataTestId,"aria-label":e["aria-label"]},e.children,i.createElement(l.B,{svg:c.A,className:n}))})},51594:(e,t,n)=>{n.d(t,{J:()=>a});var i=n(411855),r=n(351966);let a=i.forwardRef(function({children:e,...t},n){return i.createElement(r.E,{...t,ref:n,className:"icon_button_32--iconButton--gFcI9"},i.createElement("span",{"aria-hidden":!0,className:"icon_button_32--icon--8SoTm"},e))})},19122:(e,t,n)=>{n.d(t,{H:()=>a});var i=n(411855),r=n(746643);let a=i.createContext({shouldShowChevron:e=>!1,onClick:()=>!1,onMouseEnter:r.lQ,onMouseMove:r.lQ,onRemove:r.lQ})},852362:(e,t,n)=>{n.d(t,{IP:()=>ez,fd:()=>i,he:()=>eV,ql:()=>eQ});var i,r=n(411855),a=n(188507),l=n(511445),o=n(629019),c=n.n(o),s=n(281935),d=n(614687),u=n(163773),m=n(294829),_=n(336427),f=n(841962),p=n(697737),h=n(621847),k=n(299009),w=n(663844),v=n(76265),E=n(553362),g=n(47795),y=n(719971),b=n(927030),N=n(190500),C=n(448768),A=n(176160),I=n(661137),R=n(849331),P=n(15092),T=n(421023),F=n(701834),B=n(341541),M=n(168574),S=n(891721),D=n.n(S),x=n(151314),L=n(901963),q=n(693565),U=n(719334),O=n(324608),H=n(728764),j=n(623962),Q=n(712204),V=n(28221),z=n(19122);let $="block_kit_row--rowTop--4zNja",Y="block_kit_row--metadataContainer--tcs33",W="block_kit_row--usersContainer--J5oFI",X="block_kit_row--usersContainerStructuredView--PUPYI",G="block_kit_row--quickReplyChevron--0rKX3",J="block_kit_row--chevronIcon--2uviD",K="block_kit_row--imagePreview--CqQsi";var Z=n(163119);function ee(e){return r.createElement("span",{className:"block_kit_row--htmlTextBlock--wINSP",dangerouslySetInnerHTML:{__html:D().sanitize(e.block.html_text)}})}function et(e){let t=(0,x.UF)(e.block.emoji_shortcode)[0];return t.meta?r.createElement("span",{className:"block_kit_row--emojiUnicode--qBoed"},t.unicode):r.createElement(r.Fragment,null)}function en(e){return e?e.map((e,t)=>"HtmlTextBlock"===e._block_type?r.createElement(ee,{key:t,block:e}):r.createElement(et,{key:t,block:e})):[]}function ei(e){let{block:t,size:n}=e;return r.createElement(Q.Ro,{entity:{...t,id:t.entity_id},size:n,hideFallbackInitial:!1,shape:t.shape.toUpperCase()})}function er(e){let{block:t}=e;return r.createElement("div",{className:`${K} thumbnail_DEPRECATED--tileThumbnail--4kE7l`,style:{background:`url(${(0,j.A)()})`}},r.createElement("div",{className:"thumbnail_DEPRECATED--thumbnailContainer--xPcsg",style:{backgroundColor:(e=>{if(!e||0===e.alpha)return"transparent";let{red:t,green:n,blue:i,alpha:r}=e;return`rgba(${255*t|0}, ${255*n|0}, ${255*i|0}, ${r})`})(t.background_color)}},r.createElement("div",{className:"thumbnail_DEPRECATED--thumbnail--WuuvA thumbnail_DEPRECATED--baseThumbnail--8p9z4",style:{backgroundImage:`url(${t.img_url})`}})))}function ea(e){let{block:t}=e;return r.createElement("div",{className:"block_kit_row--square--vD5SO"},r.createElement("div",{className:K,style:{backgroundImage:`url(${t.img_url})`}}))}function el(e){let{avatars:t}=e;return 0===t.length?null:t.length>1?r.createElement("div",{className:W},r.createElement("div",{className:"block_kit_row--secondaryUser--hkjpm"},r.createElement(ei,{block:t[1],size:H.Pf.MEDIUM})),r.createElement("div",{className:"block_kit_row--primaryUser--lg4hR"},r.createElement(ei,{block:t[0],size:H.Pf.MEDIUM}))):r.createElement("div",{className:W},r.createElement(ei,{block:t[0],size:H.Pf.LARGE}))}function eo(e){let{avatars:t,icon:n}=e;return 0===t.length?null:t.length>1?r.createElement("div",{className:X},r.createElement("div",{className:"block_kit_row--secondaryUserRevamp--ZkcO7"},r.createElement(ei,{block:t[1],size:H.Pf.MEDIUM})),r.createElement("div",{className:"block_kit_row--primaryUserRevamp--XYq-9"},r.createElement(ei,{block:t[0],size:H.Pf.MEDIUM})),n&&r.createElement(ec,{icon:n})):r.createElement("div",{className:X},r.createElement(ei,{block:t[0],size:H.Pf.LARGE}),n&&r.createElement(ec,{icon:n}))}function ec(e){let{icon:t}=e,n=new Set([(0,f.ck)("fc8b3d0c889b51bd8800945089e8b473ff4d619d")]);return r.createElement("div",{className:"block_kit_row--icon--YApgQ"},"ImageThumbnailBlock"===t._block_type?r.createElement("img",{className:`block_kit_row--iconImg--SRdFH ${n.has(t.img_url)?"":"block_kit_row--iconInvert--7YBRA"} `,src:t.img_url,alt:""}):"ReacjiBlock"===t._block_type?r.createElement(et,{block:t}):"AvatarBlock"===t._block_type?r.createElement(ei,{block:t,size:H.Pf.SMALL16}):void 0)}function es(e){let t=(0,a.wA)(),{block:n,callbacks:i,isPrimary:l=!0}=e,o=async()=>{let e=i.buildNotificationActionRequest(n.notification_action);await e.then(({data:e})=>{if(n.hide_after_action)i.hideNotification();else if(i.followLinkIfPossible(),e.meta.updated_notification_blob){let t=e.meta.updated_notification_blob;i.updateNotification(t.notification_id,t)}},e=>{let i=e.message||("resolve"===n.notification_action?(0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification"):(0,v.t)("user_notification.an_error_occurred_while_removing_this_notification"));t(U.s.error(i))})},c=en([n.text]);return l?r.createElement(h.$$,{className:"block_kit_row--acceptButton--1Fa1c",onClick:o},c):r.createElement(h.nR,{className:"block_kit_row--rejectButton--Hu8KY",onClick:o},c)}function ed(e){let{block:t,actionBlockCallbacks:n}=e;return r.createElement("div",{className:"block_kit_row--rowBottom--dKrKA"},r.createElement(es,{block:t.secondary_action,callbacks:n,isPrimary:!1}),r.createElement(es,{block:t.primary_action,callbacks:n,isPrimary:!0}))}function eu(e){let{block:t,plan:n,shouldShowChevron:i,userLastViewedTimestamp:a}=e;switch(t._block_type){case"BodyAndThumbnailBlock":return r.createElement(em,{block:t,plan:n,shouldShowChevron:i});case"SplitlineTitleAndBodyBlock":return r.createElement(e_,{block:t,shouldShowChevron:i,userLastViewedTimestamp:a})}}function em(e){let{block:t,plan:n,shouldShowChevron:i}=e;return r.createElement(r.Fragment,null,r.createElement("div",{className:"block_kit_row--contentContainer--ZbpO2 text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement("div",{className:"block_kit_row--content--52-rY"},r.createElement("div",null,en(t.title)),r.createElement("div",{className:Y},r.createElement("div",{className:"block_kit_row--textContainer--168xh"},t.description&&r.createElement("div",{className:"block_kit_row--notificationDescription--lMjfr ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},en(t.description)),r.createElement("div",{className:"block_kit_row--fromNow--ryp9b"},n&&r.createElement(r.Fragment,null,r.createElement(V.H,{entityId:n.id.toString(),entityName:n.name,imgUrl:n.img_url||void 0}),(0,F.gN)(n.name,21),r.createElement("div",{className:"block_kit_row--planDivider--XnNq8"},"\xb7")),r.createElement(L.h1,{date:t.created_at,style:"short"}))),i&&r.createElement("div",{className:G},r.createElement(q.B,{svg:Z.A,className:J}))))),(()=>{if(!t.thumbnail)return null;let e=t.thumbnail;switch(e._block_type){case"AvatarBlock":return r.createElement(ei,{block:e,size:H.Pf.XLARGE});case"ImageThumbnailBlock":return r.createElement(ea,{block:e});case"FileThumbnailBlock":return r.createElement(er,{block:e})}})())}function e_(e){let{block:t,shouldShowChevron:n,userLastViewedTimestamp:i}=e;return r.createElement("div",{className:"block_kit_row--contentContainerRevamp--voNSM text--fontPos11--2LvXf text--_fontBase--QdLsd"},r.createElement("div",{className:"block_kit_row--titleAndTimestamp--30RnS"},r.createElement("div",{className:"block_kit_row--title--gqwu-"},en(t.title)),r.createElement(ev,{createdAt:t.created_at,lastSeenTimestamp:i})),r.createElement("div",{className:Y},r.createElement("div",{className:"block_kit_row--subtitle--jIRsg"},en(t.subtitle)),t.description&&r.createElement("div",{className:"block_kit_row--notificationDescriptionStructuredView--yUeTV ellipsis--ellipsisAfter3Lines--h405C ellipsis--_ellipsisAfterNLines--LzI7k"},en(t.description)),n&&r.createElement("div",{className:"block_kit_row--quickReplyChevronContainer--yONp2"},r.createElement("div",{className:G},r.createElement(q.B,{svg:Z.A,className:J})))))}function ef(e){let{notification:t}=e;return(0,b.ro)()?r.createElement(ep,{notification:t,children:e.children}):r.createElement("div",{className:$},t.is_unread?r.createElement("div",{className:"block_kit_row--unreadDot--e-8EJ"}):null,r.createElement(el,{avatars:t.avatars}),e.children)}function ep(e){let{notification:t}=e;return r.createElement("div",{className:$},t.is_unread?r.createElement("div",{className:"block_kit_row--unreadDotStructuredView--WluAp"}):null,r.createElement(eo,{avatars:t.avatars,icon:t.icon}),e.children)}function eh(e){let{attachment:t,notification:n,dontShowPlanIcon:i}=e;return r.createElement(ef,{notification:n},r.createElement(eu,{block:t.body,plan:!0===i?void 0:n.plan,userLastViewedTimestamp:n.filters.user_last_viewed_timestamp}))}function ek(e){let{attachment:t,notification:n,dontShowPlanIcon:i}=e,{shouldShowChevron:a}=r.useContext(z.H);return r.createElement(ef,{notification:n},r.createElement(eu,{block:t.body,plan:!0===i?void 0:n.plan,shouldShowChevron:a(n),userLastViewedTimestamp:n.filters.user_last_viewed_timestamp}))}function ew(e){let{attachment:t,notification:n,actionBlockCallbacks:i}=e;return r.createElement(r.Fragment,null,r.createElement(ef,{notification:n},r.createElement(eu,{block:t.body,plan:n.plan,userLastViewedTimestamp:n.filters.user_last_viewed_timestamp})),r.createElement(ed,{block:t.actions,actionBlockCallbacks:i}))}function ev(e){let{createdAt:t,lastSeenTimestamp:n}=e,i=eE(t,n),a=(0,L.Ak)(t,"narrow");if("today"!==i&&"new"!==i){let e=new Date(t),n={};n=!function(e){let t=new Date;return t.setDate(t.getDate()-365),e>=t}(e)?{month:"short",day:"numeric",year:"numeric"}:{month:"short",day:"numeric"},a=new Intl.DateTimeFormat((0,O.Gq)().getPrimaryLocale(!1),n).format(e)}return r.createElement("div",{className:"block_kit_row--timestamp--FiNtf"},a)}function eE(e,t){let n=new Date(e),i=new Date,r=new Date(i);return(r.setDate(i.getDate()-1),t&&new Date(t)<n)?"new":eg(n,i)?"today":eg(n,r)?"yesterday":n>=new Date(i.getFullYear(),i.getMonth(),i.getDate()-7)?"last_week":"older"}function eg(e,t){return e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}var ey=(e=>(e.NEW="new",e.TODAY="today",e.YESTERDAY="yesterday",e.LAST_WEEK="last_week",e.OLDER="older",e))(ey||{});let eb={new:(0,v.tx)("user_notifications.new"),today:(0,v.tx)("user_notifications.today"),yesterday:(0,v.tx)("user_notifications.yesterday"),last_week:(0,v.tx)("user_notifications.last_7_days"),older:(0,v.tx)("user_notifications.older")};function eN(e){return e.preferred_attachments.length>0&&"ActionableAttachment"===e.preferred_attachments[0]._block_type}var eC=(e=>(e.ACTIONABLE="actionable",e.ACTIONED="actioned",e))(eC||{});let eA={actionable:(0,v.tx)("user_notifications.pending"),actioned:(0,v.tx)("user_notifications.done")};var eI=n(277154),eR=n(137515);function eP(e){let t=e.preferred_attachments.find(e=>eR.pw.BlockKit.Block.ATTACHMENT_TYPES.has(e._block_type));if(void 0===t)throw Error(`Unable to render attachment. Hiding notification ${e.notification_id}`);return t}function eT(e){let t;let n=(0,a.wA)(),[i,l]=(0,r.useState)(!1),o=(0,a.d4)(e=>e.selectedView.view),{onClick:c,onMouseEnter:s,onMouseMove:d,onRemove:u}=r.useContext(z.H),m=(0,b.ro)(),_=e.notification;r.useEffect(()=>()=>{u(_)},[u,_]);try{t=eP(e.notification)}catch(e){return console.error(`Unsupported Notification: ${e}`),null}let f=e=>{e.stopPropagation()},p=()=>{l(!0),e.onHide&&e.onHide()},h=(e,t=o)=>B.sr.updateNotification({notification_id:_.notification_id,notification_action:e,currentView:t});return!i&&r.createElement("div",{className:m?"block_kit_row--rowContainerRevamp--Ak9PI":"block_kit_row--rowContainer--hsQo5",onClick:i=>{(0,eI.sx)("file_browser_notification_clicked",{notification_id:_.notification_id,notification_type:_.notification_type,actionable:"ActionableAttachment"===t._block_type,selectedView:o,plan_filter:e.currentPlanFilter,notification_filter:e.currentNotificationFilter}),f(i);let r=c(_);"ActionableAttachment"!==t._block_type&&h("resolve").then(({data:t})=>{if(r||e.followLinkOnClickCallback(),t.meta.updated_notification_blob){let n=t.meta.updated_notification_blob;e.updateNotificationCallback(n.notification_id,n)}},e=>{n(U.s.error((0,v.t)("user_notification.an_error_occurred_while_clicking_this_notification")))})},onMouseDown:f,onMouseEnter:t=>{s(t,_,()=>{h("resolve",o+"_quickreply").then(({data:t})=>{if(t.meta.updated_notification_blob){let n=t.meta.updated_notification_blob;e.updateNotificationCallback(n.notification_id,n)}})})},onMouseMove:e=>{d(e)},"data-testid":"notification-row"},((t,n)=>{try{switch(t._block_type){case"ActionableAttachment":{let i={updateNotification:e.updateNotificationCallback,hideNotification:p,followLinkIfPossible:e.followLinkOnClickCallback,buildNotificationActionRequest:h};return r.createElement(ew,{attachment:t,notification:n,actionBlockCallbacks:i})}case"ClientActionableAttachment":return r.createElement(ek,{attachment:t,notification:n});case"BodyAndThumbnailAttachment":case"BodyAttachment":return r.createElement(eh,{attachment:t,notification:n,dontShowPlanIcon:e.dontShowPlanIcon})}}catch(e){console.error(`Unable to render attachment: ${t}`),p()}})(t,_))||null}var eF=n(62079),eB=n(646851),eM=n(746643),eS=n(612724),eD=n(851166),ex=n(329995);let eL=class e{constructor(){this.circularBuffer=new eF.C(e.BUFFER_CAPACITY),this.lastTimestamp=0}clear(){this.circularBuffer.clear()}push(t,n){n-this.lastTimestamp>e.THROTTLE_DURATION_MS&&(this.circularBuffer.push(t),this.lastTimestamp=n)}getLocation50msAgo(){let e=this.circularBuffer.toArray();return e.length>0?e[0]:new eS.Mi(window.innerWidth,window.innerHeight)}};function eq(e){let[t,n]=(0,r.useState)(null),[i,a]=(0,r.useState)(0),l=(0,A.q5)(),o=r.useRef(eM.lQ),c=r.useRef(eM.lQ),s=r.useRef(null),d=r.useRef(null),u=(0,b.ro)(),m=(0,ex.zr)(l,t),_=r.useRef({notificationId:"",mouseLocationHistory:new eL,scheduledShowQuickReply:void 0,scheduledMarkAsRead:void 0});(0,r.useEffect)(()=>{d.current&&d.current.addEventListener("mouseover",e=>{clearTimeout(_.current?.scheduledShowQuickReply)})},[t]);let p=()=>{clearTimeout(_.current?.scheduledMarkAsRead),_.current.scheduledMarkAsRead=setTimeout(()=>{c.current=o.current},1e3)},h=r.useMemo(()=>{function e(e,t,i){let r=window.innerWidth>900&&window.innerHeight>650;_.current.notificationId=e.notification_id,r&&(0,ex.UC)(e)?(n((0,ex.AS)(e)),a(t),o.current=i):(n(null),o.current=eM.lQ),_.current.mouseLocationHistory.clear()}return{shouldShowChevron:()=>!1,onClick:e=>!1,onMouseEnter:(t,n,i)=>{let r=!1;if(n.notification_id!==_.current.notificationId&&d.current){let e=d.current.getBoundingClientRect(),n=new eS.Mi(e.left,e.top),i=new eS.Mi(e.left,e.bottom),a=[_.current.mouseLocationHistory.getLocation50msAgo(),n,i];r=(0,eB.y)(new eS.Mi(t.clientX,t.clientY),a)}let a=t.target;if(r){var l;l=()=>{e(n,a.getBoundingClientRect().bottom,i)},clearTimeout(_.current?.scheduledShowQuickReply),_.current&&(_.current.scheduledShowQuickReply=setTimeout(l,500))}else clearTimeout(_.current?.scheduledShowQuickReply),e(n,a.getBoundingClientRect().bottom,i)},onMouseMove:e=>{_.current.mouseLocationHistory.push(new eS.Mi(e.clientX,e.clientY),e.timeStamp)},onRemove:e=>{e.notification_id===_.current.notificationId&&n(null)}}},[d]);if(!((0,f.kc)().desktop_quickreply_filebrowser&&u))return r.createElement(r.Fragment,null,e.children);let k=Math.max(0,i-(s.current?.getBoundingClientRect().y??0)-(d.current?.getBoundingClientRect().height??640));return r.createElement(r.Fragment,null,r.createElement("div",{className:"quick_reply_switcher--hoverContainer--eL8mU",ref:s},t&&!m&&r.createElement("div",{className:"quick_reply_switcher--quickReplyContainer--7Qpx8",style:{top:k,maxHeight:640,minHeight:450},onMouseEnter:()=>{p()},onMouseLeave:()=>{clearTimeout(_.current?.scheduledMarkAsRead),c.current(),c.current=eM.lQ,o.current=eM.lQ}},r.createElement(eD.d,{quickReplyInfo:t,onClose:()=>n(null),fileBrowser:!0,ref:d}))),r.createElement(z.H.Provider,{value:h},e.children))}eL.BUFFER_CAPACITY=10,eL.DESIRED_DURATION_MS=50,eL.THROTTLE_DURATION_MS=eL.DESIRED_DURATION_MS/eL.BUFFER_CAPACITY;let eU="user_notifications_dropdown--filterToggleButton--ekpSd",eO="user_notifications_dropdown--filterToggleButtonSelected--qrMA-",eH="user_notifications_dropdown--dateHeader---l8oH",ej="user_notifications_dropdown--link--BC2j9 text--fontPos11--2LvXf text--_fontBase--QdLsd";function eQ(e,t){let n=(0,a.wA)(),i=(0,a.d4)(e=>e.user.id),o=(0,a.d4)(e=>e.user.community_profile_id),c=(0,a.d4)(e=>e.authedUsers.byId[i]?.plans),d=r.useMemo(()=>void 0!==c&&(new Map(c.map(e=>[e.plan_id,e.is_org])).get(t)||!1),[c,t]),u=(0,a.d4)(e=>e.userNotifications.communityProfileBellStates),_=(0,a.d4)(e=>e.selectedView.view),[f,h]=(0,r.useState)(new Map),[k,w]=(0,r.useState)(!0),[y,N]=(0,r.useState)(!1),C=(0,b.Ow)(),A=(0,m.F)(u);r.useEffect(()=>{let r=(0,l.s)(()=>{e?o&&(A.current[o]&&n((0,F.X2)({isBellStateHigh:!1,userInitiated:!0,profileId:o})),B.sr.getCommunityServerDriven({currentView:_}).then(({data:e})=>{I(e.meta)}).catch(e=>{n(E.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_community_notifications"),type:"user-notification",error:!0})),n(g.oB())})):((0,F.Zo)(!1,F.td,i),B.sr.getServerDrivenPlan({currentPlanId:t,currentView:_,isPlanOrg:d}).then(({data:e})=>{I(e.meta)}).catch(e=>{n(E.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_while_fetching_your_notifications"),type:"user-notification",error:!0})),n(g.oB())}))},800,!0);w(!0),r()},[t,A,_,n,e,d,o,i]);let I=e=>{let t=new Map,n=!1;e.forEach(e=>{t.set(e.notification_id,e),!n&&e.filters.is_priority&&(n=!0)}),N(n),h(t),w(!1)},R=r.useMemo(()=>{if(C){let e=(0,F.Dd)();return k||y||"priority"!==e||((0,F.hI)("all"),e="all"),e}return"all"},[y,C,k]);return{notificationFeedMap:f,isFetchingNotifications:k,initFilter:R,markAllAsReadFn:()=>{(e?p.Ay.post("/api/user_notifications/community/mark_read",{currentView:_,source:s.S8?"desktopbell":"web"}):p.Ay.post("/api/user_notifications/mark_read/plan",{current_plan_id:t,currentView:_,is_plan_org:d,source:s.S8?"desktopbell":"web"})).then(()=>{h(new Map(Array.from(f,([e,t])=>(t.is_unread=!1,[e,t]))))}).catch(()=>{n(E.F.enqueue({message:(0,v.t)("user_notification.an_error_occurred_marking_all_as_read"),type:"user-notification",error:!0}))})},updateNotification:(e,t)=>{h(new Map(f.set(e,t)))}}}function eV(e,t){return e.filter(e=>!t.includes(e.notification_id))}function ez(e){let t;let[n,a]=(0,r.useState)(F.td),{notificationFeedMap:l,isFetchingNotifications:o,markAllAsReadFn:s,updateNotification:d,initFilter:u}=eQ(!!e.inCommunity,n),[m,f]=(0,r.useState)([]),[p,h]=(0,r.useState)(u),k=(0,_.ZC)(p),w=(0,b.ro)(),v=n===F.td?M.a:n,E=eV([...l.values()],m);r.useEffect(()=>{h(u)},[u]),r.useEffect(()=>{let e=(0,F.Dd)();p!==k&&p===e&&(0,N.qD)({name:"user_notifications_filter_viewed",filter_type:p,dropdown_location:"web"})},[k,p]);let g=e=>{e.stopPropagation()},y=e=>{e===M.a&&(e=F.td),(0,N.FE)(e,"notifications",void 0),a(e)};switch(p){case"unread":t=E.filter(e=>e.is_unread);break;case"priority":t=E.filter(e=>e.filters.is_priority);break;default:t=E}return r.createElement("div",{className:c()(0!==l.size||o?"user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd":"user_notifications_dropdown--dropdownContainerEmptyState--7D3ct user_notifications_dropdown--dropdownContainer--ON3UV text--fontPos11--2LvXf text--_fontBase--QdLsd",e.containerClassName,{"user_notifications_dropdown--arrowRight--g36M8":e.arrowRight}),onMouseDown:g,onClick:g},r.createElement(eq,null,r.createElement(i.Header,{selectedPlan:n,onPlanFilterUpdate:e=>y(e),inCommunity:!!e.inCommunity,showMarkAllAsRead:e$(o,E)&&!w,markAllAsReadFn:s,inDesktopTray:!1}),!!w&&r.createElement(i.FilterToggle,{notificationFilter:p,toggleNotificationFilter:e=>{(0,N.Cu)({filter_type:e},"user_notifications_filter_clicked"),(0,F.hI)(e),h(e)},isFetchingNotifications:o,notifications:E,markAllAsReadFn:s}),r.createElement(i.Feed,{notifications:t,currentPlanFilter:v,currentNotificationFilter:p,hiddenNotificationIds:m,setHiddenNotificationIds:f,isFetchingNotifications:o,inCommunity:e.inCommunity,fillParent:!1,updateNotificationCallback:d})))}function e$(e,t){return!e&&t.some(e=>e.is_unread)}(e=>{function t(e){return(0,b.ro)()?r.createElement("div",{className:eH},eb[e.notificationDateGroup]):null}function n(e){return(0,b.Ow)()?r.createElement("div",{className:eH},eA[e.notificationPriorityGroup]):null}e.Feed=function(e){let i=(0,P.Pc)(),l=(0,a.d4)(e=>i?e.authedUsers.byId[i.id]?.plans:null),o=(0,a.Pj)(),c=(0,a.wA)(),m=(0,R.FC)(),_=(0,A.q5)(),f=(0,I.sZ)(),p=t=>{e.setHiddenNotificationIds([...e.hiddenNotificationIds,t])},h=!1;if(i&&!e.inCommunity&&l?.length===1&&(h=!0,e.currentPlanFilter===M.a)){let t=l[0].plan_id;for(let n of e.notifications)if(n.plan?.id.toString()!==t){h=!1;break}}let E=r.useCallback(t=>()=>{var n,i;if(!t.deeplink)return;let r=new URL(t.deeplink.href),a=r.pathname;if(a.includes("project"))n=a.split("project/")[1],(0,N.xr)("file_browser_folder_click",n,null,m,{selectedView:"notifications",planFilterId:e.currentPlanFilter===M.a?null:e.currentPlanFilter});else if(a.includes("team"))i=a.split("team/")[1],(0,N._J)("file_browser_team_click",i,m,{selectedView:"notifications",planFilterId:e.currentPlanFilter===M.a?null:e.currentPlanFilter});else if((0,d.ek)(a)){let t=(0,d.zv)(a);t&&c(y.UN({fileKey:t,entrypoint:"notifications",currentPlanFilter:{planId:e.currentPlanFilter===M.a?void 0:e.currentPlanFilter||void 0}}))}c(g.oB());let l=!!_&&_.key===(0,d.zv)(r.pathname);if(!s.eD&&l)c((0,C.H)({params:r.searchParams.toString(),hash:r.hash}));else if(t.deeplink.use_unsafe)u.Ay.unsafeRedirect(r.href,s.eD?void 0:"_blank");else if(e.inDesktopTray)u.Ay.redirect(r.href);else try{let e=(0,T.vU)(o.getState(),a);if("teamFeed"===e.view){f&&t.plan?.id.toString()===f.id?c(g.$T(e)):u.Ay.redirect(r.href,s.eD?void 0:"_blank");return}u.Ay.redirect(r.href,s.eD?void 0:"_blank");return}catch{u.Ay.redirect(r.href,s.eD?void 0:"_blank")}},[c,_,e.currentPlanFilter,e.inDesktopTray,m,o,f]);if(e.isFetchingNotifications)return r.createElement("div",{className:"user_notifications_dropdown--loadingContainer--jY9PZ"},r.createElement(k.kt,null));if(0===e.notifications.length)return r.createElement("div",{className:"user_notifications_dropdown--emptyRow--4UwYl"},(0,v.tx)("user_notifications.dropdown.no_notifications"));{var b;let i,a;"priority"===e.currentNotificationFilter&&e.notifications.sort((e,t)=>Number(eN(t))-Number(eN(e)));let l=e.inCommunity?"user_notifications_dropdown--scrollContainer--phbbl":"user_notifications_dropdown--scrollContainerWithPlan---Z4H1",o=eE((b=e.notifications)[0].preferred_attachments[0].body.created_at,b[0].filters.user_last_viewed_timestamp)===eE(b[b.length-1].preferred_attachments[0].body.created_at,b[0].filters.user_last_viewed_timestamp),c=e=>{let n;let a=null;if(!o)try{n=eP(e);let l=eE(n.body.created_at,e.filters.user_last_viewed_timestamp);l!==i&&(i=l,a=r.createElement(t,{key:`date-${e.notification_id}`,notificationDateGroup:l}))}catch(e){console.error("Skipping date header, unsupported notification")}return a},s=e=>{let t=null,i=eN(e)?"actionable":"actioned";return i!==a&&(a=i,t=r.createElement(n,{key:`priority-${e.notification_id}`,notificationPriorityGroup:i})),t};return r.createElement(w.P,{className:`${e.fillParent?"":l}`},r.createElement("div",null,e.notifications.map(t=>{let n=null;return n="priority"===e.currentNotificationFilter?s(t):c(t),r.createElement(r.Fragment,{key:`row-container-${t.notification_id}`},n,r.createElement(eT,{key:`row-${t.notification_id}`,notification:t,updateNotificationCallback:e.updateNotificationCallback,dontShowPlanIcon:h,currentPlanFilter:e.currentPlanFilter,currentNotificationFilter:e.currentNotificationFilter,inDesktopTray:e.inDesktopTray,onHide:()=>p(t.notification_id),followLinkOnClickCallback:E(t)}))})))}},e.UnreadBar=function(e){return e$(e.isFetchingNotifications,e.notifications)?r.createElement("div",{className:"user_notifications_dropdown--unreadToggleBar---1U5q"},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return r.createElement("div",{className:"user_notifications_dropdown--unread--e14XU"},(0,v.t)("user_notifications.unread_count",{unreadCount:t}))}(e.notifications),e$(e.isFetchingNotifications,e.notifications)&&r.createElement(h.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read"))):null},e.DateHeader=t,e.PriorityHeader=n,e.Header=function(e){let t=(0,A.q5)(),n=!e.inDesktopTray&&(!!t||!!(0,f.kc)().notif_settings_button);return r.createElement("div",{className:"user_notifications_dropdown--header--aOhWS"},e.inCommunity?r.createElement("div",{className:"user_notifications_dropdown--orgName--vbTxV ellipsis--ellipsis--Tjyfa text--fontPos11--2LvXf text--_fontBase--QdLsd"},(0,v.t)("user_notification.community_notifications")):r.createElement(r.Fragment,null,r.createElement(M.j,{currentPlanFilter:e.selectedPlan===F.td?M.a:e.selectedPlan,onPlanFilterUpdate:e.onPlanFilterUpdate,displaySettings:n})),e.children,e.showMarkAllAsRead&&r.createElement(h.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read")))},e.FilterToggle=function(e){let t=(0,b.Ow)(),n=e.notifications.some(e=>e.filters.is_priority);return e.isFetchingNotifications?null:r.createElement("div",{className:"user_notifications_dropdown--filterToggleBar--VhBmn user_notifications_dropdown--unreadToggleBar---1U5q"},r.createElement("div",{className:"user_notifications_dropdown--filterToggleButtons--Erg5A"},r.createElement("button",{className:c()({[eU]:!0,[eO]:"all"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("all")}},(0,v.t)("user_notification.all")),!!t&&n&&r.createElement("button",{className:c()({[eU]:!0,[eO]:"priority"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("priority")}},function(e){let t=e.reduce((e,t)=>e+Number(eN(t)),0);return 0===t?(0,v.t)("user_notifications.requests_empty"):(0,v.t)("user_notifications.requests_toggle_count",{actionableCount:t})}(e.notifications)),r.createElement("button",{className:c()({[eU]:!0,[eO]:"unread"===e.notificationFilter}),onClick:()=>{e.toggleNotificationFilter("unread")}},function(e){let t=e.reduce((e,t)=>e+Number(t.is_unread),0);return 0===t?(0,v.t)("user_notifications.unread_empty"):(0,v.t)("user_notifications.unread_toggle_count",{unreadCount:t})}(e.notifications))),e$(e.isFetchingNotifications,e.notifications)&&r.createElement(h.N_,{onClick:e.markAllAsReadFn,className:ej,trusted:!0},(0,v.tx)("user_notifications.dropdown.mark_all_as_read")))}})(i||(i={}))},168574:(e,t,n)=>{n.d(t,{a:()=>A,j:()=>I});var i=n(411855),r=n(188507),a=n(138225),l=n(903543),o=n(841962),c=n(918091),s=n(693565),d=n(76265),u=n(47795),m=n(736041),_=n(190500),f=n(176160),p=n(15092),h=n(785965),k=n(701834),w=n(893850),v=n(688656),E=n(929717),g=n(501238);let y="notifs_plan_filter--boldTitle--ZUcpT",b="notifs_plan_filter--autoTruncate--gl9us ellipsis--ellipsis--Tjyfa";var N=n(783423),C=n(533600);let A="ALL_PLANS_FILTER";function I(e){let{currentPlanFilter:t,onPlanFilterUpdate:n}=e,[I,R]=i.useState(null),P=(0,r.wA)(),T=(0,f.q5)(),F=(0,i.useRef)(null),B=!!(0,o.kc)().limited_plan_spaces,M=(0,p.iZ)(),S=(0,r.d4)(e=>B?e.plans:M?e.authedUsers.byId[M.id]?.plans:null),D=(0,r.d4)(h.P),x=(0,r.d4)(e=>e.orgById);if(!M||!S||S.length<=1)return i.createElement("span",{className:y},(0,d.t)("user_notification.all_notifications"));let L=S.map(e=>e.plan_id);L.unshift(A);let q=(e,t)=>e===A?(0,d.t)("user_notification.all_notifications"):t[e],U=S.reduce((e,t)=>{if(B&&"plan_type"in t){let n="";if(t.plan_type===w.O.ORG){let e=x[t.plan_id];n=e?.name??n}else{let e=D[t.plan_id];n=e?.name??n}e[t.plan_id]=n}else"name"in t&&(e[t.plan_id]=t.name);return e},{}),O=(e,t)=>{e.stopPropagation(),n(t),R(null)},H=L.map(e=>i.createElement(c.c$,{key:e,onClick:t=>{O(t,e)}},e===t&&i.createElement(s.B,{svg:C.A}),i.createElement("span",{className:`${e===t?"notifs_plan_filter--planNameChecked--dbvr9":"notifs_plan_filter--planNameUnchecked--J40CF"} ${b}`},q(e,U))));return i.createElement("div",{className:"notifs_plan_filter--planFilterContainer--E2TSh",ref:F},i.createElement("div",null,i.createElement("button",{onClick:e=>{let t=e.currentTarget.getBoundingClientRect();R(I?null:t)},className:"notifs_plan_filter--dropdownButton--hQgHc"},i.createElement("span",{className:[y,b].join(" ")},(0,k.gN)(q(t,U),35)),i.createElement(s.B,{svg:N.A,className:"notifs_plan_filter--chevronIcon--0Rqnp"})),I&&i.createElement(E.Cf,{targetRect:I,type:E.it.DEFAULT,lean:"right",minWidth:120,disableDropdownScrollContainer:!0,closeDropdown:()=>R(null)},H)),e.displaySettings&&i.createElement(a.K,{"aria-label":(0,d.t)("user_notifications.settings"),htmlAttributes:{"data-dropdown-tooltip":(0,d.t)("user_notifications.settings"),"data-tooltip-type":v.Ib.TEXT,"data-tooltip-show-above":!0},onClick:()=>{P(u.oB()),(0,_.Cu)({userId:M?.id,fileKey:T?.key,eventName:"Notification Settings Button Clicked"}),P(m.to({type:g.s,data:{tab:g.c.NOTIFICATIONS}}))}},i.createElement(l.I,null)))}},724515:(e,t,n)=>{n.d(t,{V:()=>a});var i=n(263159),r=n(411855);let a=443==n.j?(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M7.5 6A1.5 1.5 0 0 0 6 7.5v1a.5.5 0 0 0 1 0v-1a.5.5 0 0 1 .5-.5h9a.5.5 0 0 1 .5.5v9a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 0-1 0v1A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-9A1.5 1.5 0 0 0 16.5 6zm4.146 3.146a.5.5 0 0 1 .708 0l2.5 2.5a.5.5 0 0 1 0 .708l-2.5 2.5a.5.5 0 0 1-.708-.708l1.647-1.646H9.5a.5.5 0 0 1 0-1h3.793l-1.647-1.646a.5.5 0 0 1 0-.708",clipRule:"evenodd"})})}):null},236834:(e,t,n)=>{n.d(t,{V:()=>a});var i=n(263159),r=n(411855);let a=443==n.j?(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M17 16.5a.5.5 0 0 1-.5.5h-9a.5.5 0 0 1-.5-.5v-9a.5.5 0 0 1 .5-.5h2a.5.5 0 0 0 0-1h-2A1.5 1.5 0 0 0 6 7.5v9A1.5 1.5 0 0 0 7.5 18h9a1.5 1.5 0 0 0 1.5-1.5v-2a.5.5 0 0 0-1 0zm-5-10a.5.5 0 0 0 .5.5h3.793l-4.147 4.146a.5.5 0 0 0 .708.708L17 7.707V11.5a.5.5 0 0 0 1 0v-5a.5.5 0 0 0-.5-.5h-5a.5.5 0 0 0-.5.5",clipRule:"evenodd"})})}):null},105853:(e,t,n)=>{n.d(t,{L:()=>a});var i=n(263159),r=n(411855);let a=443==n.j?(0,r.memo)(function(e){return(0,i.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,i.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M4.008 5.124a1 1 0 0 1 1.116-1.116l3.66.457-.124.992-2.636-.329L5 5l.128 1.024.33 2.636a1 1 0 0 0 .285.583l7.403 7.403 3.5-3.5-7.403-7.403a1 1 0 0 0-.583-.286l.124-.992a2 2 0 0 1 1.166.57l9.55 9.55a2 2 0 0 1 0 2.83L17.414 19.5a2 2 0 0 1-2.828 0l-9.55-9.55a2 2 0 0 1-.57-1.166zm13.346 8.73-3.5 3.5 1.439 1.439a1 1 0 0 0 1.414 0l2.086-2.086a1 1 0 0 0 0-1.414z",clipRule:"evenodd"})})}):null}}]);

//# debugId=627b2b14-b00c-53f9-9ba2-c609ba624601

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/1916180f5a1eb2af83e5cf2510071c1558ef87a2/6498-626e87243af90e52.min.js.map