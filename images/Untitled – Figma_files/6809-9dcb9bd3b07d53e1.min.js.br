"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="882ecd98-c548-51f4-b8e3-02204f42825a")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[6809],{696603:(e,t,r)=>{r.d(t,{x:()=>i,z:()=>n});let n={CREATED:"ADD",MODIFIED:"MOD",REMOVED:"DEL"},i={CREATED:"+",MODIFIED:"\u2732",CHILD_MODIFIED:"\u21B5",REMOVED:"-"}},237442:(e,t,r)=>{r.d(t,{E:()=>c});var n=r(236891),i=r(903570),s=r(339185),a=r(326089),l=r(59963),o=r(950233);class c extends l.R{constructor(e,t,r){super(e,t,r),this.id=e,this.nodeChange=t,this.scene=r}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get type(){return this.isState?"STATE":super.type}get otherVersions(){if(!this.isSubscribedAsset)return[];let e=this.scene.internalCanvas;if(!e)return[];let t=this.key;return t?e.children.filter(e=>e.type==e.type&&e.key===t&&e.id!=e.id):[]}get consumedStyles(){return this.consumedStyleIds.map(e=>this.scene.getStyleByStyleId(e)).filter(n.Vq)}get consumedVariables(){return this.consumedVariableIds.map(e=>this.scene.getVariableByVariableId(e)).filter(n.Vq)}get internalOnly(){return this.nodeChange.internalOnly||this.parent?.internalOnly||!1}get stateGroupId(){return this.isStateGroup?this._assetId(i.GU):this.isSymbol?this.parent?.stateGroupId??null:null}get backingSymbol(){let e=this.backingSymbolId;return e?this.scene.getNodeByGuid(e):null}get backingStateGroup(){let e=this.backingSymbol;if(!e)return null;let t=e.parent;return t&&t.isStateGroup?t:null}get absoluteTransform(){let e=this.transform,t=this.parent?.absoluteTransform;if(!e||!t)return s.s.identity().toFigMatrix();{let r=s.s.fromFigMatrix(t);return r.multiply(s.s.fromFigMatrix(e)),r.toFigMatrix()}}get containingSymbol(){return this.findAncestor(e=>e.isSymbol)}get containingPage(){return this.findAncestor(e=>e.isPage)}get isState(){return this.isSymbol&&!!this.parent?.isStateGroup}get isPrimaryInstance(){return this.isInstance}get isLooseComponent(){return this.isSymbol&&!this.isState}get isProductComponent(){return this.isStateGroup||this.isLooseComponent}get isInternalOnly(){return this.someAncestor(e=>!!e.nodeChange.internalOnly,{includeSelf:!0})}getFriendlyVariableModeString(e){if(!this.isVariableCollection)return"";let t=a.c1.fromKiwi(e),r=this.nodeChange.variableSetModes?.find(e=>e.id&&a.c1.fromKiwi(e.id)===t);return r?`${r.name} (${t})`:`<missing mode> (${t})`}get variableDependenciesByModeId(){if(!this.isVariable)return{};let e={},t=this.scene,r=t.getVariableCollectionByCollectionId(this.variableCollectionId);return this.nodeChange.variableDataValues?.entries?.forEach(n=>{if(n.modeID){let s=r?.getFriendlyVariableModeString(n.modeID)??a.c1.fromKiwi(n.modeID);e[s]=[],function r(n,s){if(s?.dataType==="ALIAS")!function(r,n){if(!n?.value?.alias)return;let s=i.sD.fromKiwi(n.value.alias);if(!s)return;let a=t.getVariableByVariableId(s);a&&e[r].push(a)}(n,s);else if(s?.dataType==="EXPRESSION")!function(e,t){for(let n of t?.value?.expressionValue?.expressionArguments??[])r(e,n)}(n,s);else if(s?.dataType==="MAP")return function(e,t){for(let n of t?.value?.mapValue?.values??[])r(e,n.value)}(n,s)}(s,n.variableData)}}),e}generateDisplayProperties(){let e=super.generateDisplayProperties(),t=this.containingPage,r=e.rightBadges;return null!=this.parent||this.isDocument||r.push({type:"error",value:"Orphan"}),{...e,longName:t?`${t.displayProperties.name} > ${this.name}`:this.name,rightBadges:r}}generateDimensionalInfoItem(){let e=super.generateDimensionalInfoItem();return null==e?null:(0,o.Sv)(e,[this.absoluteTransform&&this.generatePositionItem("Absolute position",this.absoluteTransform)])}generateDesignSystemsInfoItem(){return(0,o.Sv)(super.generateDesignSystemsInfoItem(),[this.isPrimaryInstance&&this.backingStateGroup&&this.scene.generateNodeLinkItem("Backing state group",this.backingStateGroup.guid),this.isStyle&&this.styleId&&(0,o.$7)({label:"Style consumers",list:this.scene.getStyleConsumers(this.styleId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableId&&(0,o.$7)({label:"Variable consumers",list:this.scene.getVariableConsumers(this.variableId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Nodes with explicit mode",list:this.scene.getNodesWithExplicitModeForVariableSet(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isAsset&&(0,o.$7)({label:"Other versions",list:this.otherVersions,generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)}),this.isVariable&&this.variableCollectionId&&this.scene.generateVariableCollectionLinkItem("Variable collection",this.variableCollectionId),this.isVariableCollection&&this.variableCollectionId&&(0,o.$7)({label:"Variables in collection",list:this.scene.getVariablesInCollection(this.variableCollectionId),generateChild:(e,t)=>this.scene.generateNodeLinkItem(e,t.guid)})])}}},720759:(e,t,r)=>{r.d(t,{y:()=>n});let n=Symbol("Blobs not supported.")},40035:(e,t,r)=>{if(r.d(t,{TZ:()=>o,YY:()=>i,iC:()=>l,nP:()=>a,nd:()=>s,tP:()=>c}),443==r.j)var n=r(950233);let i=new Set(["USER","PLUGIN","AI","REST_API"]);function s(e,t){return Number(i.has(t.type))-Number(i.has(e.type))}let a={MIXED:"MIXED",USER:"USER",PLUGIN:"PLGIN",AI:"AI",INVALID:"INVLD",SYSTEM:"SYSTM",TEST_SETUP:"TEST",REST_API:"REST",ONBOARDING:"ONBRD",AUTOSAVE:"ASAVE"};function l(e){let t=[];for(let r of e?.snapshots??[])for(let e of r.frames??[])for(let r of e.stack??[])t.push(r);return t.sort(s)}function o(e){let t="INVALID";for(let r of e)if(r.type&&"INVALID"!==r.type){if("INVALID"===t)t=r.type;else if(t!==r.type){t="MIXED";break}}return{type:"editType",value:t}}class c{constructor(e){this.fieldNamesByFieldNumber=function(e){let t=new Map,r=e.definitions.find(e=>"NodeChange"===e.name);if(!r)return console.error("Couldn't find NodeChange definition in schema"),t;for(let e of r.fields)t.set(e.value,e.name);return t}(e)}generateEditScopeItems(e){let{editScopeInfo:t,aiEditedNodeChangeFieldNumbers:r}=e;return(0,n.QB)([t?.snapshots&&this.generateEditScopeSnapshotsItem(t.snapshots),r&&this.generateAiEditedNodeFieldsItem(r)])}generateEditScopeSnapshotsItem(e){return(0,n.$7)({label:"Edit Scope Snapshots",list:e,generateChild:(e,t)=>t.nodeChangeFieldNumbers?{label:e,children:[(0,n.$7)({label:"Frames",list:t.frames??[],generateChild:(e,t)=>this.generateEditScopeSnapshotFrameItem(e,t),expandByDefault:!0}),(0,n.$7)({label:"Fields",list:t.nodeChangeFieldNumbers??[],generateChild:(e,t)=>this.generateFieldItem(e,t),expandByDefault:!0})],expandByDefault:!0}:(0,n.$7)({label:e,list:t.frames??[],generateChild:(e,t)=>this.generateEditScopeSnapshotFrameItem(e,t),expandByDefault:!0}),expandByDefault:!0})}generateAiEditedNodeFieldsItem(e){return(0,n.$7)({label:"AI Edited Fields",list:e||[],expandByDefault:!0,generateChild:(e,t)=>this.generateFieldItem(e,t)})}generateEditScopeSnapshotFrameItem(e,t){return(0,n.$7)({label:e,list:t.stack??[],generateChild:(e,t)=>(0,n.B_)(e,{type:"editScope",value:t}),expandByDefault:!0})}generateFieldItem(e,t){let r=this.fieldNamesByFieldNumber.get(t);return(0,n.B_)(e,r?{type:"nonUserText",value:r}:{type:"error",value:`Unknown field number ${t}`})}}},326089:(e,t,r)=>{r.d(t,{SW:()=>n,c1:()=>i,dB:()=>s,r4:()=>l});var n,i,s,a=r(245459);function l(e,t){let r=t.toGuidStrIfLocal(e);if(r)return i.format(r);let n=t.toRefIfSubscribed(e);return n?`${n.key.slice(0,5)}...${n.key.slice(-5)}/${n.version}`:e}(n||(n={})).fromString=function(e){return e},(e=>{e.fromString=function(e){return e},e.fromKiwi=function(e){return a.dI(e)},e.format=function(e){return`(${e})`},e.isValid=function(e){return a.fn(a.sH(e))}})(i||(i={})),(e=>{e.fromKiwi=function(e){return e.guids?.map(i.fromKiwi)??[]},e.fromStrings=function(e){return e},e.format=function(e){return`[${e.map(i.format).join(", ")}]`},e.isValid=function(e){return e.length>0&&e.every(i.isValid)}})(s||(s={}))},196068:(e,t,r)=>{r.d(t,{I6:()=>u,Si:()=>g,Tj:()=>c,U9:()=>h,jJ:()=>o,pb:()=>d,zN:()=>m});var n=r(461816),i=r.n(n);let s=()=>!0;function a(e){return Array.isArray(e)?e:[e]}function l(e,t){return"parent"===t?[e.parent]:e.children}function o(e,t,r,{includeSelf:n,shouldSkipAfter:s,shouldBreakAfter:c}={}){let u=a(e),d=n?[...u]:i()(u,e=>l(e,t));for(;;){let e=d.pop();if(!e||(r(e),c?.(e)))return;if(!s?.(e))for(let r of l(e,t))d.push(r)}}function c(e,t,r,n={}){let i=[];return o(e,t,e=>i.push(r(e)),n),i}function u(e,t,r,{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:s}={}){let a;return o(e,t,e=>{r(e)&&(a=e)},{includeSelf:n,shouldSkipAfter:i,shouldBreakAfter:e=>null!=a||s?.(e)||!1}),a}function d(e,t,r,n={}){let i=[];return o(e,t,e=>{r(e)&&i.push(e)},n),i}function h(e,t,r=s,n={}){let i=0;return o(e,t,e=>{r(e)&&i++},n),i}function m(e,t,r,n={}){return null!=u(a(e),t,r,n)}function g(e,t,r,n={}){return!m(a(e),t,e=>!r(e),n)}},59963:(e,t,r)=>{r.d(t,{R:()=>p});var n=r(846288),i=r(588172),s=r(903570),a=r(879058),l=r(357614),o=r(827473),c=r(326089),u=r(761843),d=r(752188),h=r(163703),m=r(950233),g=r(339977);class p extends d.s{constructor(e,t,r){super(e),this.id=e,this.nodeChange=t,this.scene=r,t.guid||console.error("Node is missing guid",t)}get name(){return(0,g.bU)(this.nodeChange.name??"",this.scene.resource.sensitiveTextPolicy)}get text(){return(0,g.bU)(this.nodeChange.textData?.characters??"",this.scene.resource.sensitiveTextPolicy)}get guidObj(){return this.nodeChange.guid??{localID:-1,sessionID:-1}}get guid(){return c.c1.fromKiwi(this.guidObj)}get parentGuid(){let e=this.nodeChange.parentIndex?.guid;return e?c.c1.fromKiwi(e):null}get nodeType(){return this.nodeChange.type||"NONE"}get type(){let e=this.nodeType;if("INSTANCE"===e)return"PRIMARY_INSTANCE";if("VARIABLE_SET"===e)return"VARIABLE_COLLECTION";if(this.isStateGroup)return"STATE_GROUP";if(this.isStyle){let e=this.nodeChange.styleType;switch(e){case"FILL":return"FILL_STYLE";case"STROKE":return"STROKE_STYLE";case"TEXT":return"TEXT_STYLE";case"EFFECT":return"EFFECT_STYLE";case"EXPORT":return"EXPORT_STYLE";case"GRID":return"GRID_STYLE";default:(0,n.j)(e)}}else if("FRAME"===e&&this.nodeChange.resizeToFit)return"GROUP";return e}get overrideKey(){let e=this.nodeChange.overrideKey;return e?c.c1.fromKiwi(e):null}get key(){return(0,a.sg)(this.nodeChange.key??this.nodeChange.componentKey??(this.nodeChange.sharedStyleMasterData?.styleKey||this.nodeChange.sharedStyleReference?.styleKey||null))}get version(){return(0,a.Xf)(this.nodeChange.version??this.nodeChange.sharedSymbolVersion??null)}get assetRef(){return a.iU.fromKiwi({key:this.key??void 0,version:this.version??void 0})}_assetId(e){return this.isSubscribedAsset?this.assetRef?e.fromRef(this.assetRef):null:e.fromLocalNodeIdStr(this.guid)}get symbolId(){return this.isSymbol?this._assetId(s.Ws):null}get stateGroupId(){return this.isStateGroup?this._assetId(s.GU):null}get styleId(){return this.isStyle?this._assetId(s.PK):null}get variableId(){return this.isVariable?this._assetId(s.sD):null}get variableCollectionId(){return this.isVariableCollection?this._assetId(s.gr):this.isVariable&&this.nodeChange.variableSetID?s.gr.fromKiwi(this.nodeChange.variableSetID):null}get responsiveSetAssetId(){return this.isResponsiveSetAsset?this._assetId(s.cd):null}get codeComponentId(){return this.isCodeComponentAsset?this._assetId(s._H):null}get codeFileId(){return this.isCodeFileAsset?this._assetId(s.Tq):null}get codeLibraryId(){return this.isCodeLibraryAsset?this._assetId(s.eJ):null}get publishId(){let e=this.nodeChange.publishID;return e?c.c1.fromKiwi(e):null}get isRenderingNode(){return!this.isDocument&&!this.isCanvas&&!this.isStyle&&!this.isVariable&&!this.isVariableCollection&&!this.isVariableOverride}get isInstance(){return"INSTANCE"===this.nodeType}get isSymbol(){return"SYMBOL"===this.nodeType}get isStateGroup(){return"FRAME"===this.nodeType&&null!=this.nodeChange.isStateGroup}get isComponentish(){return this.isSymbol||this.isStateGroup}get isStyle(){return this.nodeChange.styleType&&o.og.indexOf(this.nodeChange.styleType)>-1}get isVariable(){return"VARIABLE"===this.nodeType}get isVariableCollection(){return this.isRootVariableCollection||this.isExtendedVariableCollection}get isRootVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&!this.nodeChange.backingVariableSetId)}get isExtendedVariableCollection(){return!!("VARIABLE_SET"===this.nodeType&&this.nodeChange.backingVariableSetId)}get isVariableOverride(){return"VARIABLE_OVERRIDE"===this.nodeType}get isResponsiveSetAsset(){return"RESPONSIVE_SET"===this.nodeType}get isCodeComponentAsset(){return"CODE_COMPONENT"===this.nodeType}get isCodeFileAsset(){return"CODE_FILE"===this.nodeType}get isCodeLibraryAsset(){return"CODE_LIBRARY"===this.nodeType}get isAsset(){return this.isSymbol||this.isStateGroup||this.isStyle||this.isVariable||this.isVariableCollection||this.isVariableOverride||this.isResponsiveSetAsset||this.isCodeComponentAsset||this.isCodeFileAsset||this.isCodeLibraryAsset}get isLocalAsset(){return this.isAsset&&!this.isSubscribedAsset}get isSubscribedAsset(){return this.isComponentish?null!=this.nodeChange.sourceLibraryKey:this.isStyle?this.nodeChange.key&&this.nodeChange.version:(!!this.isVariable||!!this.isVariableCollection||!!this.isResponsiveSetAsset||!!this.isCodeComponentAsset)&&!!this.nodeChange.key}get isStack(){return null!=this.nodeChange.stackMode&&"NONE"!==this.nodeChange.stackMode}get isCanvas(){return"CANVAS"===this.nodeChange.type}get isPage(){return this.isCanvas}get isDocument(){return"DOCUMENT"===this.nodeChange.type}get backingSymbolId(){let e=this.nodeChange.overriddenSymbolID??this.nodeChange.symbolData?.symbolID;return e?c.c1.fromKiwi(e):null}get transform(){return this.nodeChange.transform}get isImmutableFrame(){let e=this.nodeType;return"STICKY"===e||"SHAPE_WITH_TEXT"===e||"CONNECTOR"===e||"CODE_BLOCK"===e||"MEDIA"===e||"SECTION_OVERLAY"===e||"TABLE"===e}get overridesList(){return this.nodeChange.symbolData?.symbolOverrides??[]}get dsdList(){return this.nodeChange.derivedSymbolData??[]}get immutableFrameSublayerOverridesList(){return this.nodeChange.nodeGenerationData?.overrides??[]}get difdList(){return this.nodeChange.derivedImmutableFrameData?.overrides??[]}get imageHashes(){let e=[],t=t=>{t?.hash&&e.push((0,l.qg)(t))},r=e=>{t(e.image),t(e.imageThumbnail),t(e.animatedImage)},n=e=>{if(e)for(let t of e)r(t)};n(this.nodeChange.fillPaints),n(this.nodeChange.strokePaints),n(this.nodeChange.backgroundPaints),n(this.nodeChange.widgetHoverStyle?.fillPaints),n(this.nodeChange.widgetHoverStyle?.strokePaints);let i=t=>{t&&e.push(t)};return i(this.nodeChange.embedData?.thumbnailImageHash),i(this.nodeChange.embedData?.faviconImageHash),i(this.nodeChange.linkPreviewData?.thumbnailImageHash),i(this.nodeChange.linkPreviewData?.faviconImageHash),i(this.nodeChange.richMediaData?.mediaHash),e}get consumedStyleIds(){let e=[];function t(t){for(let r of u.GP){let n=t[r];if(n){let t=s.PK.fromKiwi(n);t&&e.push(t)}}}for(let e of(t(this.nodeChange),this.nodeChange.symbolData?.symbolOverrides??[]))t(e);for(let e of this.nodeChange.textData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.vectorData?.styleOverrideTable??[])t(e);for(let e of this.nodeChange.nodeGenerationData?.overrides??[])t(e);return e}get consumedVariableIds(){let e=new Set;function t(t){if(!t)return;let r=s.sD.fromKiwi(t);r&&e.add(r)}for(let e of u.EI)!function(e){for(let r of e??[])t(r.colorVar?.value?.alias)}(this.nodeChange[e]);for(let e of this.nodeChange.variableConsumptionMap?.entries??[])t(e.variableData?.value?.alias),e.variableData?.value?.expressionValue&&function e(r){for(let n of r.expressionArguments??[])t(n.value?.alias),n.value?.expressionValue&&e(n.value.expressionValue)}(e.variableData.value.expressionValue);return[...e.values()]}generateTrackingInfoItem(){return null}generateRawProperties(){return this.scene.generateNodeChangeItems(this.nodeChange)}generateDisplayProperties(){let e=[];return this.isStack&&e.push({type:"info",value:"Stack"}),{leftBadges:[{type:"type",value:this.type}],primaryId:c.c1.format(this.guid),secondaryId:this.overrideKey?c.c1.format(this.overrideKey):null,name:this.name,longName:this.name,rightBadges:e,memoryFraction:null}}generateSearchProperties(){return{id:this.id,guid:this.guid,type:[this.type,this.nodeType,h.uy[this.type]],parentGuid:this.parentGuid,overrideKey:this.overrideKey,backingSymbolId:this.backingSymbolId,publishId:this.publishId,consumedStyleIds:this.consumedStyleIds.map(s.PK.toString),name:this.name,field:Object.keys(this.nodeChange),text:this.text,key:this.key,version:this.version,imageHashes:this.imageHashes,symbolId:this.symbolId,stateGroupId:this.stateGroupId,styleId:this.styleId,variableId:this.variableId,variableCollectionId:this.variableCollectionId,codeComponentId:this.codeComponentId,codeFileId:this.codeFileId,codeLibraryId:this.codeLibraryId}}generateComputedProperties(){return(0,m.QB)([this.generateDimensionalInfoItem(),this.generateDesignSystemsInfoItem(),this.generateFigJamInfoItem(),this.generateTrackingInfoItem()])}generateDimensionalInfoItem(){if(!this.isRenderingNode)return null;let e=this.nodeChange.size;return{label:"Dimensional info",children:(0,m.QB)([e&&(0,m.B_)("Width",{type:"numeric",value:e.x}),e&&(0,m.B_)("Height",{type:"numeric",value:e.y}),this.transform&&this.generatePositionItem("Relative position",this.transform)])}}generateDesignSystemsInfoItem(){let e=this.isAsset,t=this.isInstance,r=e?this.key:void 0,n=e?this.version:void 0;return{label:"Design systems info",children:(0,m.QB)([e&&(0,m.B_)("Asset publish type",{type:"nonUserText",value:this.isSubscribedAsset?"Subscribed":"Local"}),r&&(0,m.B_)("Asset key",{type:"nonUserText",value:r,sensitive:!1}),n&&(0,m.B_)("Asset version",{type:"nonUserText",value:n,sensitive:!1}),(0,m.$7)({label:"Consumed variables",list:this.consumedVariableIds,generateChild:this.scene.generateVariableLinkItem}),(0,m.$7)({label:"Consumed styles",list:this.consumedStyleIds,generateChild:this.scene.generateStyleLinkItem}),t&&this.scene.generateNodeLinkItem("Backing symbol",this.backingSymbolId),t&&this.generateOverridesListItem("Instance overrides",this.overridesList),t&&this.generateOverridesListItem("Derived symbol data",this.dsdList)])}}generateFigJamInfoItem(){let e=this.isImmutableFrame;return{label:"FigJam info",children:(0,m.QB)([e&&this.generateOverridesListItem("Overrides",this.immutableFrameSublayerOverridesList),e&&this.generateOverridesListItem("Derived immutable frame data",this.difdList)])}}generateOverridesListItem(e,t){return{label:e,children:[...t].sort((e,t)=>(function(e,t){let r=e.guids??[],n=t.guids??[];for(let e=0;e<Math.min(r.length,n.length);e++){let t=r[e],i=n[e];if(t.sessionID!==i.sessionID)return t.sessionID-i.sessionID;if(t.localID!==i.localID)return t.localID-i.localID}return r.length-n.length})(e.guidPath||{},t.guidPath||{})).map(e=>this.generateOverrideItem(this,e))}}generateOverrideItem(e,{guidPath:t,overrideLevel:r,...n}){let i=c.dB.format(c.dB.fromKiwi(t??{}));return{label:0===r?i:`${i} (level ${r})`,children:this.scene.generateNodeChangeItems(n)}}generatePositionItem(e,t){let{m00:r,m01:n,m02:s,m10:a,m11:l,m12:o}=t,c=r*l-n*a,u=(()=>{let e=180/Math.PI*Math.atan2(a,r);return(0,i.xN)(e,0,1e-4)?0:-1*e})(),d=c<0?(0,i.xN)(u,0,1e-4)?"Vertically":(0,i.xN)(Math.abs(u),180,1e-4)?"Horizontally":"Yes":"No";return{label:e,children:[(0,m.B_)("X",{type:"numeric",value:s}),(0,m.B_)("Y",{type:"numeric",value:o}),(0,m.B_)("Angle",{type:"numeric",value:u}),(0,m.B_)("Scale",{type:"numeric",value:c}),(0,m.B_)("Mirrored",{type:"nonUserText",value:d})],expandByDefault:!0}}}},752188:(e,t,r)=>{r.d(t,{s:()=>i});var n=r(196068);class i{constructor(e){this.id=e}get displayProperties(){return this._cachedDisplayProperties||(this._cachedDisplayProperties=this.generateDisplayProperties()),this._cachedDisplayProperties}get searchProperties(){return this._cachedSearchProperties||(this._cachedSearchProperties=this.generateSearchProperties()),this._cachedSearchProperties}get rawProperties(){return this._cachedRawProperties||(this._cachedRawProperties=this.generateRawProperties()),this._cachedRawProperties}get computedProperties(){return this._cachedComputedProperties||(this._cachedComputedProperties=this.generateComputedProperties()),this._cachedComputedProperties}freeze(){return new s(this)}forEachAncestor(e,t){return(0,n.jJ)(this,"parent",e,t)}forEachDescendant(e,t){return(0,n.jJ)(this,"children",e,t)}mapAncestors(e,t){return(0,n.Tj)(this,"parent",e,t)}mapDescendants(e,t){return(0,n.Tj)(this,"children",e,t)}filterAncestors(e,t){return(0,n.pb)(this,"parent",e,t)}filterDescendants(e,t){return(0,n.pb)(this,"children",e,t)}findAncestor(e,t){return(0,n.I6)(this,"parent",e,t)}findDescendant(e,t){return(0,n.I6)(this,"children",e,t)}someAncestor(e,t){return(0,n.zN)(this,"parent",e,t)}someDescendant(e,t){return(0,n.zN)(this,"children",e,t)}everyAncestor(e,t){return(0,n.Si)(this,"parent",e,t)}everyDescendant(e,t){return(0,n.Si)(this,"children",e,t)}countAncestors(e,t){return(0,n.U9)(this,"parent",e,t)}countDescendants(e,t){return(0,n.U9)(this,"children",e,t)}}class s extends i{constructor(e){super(e.id),this.parent=e.parent,this.children=e.children,this._cachedDisplayProperties=e.displayProperties,this._cachedSearchProperties=e.searchProperties,this._cachedRawProperties=e.rawProperties,this._cachedComputedProperties=e.computedProperties}generateDisplayProperties(){return this._cachedDisplayProperties}generateSearchProperties(){return this._cachedSearchProperties}generateRawProperties(){return this._cachedRawProperties}generateComputedProperties(){return this._cachedComputedProperties}}},163703:(e,t,r)=>{r.d(t,{SP:()=>s,p7:()=>a,uy:()=>i});var n=r(846288);let i={NONE:"NONE",DOCUMENT:"DOC",CANVAS:"CANV",GROUP:"GROUP",FRAME:"FRAME",BOOLEAN_OPERATION:"BOOL",VECTOR:"VECT",STAR:"STAR",LINE:"LINE",ELLIPSE:"ELLPS",RECTANGLE:"RECT",REGULAR_POLYGON:"POLY",ROUNDED_RECTANGLE:"RRECT",TEXT:"TEXT",TEXT_PATH:"TXPTH",SLICE:"SLICE",SYMBOL:"SYMB",STATE:"STATE",PRIMARY_INSTANCE:"PINST",NESTED_INSTANCE:"NINST",STICKY:"STCKY",SHAPE_WITH_TEXT:"SWTXT",CONNECTOR:"CONN",CODE_BLOCK:"CODE",WIDGET:"WIDGT",STAMP:"STAMP",MEDIA:"MEDIA",HIGHLIGHT:"HIGH",SECTION:"SECT",SECTION_OVERLAY:"SECTO",WASHI_TAPE:"WASHI",STATE_GROUP:"STGRP",FILL_STYLE:"FSTYL",STROKE_STYLE:"SSTYL",TEXT_STYLE:"TSTYL",EFFECT_STYLE:"ESTYL",EXPORT_STYLE:"XSTYL",GRID_STYLE:"GSTYL",VARIABLE:"VAR",VARIABLE_COLLECTION:"V_COL",VARIABLE_OVERRIDE:"V_OVR",TABLE:"TABLE",TABLE_CELL:"TCELL",SLIDE:"SLIDE",SLIDE_ROW:"SROW",SLIDE_GRID:"SGRID",ASSISTED_LAYOUT:"ALAYO",INTERACTIVE_SLIDE_ELEMENT:"FLAPP",MODULE:"MOD",RESPONSIVE_SET:"RESET",CODE_LIBRARY:"<LIB>",CODE_FILE:"<FIL>",CODE_COMPONENT:"<COM>",CODE_INSTANCE:"<INS>",JOURNAL_ENTRY:"JRNL",DIFF_CHUNK:"CHUNK",CODE_LAYER:"<LAY>",BRUSH:"BRUSH",MANAGED_STRING:"MGSTR",TRANSFORM:"TRSFM",CMS_RICH_TEXT:"CRTXT",REPEATER:"RPTR"};var s=(e=>(e[e.DesignSystems=0]="DesignSystems",e[e.FigJam=1]="FigJam",e[e.Editor=2]="Editor",e[e.Page=3]="Page",e[e.Other=4]="Other",e))(s||{});function a(e){switch(e){case"CODE_COMPONENT":case"CODE_INSTANCE":case"CODE_LIBRARY":case"CODE_FILE":case"CODE_LAYER":case"EFFECT_STYLE":case"EXPORT_STYLE":case"FILL_STYLE":case"GRID_STYLE":case"MODULE":case"NESTED_INSTANCE":case"PRIMARY_INSTANCE":case"STATE_GROUP":case"STATE":case"STROKE_STYLE":case"SYMBOL":case"TEXT_STYLE":case"VARIABLE_COLLECTION":case"VARIABLE_OVERRIDE":case"VARIABLE":return 0;case"BOOLEAN_OPERATION":case"BRUSH":case"ELLIPSE":case"LINE":case"RECTANGLE":case"REGULAR_POLYGON":case"ROUNDED_RECTANGLE":case"STAR":case"VECTOR":return 2;case"CODE_BLOCK":case"CONNECTOR":case"HIGHLIGHT":case"MEDIA":case"SECTION_OVERLAY":case"SHAPE_WITH_TEXT":case"STAMP":case"STICKY":case"TABLE":case"WASHI_TAPE":return 1;case"CANVAS":case"DIFF_CHUNK":case"DOCUMENT":case"JOURNAL_ENTRY":return 3;case"ASSISTED_LAYOUT":case"FRAME":case"GROUP":case"INTERACTIVE_SLIDE_ELEMENT":case"NONE":case"NONE":case"RESPONSIVE_SET":case"SECTION":case"SLICE":case"SLIDE_GRID":case"SLIDE_ROW":case"SLIDE":case"TABLE_CELL":case"TEXT_PATH":case"TEXT":case"WIDGET":case"MANAGED_STRING":case"TRANSFORM":case"CMS_RICH_TEXT":case"REPEATER":return 4;default:return(0,n.j)(e),4}}},950233:(e,t,r)=>{r.d(t,{$7:()=>l,B_:()=>a,QB:()=>i,Sv:()=>s,o8:()=>o});var n=r(236891);function i(e){return e.filter(Boolean).sort((e,t)=>e.label.localeCompare(t.label))}function s(e,t){return{...e,children:i([...t,...e.children])}}function a(e,t){return{label:e,value:t,children:[],expandByDefault:!1}}function l({label:e,value:t,list:r,generateChild:i,expandByDefault:s}){return{label:e,value:t??{type:"metadata",value:r.length},children:r.map((e,t)=>i(`[${t}]`,e,t)).filter(n.Vq),expandByDefault:s}}function o({label:e,value:t,object:r,generateChild:n,expandByDefault:s,showChildCount:a}){return{label:e,value:t??(a?{type:"metadata",value:Object.keys(r).length}:void 0),children:i(Object.entries(r).map(([e,t])=>n(e,t))),expandByDefault:s}}},962471:(e,t,r)=>{r.d(t,{R:()=>i});var n=r(196068);class i{constructor({name:e,sensitiveTextPolicy:t}){this.name=e,this.sensitiveTextPolicy=t}forEach(e,t){return(0,n.jJ)(this.rootObjects,"children",e,{...t,includeSelf:!0})}map(e,t){return(0,n.Tj)(this.rootObjects,"children",e,{...t,includeSelf:!0})}filter(e,t){return(0,n.pb)(this.rootObjects,"children",e,{...t,includeSelf:!0})}find(e,t){return(0,n.I6)(this.rootObjects,"children",e,{...t,includeSelf:!0})}some(e,t){return(0,n.zN)(this.rootObjects,"children",e,{...t,includeSelf:!0})}every(e,t){return(0,n.Si)(this.rootObjects,"children",e,{...t,includeSelf:!0})}count(e,t){return(0,n.U9)(this.rootObjects,"children",e,{...t,includeSelf:!0})}}},86623:(e,t,r)=>{r.d(t,{X:()=>c});var n=r(236891),i=r(903570),s=r(357272),a=r(761843),l=r(326089),o=r(950233);class c{constructor(){this.generateNodeLinkItem=(e,t)=>(0,o.B_)(e,{type:"nodeGuid",value:t,scene:this}),this.generateStyleLinkItem=(e,t)=>(0,o.B_)(e,{type:"styleId",value:t,scene:this}),this.generateVariableLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableId",value:t,scene:this}),this.generateVariableCollectionLinkItem=(e,t)=>(0,o.B_)(e,{type:"variableCollectionId",value:t,scene:this}),this.generateNodeFieldItemValue=(e,t,r)=>{if((0,a.M_)(t,e))return{type:"blobIndex",value:t,scene:this};if((0,a.Lm)(t))return{type:"boolean",value:t};if((0,a.kf)(t))return{type:"numeric",value:t};if((0,a.Kg)(t))return("position"===e||"sortPosition"===e)&&(0,s.qO)(t)?{type:"position",value:t}:(0,a.SE)(t,e)?{type:"userInputtedText",value:t}:{type:"nonUserText",value:t};if((0,a._o)(t))return{type:"color",value:t};if((0,a.WX)(t))return{type:"vector",value:t};if((0,a.ar)(e)){let e=i.PK.fromKiwi(t);if(e)return{type:"styleId",value:e,scene:this}}if((0,a.r4)(e)){let e=i.gr.fromKiwi(t);if(e)return{type:"variableCollectionId",value:e,scene:this}}if((0,a.Ox)(e)){let e=i.sD.fromKiwi(t);if(e)return{type:"variableId",value:e,scene:this}}if((0,a.rP)(e)){let e=i._H.fromKiwi(t);if(e)return{type:"codeComponentId",value:e,scene:this}}if((0,a.wA)(e)){let e=i.Tq.fromKiwi(t);if(e)return{type:"codeFileId",value:e,scene:this}}if((0,a.FE)(e)){let e=i.eJ.fromKiwi(t);if(e)return{type:"codeLibraryId",value:e,scene:this}}if((0,a.W_)(t))return(0,a.aP)(e,r)?{type:"nodeGuid",value:l.c1.fromKiwi(t),scene:this}:{type:"genericGuid",value:l.c1.fromKiwi(t)};if("__nodeLinkBrand__"in t)return{type:"nodeGuid",value:t.guid,scene:this};if((0,a.hV)(t)){let{guids:e}=t;return e?{type:"guidPath",value:e.map(l.c1.fromKiwi).filter(n.Vq)}:{type:"error",value:"Invalid Fig.GUIDPath"}}if((0,a.OA)(t))return{type:"matrix",value:t};let o=(0,a.yp)(t);return o?{type:"matrix",value:o}:(0,a.qx)(t,e)?{type:"imageHash",value:t}:(0,a.aY)(t)?{type:"bytes",value:t}:(0,a.Rt)(t)?{type:"editScope",value:t}:null},this.generateNodeFieldItem=(e,t,r)=>{if(null==t)return null;let n=this.generateNodeFieldItemValue(e,t,r);if(null!=n)return(0,o.B_)(e,n);if(Array.isArray(t))return(0,o.$7)({label:e,list:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:!1});{let r=["connectorStart","connectorEnd","symbolData"].includes(e);return(0,o.o8)({label:e,object:t,generateChild:(e,t)=>this.generateNodeFieldItem(e,t),expandByDefault:r})}}}generateNodeChangeItems(e){return(0,o.QB)(Object.entries(e).map(([e,t])=>this.generateNodeFieldItem(e,t)))}}},942318:(e,t,r)=>{r.d(t,{$:()=>i});var n=r(962471);class i extends n.R{get rootObjects(){return this.scene.rootNodes}getObject(e){return this.scene.getNodeById(e)}}},430540:(e,t,r)=>{r.d(t,{m:()=>a});var n=r(972142),i=r(689346),s=r(950233);class a{constructor(e,t){for(let[r,n]of(this.scene=e,this.ownFailuresById=new i.d,this.childrenWithFailuresById=new i.d,this.badgesById=new Map,this.propertiesById=new Map,t.entries())){let t=e.getNodeByGuid(r);t&&this.processEntry(t,n)}}generateBadges(e){let t=this.badgesById.get(e);if(t)return t;let r=[],i=this.ownFailuresById.get(e);if(i&&i.size>0){let e=i.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} for this node: ${Array.from(i).join(", ")}`;r.push({type:"error",value:`${e}!`,title:t})}let s=this.childrenWithFailuresById.get(e);if(s&&s.size>0){let e=s.size,t=`${(0,n.td)(e,"SceneGraph validation failure")} in this node's descendants.`;r.push({type:"warning",value:`${e}!`,title:t})}return this.badgesById.set(e,r),r}generateProperty(e){return this.propertiesById.get(e)||(this.scene.getNodeById(e)?{label:"SceneGraph validation info",children:[(0,s.$7)({label:"Validation failures",list:Array.from(this.ownFailuresById.get(e)??[]),generateChild:(e,t)=>({key:t,label:"",value:{type:"error",value:t},children:[]})}),(0,s.$7)({label:"Children with validation failures",list:Array.from(this.childrenWithFailuresById.get(e)??[]),generateChild:this.scene.generateNodeLinkItem})]}:null)}processEntry(e,t){for(let r of t)this.ownFailuresById.add(e.id,r);for(let t=e.parent;t;t=t.parent)this.childrenWithFailuresById.add(t.id,e.guid)}}},288803:(e,t,r)=>{r.d(t,{G2:()=>S});var n=r(846288),i=r(236891),s=r(805014),a=r(245954),l=r(814791),o=r(841962),c=r(972142),u=r(407498),d=r(73424),h=r(198136),m=r(237442),g=r(720759),p=r(326089),f=r(950233),y=r(86623),E=r(942318),I=r(430540),b=r(10111);class S extends E.${constructor({name:e,sensitiveTextPolicy:t,type:r,pagesList:n,migrationVersion:i}){super({name:e,sensitiveTextPolicy:t}),this.type=r,this.pagesList=n,this.migrationVersion=i,this.scene=new C(this)}getSearch(){return this.scene.getSearch()}get metadata(){return{"Migration version":this.migrationVersion?.toString()}}setSceneGraphValidationInfo(e){this.sceneGraphValidationInfo=new I.m(this.scene,e)}setNodeWarnings(e){this.nodeWarnings=e}getAdditionalProperties(e){let t=[],r=this.sceneGraphValidationInfo?.generateProperty(e);if(r&&t.push(r),this.pagesList){let r=this.scene.getNodeById(e),n=r?.isPage?r:r?.containingPage;t.push({label:"Dynamic page loading info",children:(0,f.QB)([r&&n&&r!==n&&this.scene.generateNodeLinkItem("Containing page",n.guid),n&&(0,f.B_)("Page status",(()=>{switch((0,d.Fy)(this.pagesList,n.guid)){case s.xal.REQUESTED:return{type:"error",value:"Page loading in progress"};case s.xal.NOT_LOADED:return{type:"error",value:"Page not loaded due to incremental loading"};default:return{type:"nonUserText",value:"Page loaded"}}})())])})}let n=this.nodeWarnings?.get(e);return(n?.length??0)>0&&t.push((0,f.$7)({label:"Runtime warnings",list:n??[],generateChild:(e,t)=>({label:e,value:{type:"error",value:t.message},children:(0,f.QB)([(0,f.B_)("Severity",{type:"nonUserText",value:t.severity}),(0,f.B_)("Message",{type:"nonUserText",value:t.message}),void 0!==t.timestamp&&(0,f.B_)("Time",{type:"timestamp",value:t.timestamp}),t.filePath&&(0,f.B_)("File path",{type:"nonUserText",value:`${t.filePath}${t.lineNumber?`:${t.lineNumber}`:""}`}),t.data&&(0,f.o8)({label:"Data",object:t.data,generateChild:(e,t)=>(0,f.B_)(e,{type:"nonUserText",value:String(t)})})])})})),t}getAdditionalBadges(e){let t=[],r=this.sceneGraphValidationInfo?.generateBadges(e);r&&t.push(...r);let n=this.scene.getNodeById(e);if(n?.isPage&&this.pagesList)switch((0,d.Fy)(this.pagesList,n.guid)){case s.xal.LOADED:break;case s.xal.REQUESTED:t.push({type:"warning",value:"LOADING",title:"Page loading in progress"});break;case s.xal.NOT_LOADED:t.push({type:"warning",value:"NOT LOADED",title:"Page not loaded due to incremental loading"})}let i=this.nodeWarnings?.get(e),a=i?.length??0;return a>0&&t.push({type:"warning",value:`${a} WARNINGS`}),t}}class C extends y.X{constructor(e){super(),this.resource=e,this.nodesById=new Map,this.stylesById=new Map,this.variablesById=new Map,this.variableCollectionsById=new Map,this.codeFilesById=new Map,this.codeComponentsById=new Map,this.codeLibrariesById=new Map,this.searchDB=new b.H,this.isComplete=!0,this.totalMemoryUsage=this.rootNodes.reduce((e,t)=>e+t.treeMemoryUsage,0)}get document(){return this.rootNodes.find(e=>e.isDocument)}get pages(){return this.document.children}get internalCanvas(){return this.pages.find(e=>e.nodeChange.internalOnly)??null}get rootNodes(){return this.fetchNodesFromFullscreen(()=>s.Hcu.getRootNodes())}getNodeById(e){return this.getNodeFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getNode(D(e)))}getNodeByGuid(e){return this.fetchNodeFromFullscreen(()=>s.Hcu.getNodeByGuid(e))}getChildrenByParentGuid(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getChildrenByParentGuid(e))}getStyleByStyleId(e){return this.getStyleFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getStyle(e))}getVariableByVariableId(e){return this.getVariableFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getVariable(e))}getVariableCollectionByCollectionId(e){return this.getVariableCollectionFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getVariableCollection(e))}getCodeComponentById(e){return this.getCodeComponentFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getCodeComponent(e))}getCodeFileById(e){return this.getCodeFileFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getCodeFile(e))}getCodeLibraryById(e){return this.getCodeLibraryFromCache(e)||this.fetchNodeFromFullscreen(()=>s.Hcu.getCodeLibrary(e))}getStyleConsumers(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getStyleConsumers(e))}getConsumedStyles(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getConsumedStyles(D(e)))}getConsumedVariables(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getConsumedVariables(D(e)))}getVariablesInCollection(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getVariablesInCollection(e))}getNodesWithExplicitModeForVariableSet(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getNodesWithExplicitModeForVariableSet(e))}getVariableConsumers(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getVariableConsumers(e))}getDsaComponentCounts(e){let t=s.Hcu.getDsaComponentCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}getDsaStyleCounts(e){let t=s.Hcu.getDsaStyleCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}getDsaVariableCounts(e){let t=s.Hcu.getDsaVariableCounts(D(e));return{all:this.convertDsaAssetCounts(t.all),unnested:this.convertDsaAssetCounts(t.unnested)}}convertDsaAssetCounts(e){let t=[];for(let r of e){let e=this.createAndCacheNode(r.asset);e&&t.push({node:e,count:r.count})}return t.sort((e,t)=>t.count-e.count),t}getDirectVariableDependenciesToVariable(e){return this.fetchNodesFromFullscreen(()=>s.Hcu.getDirectVariableDependenciesToVariable(e))}getPropDefs(e){return s.Hcu.getPropDefs(D(e))}getCombinedPropAssignments(e){return s.Hcu.getCombinedPropAssignments(D(e))}getTransitiveDependencyPaths(e,t){return s.Hcu.getTransitiveDependencyPaths(D(e),t)}getAllOverridesForLayer(e){return s.Hcu.getLayerOverrides(D(e)).map(e=>({...e,fields:l.w.decodeMessage(e.fields).nodeChanges[0]}))}getDSDOverridesForLayer(e){let t=s.Hcu?.getLayerDSDOverrides(D(e));if(t)return l.w.decodeMessage(t).nodeChanges?.[0]}getAllSublayerInfoForImmutableFrame(e){return s.Hcu.getImmutableFrameSubLayerInfo(D(e))}getOverrideStash(e){return s.Hcu.getOverrideStash(D(e)).map(e=>({...e,overrides:e.overrides.map(e=>({...e,fields:l.w.decodeMessage(e.fields).nodeChanges[0]}))}))}getTextInsertionStyle(e){let t;let r=s.Hcu.getTextInsertionStyle(D(e));if(0===r.length)return null;try{t=l.w.decodeMessage(r).nodeChanges}catch(e){return console.warn("FigmaScope: error decoding node changes",e),null}return t?t.length>1?(console.warn("FigmaScope: more than one node change found for text insertion style"),null):t[0]:(console.warn("FigmaScope: buffer did not contain node changes"),null)}getBlobByIndex(e){return g.y}getNodeByKiwiOverridePath(e,t){let r=[e,...p.dB.fromKiwi(t)];return this.getNodeById(T(r))}get supportsNodePreviews(){switch(this.resource.type){case"editor":return!0;case"viewer":return!1;case"standalone":return"hide"!==this.resource.sensitiveTextPolicy}}getNodeFromCache(e){return this.nodesById.get(e)??null}getStyleFromCache(e){return this.stylesById.get(e)??null}getVariableFromCache(e){return this.variablesById.get(e)??null}getVariableCollectionFromCache(e){return this.variableCollectionsById.get(e)??null}getCodeComponentFromCache(e){return this.codeComponentsById.get(e)??null}getCodeFileFromCache(e){return this.codeFilesById.get(e)??null}getCodeLibraryFromCache(e){return this.codeLibrariesById.get(e)??null}fetchNodeFromFullscreen(e){let t=null;try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t?this.createAndCacheNode(t):null}fetchNodesFromFullscreen(e){let t=[];try{t=e()}catch(e){console.error("FigmaScope: error fetching nodes")}return t.map(e=>this.createAndCacheNode(e)).filter(i.Vq)}createAndCacheNode(e){let t;try{t=l.w.decodeNodeChange(e.nodeChange)}catch(e){return console.error("FigmaScope: error decoding node changes",e),null}let r=p.dB.fromStrings(e.stablePath),n=T(r),i=this.nodesById.get(n);if(i)return i;let s=new v(n,{...e,nodeChange:t,stablePath:r},this);return this.nodesById.set(s.id,s),s.styleId&&this.stylesById.set(s.styleId,s),s.isVariable&&s.variableId&&this.variablesById.set(s.variableId,s),s.isVariableCollection&&s.variableCollectionId&&this.variableCollectionsById.set(s.variableCollectionId,s),s.isCodeFileAsset&&s.codeFileId&&this.codeFilesById.set(s.codeFileId,s),s.isCodeLibraryAsset&&s.codeLibraryId&&this.codeLibrariesById.set(s.codeLibraryId,s),s.isCodeComponentAsset&&s.codeComponentId&&this.codeComponentsById.set(s.codeComponentId,s),"standalone"===this.resource.type&&s.isPrimaryInstance&&a.UN().get(s.guid)?.materializeDescendants(),s}getSearch(e){if(this._indexedSearchDB)return this._indexedSearchDB;let t=0,r=this.rootNodes,n=async()=>{await scheduler.postTask(async()=>{let i=Date.now();for(;Date.now()-i<100;){let n=r.pop();if(!n)return;e&&++t%5e3==0&&e(t),this.searchDB.indexObject(n),r.push(...n.children.filter(e=>e.guid))}await n()})},i=n().then(()=>this.searchDB);return this._indexedSearchDB=i}}class v extends m.E{constructor(e,t,r){super(e,t.nodeChange,r),this.id=e,this.data=t,this.scene=r}get type(){return this.isNestedInstance?"NESTED_INSTANCE":super.type}get parent(){return this.parentGuid?this.scene.getNodeByGuid(this.parentGuid):null}get children(){return this.scene.getChildrenByParentGuid(this.guid)}get consumedStyleIds(){return this.scene.getConsumedStyles(this.id).map(e=>e.styleId).filter(i.Vq)}get consumedStyles(){return this.scene.getConsumedStyles(this.id)}get consumedVariableIds(){return this.consumedVariables.map(e=>e.variableId).filter(i.Vq)}get consumedVariables(){return this.scene.getConsumedVariables(this.id)}get key(){return super.key??s.Egt?.getAssetKeyForPublish(this.guid)??null}get stablePath(){return this.data.stablePath}get isTracked(){return 1===this.stablePath.length}get isUntracked(){return this.stablePath.length>1}get containingTrackedNode(){return this.isTracked?this:this.parent?.containingTrackedNode??null}get isPrimaryInstance(){return this.isInstance&&this.isTracked}get containingInstance(){return this.findAncestor(e=>e.isInstance)}get containingPrimaryInstance(){return this.findAncestor(e=>e.isPrimaryInstance)}get containingImmutableFrame(){return this.findAncestor(e=>e.isImmutableFrame)}get isInstanceSublayer(){return null!=this.containingInstance}get isImmutableFrameSublayer(){return null!=this.containingImmutableFrame}get isNestedInstance(){return this.isInstance&&this.isInstanceSublayer}get isSwappedNestedInstance(){return this.isNestedInstance&&null!=this.nodeChange.overriddenSymbolID}get ownMemoryUsage(){return this._ownMemoryUsage=this._ownMemoryUsage??s.Hcu.getNodeMemoryUsage(this.stablePath)}get treeMemoryUsage(){return this._treeMemoryUsage=this._treeMemoryUsage??s.Hcu.getSubtreeMemoryUsage(this.stablePath)}generateDisplayProperties(){let e=super.generateDisplayProperties(),t=e.leftBadges.map(e=>"type"===e.type?{...e,tracked:this.isTracked}:e);return{...e,leftBadges:t,secondaryId:this.stablePath.length>1?p.dB.format(this.stablePath.slice(1)):this.overrideKey?p.c1.format(this.overrideKey):null,memoryFraction:(0,u.KV)(this.treeMemoryUsage,this.scene.totalMemoryUsage)}}generateRawProperties(){return[{label:"Tracked fields",children:super.generateRawProperties(),expandByDefault:!0},{label:"Untracked fields",children:this.generateNonKiwiFieldProperties(this.data.untrackedFields),expandByDefault:!0},{label:"Derived properties",children:this.generateNonKiwiFieldProperties(this.data.derivedProperties),expandByDefault:!0}]}generateTrackingInfoItem(){return(0,f.B_)("Node tracked",{type:"boolean",value:this.isTracked,sensitive:!1})}generateNonKiwiFieldProperties({jsonSerialized:e,stringSerialized:t}){let r=[];for(let[t,n]of Object.entries(e))null!=n&&r.push(this.scene.generateNodeFieldItem((0,c.zS)(t),n));for(let[e,n]of Object.entries(t))r.push({label:(0,c.zS)(e),value:{type:"error",value:"No toJson() support"},children:[(0,f.B_)("Debug string",{type:"nonUserText",value:n,sensitive:!1})]});return r.filter(i.Vq)}generateComputedProperties(){let e=(0,f.QB)([...super.generateComputedProperties(),this.generateMemoryUsageItem(),this.generateTextInfoItem()]),t=this.generateNodePreviewItem();return t&&e.push(t),e}generateMemoryUsageItem(){return{label:"Memory usage",children:[(0,f.B_)("Own data",{type:"numeric",value:this.ownMemoryUsage}),(0,f.B_)("Tree data",{type:"numeric",value:this.treeMemoryUsage})],expandByDefault:!0}}generateDesignSystemsInfoItem(){return(0,f.Sv)(super.generateDesignSystemsInfoItem(),[this.generateComponentPropDefsItem(),this.generateComponentPropAssignmentsItem(),this.generateSymbolDependencyPathsItem(s.Uze.FROM),this.generateSymbolDependencyPathsItem(s.Uze.TO),this.generateLayerOverridesSection(),this.generateLayerDSDOverridesSection(),this.generateDsaSection()])}generateTextInfoItem(){if("TEXT"!==this.type)return null;let e=this.scene.getTextInsertionStyle(this.id);return{label:"Text info",children:(0,f.QB)([e&&(0,f.o8)({label:"Text insertion style",object:e,generateChild:this.scene.generateNodeFieldItem,showChildCount:!0})])}}generateNodePreviewItem(){return this.scene.supportsNodePreviews&&this.isRenderingNode&&!this.isStateGroup?{label:"Node preview",children:[(0,f.B_)("",{type:"nodeThumbnail",value:this.guidObj})]}:null}generateOverrideItem(e,t){let r=this.scene.getNodeByKiwiOverridePath(e.guid,t.guidPath??{});return{...super.generateOverrideItem(e,t),value:r?{type:"nodeGuid",value:r.guid,scene:this.scene}:void 0}}generateComponentPropDefsItem(){if(!this.isSymbol&&!this.isStateGroup)return null;let e=this.scene.getPropDefs(this.id),t=this.isState?this.parentGuid:null;return{label:"Component prop defs",children:e.map(e=>({label:p.c1.format(e.defID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,f.B_)("Is explicit",{type:"boolean",value:e.isExplicit}),(0,f.B_)("Default value",this.generateComponentPropValue(e.propType,e.defaultValue)),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropAssignmentsItem(){if(!this.isInstance)return null;let e=this.scene.getCombinedPropAssignments(this.id),t=this.backingStateGroup?.guid??null;return{label:"Component prop assignments (combined)",children:e.map(e=>({label:p.c1.format(e.assignmentID),value:{type:"userInputtedText",value:e.name,scene:this.scene},children:[(0,f.B_)("Value",this.generateComponentPropValue(e.propType,e.assignmentValue)),(0,f.B_)("Is mixed",{type:"boolean",value:e.isMixed}),...this.generateComponentPropProperties(e,t)]}))}}generateComponentPropProperties(e,t){let{error:r,propType:n,explicitDefID:i,refNodes:s}=e;return(0,f.QB)([!!r&&(0,f.B_)("Error",{type:"error",value:r}),!!n&&(0,f.B_)("Prop type",{type:"nonUserText",value:(0,h.xb)(n)}),!!i&&(0,f.B_)("Explicit def ID",{type:"genericGuid",value:p.c1.fromString(i)}),t&&this.scene.generateNodeLinkItem("Containing state group",t),(0,f.$7)({label:"Ref Nodes",list:s,generateChild:(e,t)=>this.generateRefNodeItem(e,t)})])}generateComponentPropValue(e,t){switch(e){case s.J0O.BOOL:return{type:"boolean",value:t.boolValue};case s.J0O.TEXT:return{type:"userInputtedText",value:t.textValue};case s.J0O.INSTANCE_SWAP:return{type:"nodeGuid",value:p.c1.fromString(t.instanceSwapValue),scene:this.scene};default:return t.untypedValue?{type:"nonUserText",value:t.untypedValue}:{type:"error",value:"Unknown prop type"}}}generateRefNodeItem(e,t){return{label:e,children:[this.scene.generateNodeLinkItem("Ref node",p.c1.fromString(t.refNodeGuid)),(0,f.B_)("Ref field",{type:"nonUserText",value:t.nodeField})],expandByDefault:!0}}generateSymbolDependencyPathsItem(e){return this.isPrimaryInstance||this.isSymbol?(0,f.$7)({label:e===s.Uze.FROM?"Symbol Dependencies":"Symbol Dependents",list:this.scene.getTransitiveDependencyPaths(this.id,e),generateChild:(t,{edges:r})=>({label:t,value:{type:"nodeGuid",value:p.c1.fromString(e===s.Uze.FROM?r[r.length-1].toGuid:r[0].fromGuid),scene:this.scene},children:1===r.length?this.generateSymbolDependencyProperties(r[0],!1):[(0,f.B_)("Type",{type:"nonUserText",value:"Transitive"}),(0,f.$7)({label:"Edges",list:r,generateChild:(e,t)=>({label:e,children:this.generateSymbolDependencyProperties(t,!0),expandByDefault:!0}),expandByDefault:!0})]})}):this.isStateGroup?(0,f.$7)({label:e===s.Uze.FROM?"Symbol dependencies by state":"Symbol dependents by state",list:this.children,generateChild:(t,r)=>({...r.generateSymbolDependencyPathsItem(e),label:`State ${t}`,value:{type:"nodeGuid",value:r.guid,scene:this.scene}})}):null}generateSymbolDependencyProperties({fromGuid:e,toGuid:t,type:r,pathToOverride:i,propDefId:a},l){let o=[(0,f.B_)("Type",{type:"nonUserText",value:(()=>{switch(r){case s.SoG.PRIMARY_INSTANCE_BACKED_BY_SYMBOL:return"Primary instance backed by symbol";case s.SoG.PRIMARY_INSTANCE_WITH_NESTED_SWAP_TO_SYMBOL:return"Primary instance with nested swap to symbol";case s.SoG.PRIMARY_INSTANCE_WITH_TOP_LEVEL_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with top level prop assignment to symbol";case s.SoG.PRIMARY_INSTANCE_WITH_NESTED_PROP_ASSIGNMENT_TO_SYMBOL:return"Primary instance with nested prop assignment to symbol";case s.SoG.PRODUCT_COMPONENT_WITH_PROP_DEF_TO_SYMBOL:return"Product component with prop def to symbol";case s.SoG.STATE_WITH_PROP_DEF_TO_SYMBOL:return"State with prop def to symbol";case s.SoG.SYMBOL_CONTAINING_PRIMARY_INSTANCE:return"Symbol containing primary instance";case s.SoG.INVALID:return"Invalid";default:(0,n.xb)(r)}})()})];return l&&(o.push(this.scene.generateNodeLinkItem("From",p.c1.fromString(e))),o.push(this.scene.generateNodeLinkItem("To",p.c1.fromString(t)))),i.length>1&&o.push((0,f.B_)("Path to override",{type:"guidPath",value:p.dB.fromStrings(i)})),a&&p.c1.isValid(a)&&o.push((0,f.B_)("Prop def id",{type:"genericGuid",value:p.c1.fromString(a)})),o}generateLayerOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getAllOverridesForLayer(this.id),t={};for(let{primaryInstanceId:r,containingSymbolId:n,fields:i,savedLevel:s,inheritanceLevel:a}of e)for(let[e,l]of Object.entries(i))t[e]=t[e]||[],t[e][a]={primaryInstanceId:r,containingSymbolId:n,value:l,savedLevel:s};let r=Object.keys(t).sort();return 0===r.length?null:(0,f.$7)({label:"Layer overrides",list:r,expandByDefault:!1,generateChild:(e,r)=>{let n=t[r],s=n.findIndex(i.Vq),a=n[s].value;return{label:r,value:{type:"metadata",value:0===s?"Direct override":"Inherited override"},expandByDefault:!1,children:[{...this.scene.generateNodeFieldItem(r,a),label:"Resolved value"},{label:"Sources",expandByDefault:!1,children:(0,f.QB)(n.map(({primaryInstanceId:e,containingSymbolId:t,value:n,savedLevel:i},s)=>({label:0===s?"Direct override":"Inherited from",key:`Level ${s}`,value:t?{type:"nodeGuid",value:p.c1.fromString(t),scene:this.scene}:void 0,children:(0,f.QB)([{...this.scene.generateNodeFieldItem(r,n),label:"Value"},i>0&&(0,f.B_)("Saved level",{type:"numeric",value:i}),this.scene.generateNodeLinkItem("Primary instance",p.c1.fromString(e))])})))}]}}})}generateLayerDSDOverridesSection(){if(!this.isInstance&&!this.isInstanceSublayer)return null;let e=this.scene.getDSDOverridesForLayer(this.id);if(!e)return null;let t={};for(let[r,n]of Object.entries(e))t[r]=n;return(0,f.$7)({label:"Layer DSD overrides",list:Object.keys(t),expandByDefault:!1,generateChild:(e,r)=>this.scene.generateNodeFieldItem(r,t[r])})}generateDsaSection(){if(!(0,o.kc)().dsa_figmascope)return null;let e=this.scene.getDsaComponentCounts(this.id),t=this.scene.getDsaStyleCounts(this.id),r=this.scene.getDsaVariableCounts(this.id);return{label:"Design system analyltics",children:[{label:"Components",children:[{label:"All",children:this.generateDsaComponentCounts(e.all)},{label:"Unnested",children:this.generateDsaComponentCounts(e.unnested)}]},{label:"Styles",children:[{label:"All",children:this.generateDsaStyleCounts(t.all)},{label:"Unnested",children:this.generateDsaStyleCounts(t.unnested)}]},{label:"Variables",children:[{label:"All",children:this.generateDsaVariableCounts(r.all)},{label:"Unnested",children:this.generateDsaVariableCounts(r.unnested)}]}]}}generateDsaComponentCounts(e){return e.filter(({node:e})=>!!e.guid).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateNodeLinkItem("node",e.guid),(0,f.B_)("count",{type:"numeric",value:t})]}))}generateDsaStyleCounts(e){return e.filter(({node:e})=>!!e.styleId).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateStyleLinkItem("style",e.styleId),(0,f.B_)("count",{type:"numeric",value:t})]}))}generateDsaVariableCounts(e){return e.filter(({node:e})=>!!e.variableId).map(({node:e,count:t})=>({label:e.name,key:e.id,value:{type:"metadata",value:t},children:[this.scene.generateVariableLinkItem("var",e.variableId),(0,f.B_)("count",{type:"numeric",value:t})]}))}}function T(e){return p.SW.fromString(e.join(";"))}function D(e){return p.dB.fromStrings(e.split(";"))}},10111:(e,t,r)=>{r.d(t,{U:()=>m,H:()=>h});var n=r(677469),i=r.n(n),s=r(277154),a=r(812272);let l={id:["nodeId"],guid:[],parentGuid:["parent","parentId"],type:["nodeType"],field:["property"],phase:[],overrideKey:["okey"],backingSymbolId:["symbol","symbolId"],consumedStyleIds:["consumedStyleId","consumedStyle","consumedStyles"],name:[],text:[],key:[],version:["assetVersion","sharedSymbolVersion"],publishId:[],imageHashes:[],symbolId:["symbol"],stateGroupId:["stateGroup"],styleId:["style"],variableId:["variable"],variableCollectionId:["variableSetId","collectionId","variableCollection","variableSet"],codeComponentId:["codeComponent"],codeFileId:["codeFile","exportedFromCodeFileId"],codeLibraryId:["codeLibrary","belongsToCodeLibraryId"],editScopeLabel:["editScope"],startSequenceNumber:["start","startSequence"],endSequenceNumber:["end","endSequence"],userId:["user"],createdAt:["created","date","time"]};var o=r(689346);class c{constructor(){this.children=new Map,this.value=[]}}class u{constructor(){this.root=new c}insert(e,t){let r=this.root;for(let t=0;t<e.length;t++){let n=e.charAt(t),i=r.children.get(n);i||r.children.set(n,i=new c),r=i}r.value.push(t)}prefixFind(e){let t=[];for(let r of this.keysWithPrefix(e)){let e=this.find(r);if(e)for(let r of e)t.push(r)}return t}find(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t.value}keysWithPrefix(e){let t=[],r=this.findNode(e);return this.collect(r,function(e){let t=[];for(let r=0;r<e.length;r++){let n=e.charAt(r);t.push(n)}return t}(e),t),t}collect(e,t,r){if(e)for(let n of(e.value.length>0&&r.push(t.join("")),Array.from(e.children.keys())))t.push(n),this.collect(e.children.get(n),t,r),t.pop()}findNode(e){let t=this.root;for(let r=0;r<e.length;r++){let n=e.charAt(r),i=t.children.get(n);if(!i)return;t=i}return t}}class d{constructor({property:e,aliases:t=[]}){this.trie=new u,this.exactMatches=new o._,this.property=e,this.aliases=t}search({value:e,isExact:t}){let r=this.exactMatches.get(e);if(t)return r;let n=this.trie.prefixFind(e.toLowerCase()).filter(e=>!r.some(t=>t.object===e.object));return[...r,...n]}indexObject(e){let t=e.searchProperties[this.property];if(t){if(Array.isArray(t))for(let r of t)this.indexValue(r,e);else this.indexValue(t,e)}}indexValue(e,t){this.exactMatches.add(e,{value:e,object:t,property:this.property,isExact:!0}),this.trie.insert(e.toLowerCase(),{value:e,object:t,property:this.property,isExact:!1})}}class h{constructor(){this.indices=Object.entries(l).map(([e,t])=>new d({property:e,aliases:t}))}indexObject(e){for(let t of this.indices)t.indexObject(e)}indexObjects(e){for(let t of this.indices)for(let r of e)t.indexObject(r)}searchWithText(e){return this.search(function(e){let t,r=[];e=e.trim();let n=/([a-zA-Z0-9_.]+=)?("[^"]*"|'[^']*'|[^\s]+)/g;for(;t=n.exec(e);){var i;let e=t[1]?.slice(0,-1)||void 0,{value:n,isExact:s}=(i=t[2]).startsWith("'")&&i.endsWith("'")||i.startsWith('"')&&i.endsWith('"')?{value:i.slice(1,-1),isExact:!0}:{value:i,isExact:!1};r.push({property:e,value:n,isExact:s})}return r.length>1&&(r=function(e){let t=[],r=e[0],n=e[1],i=2;for(;;)if(n)r.property||n.property||r.isExact||n.isExact?(t.push(r),r=n):r={property:void 0,value:`${r.value} ${n.value}`,isExact:!1},n=e[i++];else{t.push(r);break}return t}(r)),r}(e))}searchWithProperties(e){return this.search(function(e){let t=[];for(let[r,n]of Object.entries(e))if(n){if(Array.isArray(n))for(let e of n)t.push({property:r,value:e,isExact:!0});else t.push({property:r,value:n,isExact:!0})}return t}(e))}search(e){let t;for(let r of(s.az.trackDefinedEvent("figmascope.search",{used_operators:e.length>1||e[0]?.property!=null}),e)){let e=new Map;for(let t of this.getIndicesToSearchForToken(r))for(let n of t.search(r)){let{object:t,...r}=n;e.has(t)?e.get(t).matches.push(r):e.set(t,{object:t,matches:[r]})}t=t?(0,a.wD)(t,e,(e,t,r)=>({object:e,matches:t.matches.concat(r.matches)})):e}return t?i()(Array.from(t.values())).sort(g):[]}getIndicesToSearchForToken({property:e}){return null==e?this.indices.filter(e=>"parentGuid"!==e.property):(e=e.toLowerCase(),this.indices.filter(t=>{if(t.property.toLowerCase()===e)return!0;for(let r of t.aliases)if(r.toLowerCase()===e)return!0;return!1}))}}class m{constructor(e){this.dbs=e}searchWithText(e){return i()(this.dbs.map(t=>t.searchWithText(e))).sort(g)}searchWithProperties(e){return i()(this.dbs.map(t=>t.searchWithProperties(e))).sort(g)}}function g(e,t){let r=e.matches.filter(e=>e.isExact).length;return t.matches.filter(e=>e.isExact).length-r||t.matches.length-e.matches.length}},464326:(e,t,r)=>{r.d(t,{Cc:()=>o,lX:()=>c,lu:()=>a});var n=r(493685),i=r(875877),s=r(863297);let a=(0,i.atom)((0,n.Ok)()),l=(0,i.atom)(e=>{let t=e(a);if(t.status!==s.r.SUCCESS)throw Error("FigmaScope internal code is running but no FigmaScope resources are set. This is a bug - please report in #figmascope.");return t.value}),o=(0,i.selectAtom)(l,e=>e.primaryResource),c=(0,i.selectAtom)(l,e=>e.diffResource)},959065:(e,t,r)=>{r.d(t,{e:()=>n});let n="https://go/figmascope-docs"},922308:(e,t,r)=>{r.d(t,{rf:()=>a,tV:()=>l,zG:()=>s});var n=r(411855),i=r(910164);function s(){return n.createElement(l,null,n.createElement("p",null,"Reading file..."))}function a({error:e}){let t="Oops! Something went wrong";return"string"==typeof e?t=e:e instanceof Error&&(t=e.message,console.error(e)),n.createElement(l,null,n.createElement("p",{style:i.sx.colorTextOndanger.colorBgDanger.p16.font20.maxW400.$},t))}function l({children:e}){return n.createElement("div",{style:i.sx.fillPositionedContainer.flex.itemsCenter.justifyCenter.flexColumn.lh1_5Lines.font16.$},e)}},266809:(e,t,r)=>{r.d(t,{J:()=>ne});var n=r(411855),i=r(779312),s=r(277154),a=r(524696),l=r(875877),o=r(666308),c=r(863297),u=r(910164),d=r(841563),h=r.n(d),m=r(464326),g=r(188507),p=r(32050),f=r(47795),y=r(366172),E=r(926996),I=r(326089),b=r(105809),S=r(288803),C=(e=>(e.Position="Position",e.Name="Name",e.Memory="Memory",e.NodeId="Node ID",e))(C||{}),v=(e=>(e.Search="Search",e.Filter="Filter",e))(v||{});let T=(0,l.atomWithLocalStorage)("figmascope-settings",{});function D(e,t){return(0,l.atom)(r=>r(T)[e]??t,(t,r,n)=>r(T,t=>({...t,[e]:n})))}let{valueAtom:N,undoAtom:A,redoAtom:P,historyAtom:x}=(0,l.atomsWithHistory)(I.SW.fromString("0:0")),O=(0,l.atom)(e=>{let t=e(m.Cc),r=e(N);return t.getObject(r)}),_=D("followSelection",!1);function B({children:e,appSelection:t,setAppSelection:r}){let i=(0,l.useAtomValue)(m.Cc);return r&&i instanceof S.G2?n.createElement(w,{resource:i,appSelection:t,setAppSelection:r},e):n.createElement(n.Fragment,null,e,n.createElement(L,null))}function L(){let e=(0,g.wA)(),t=(0,E._6)(),[r,i]=(0,l.useAtom)(N),s=n.useRef(!0);return n.useEffect(()=>{(0,b.E)(t)&&(s.current?(s.current=!1,t.selection&&i(I.SW.fromString(t.selection))):r!==t.selection&&e(f.$T({...t,selection:r})))},[t,r,i,e]),null}let F=n.createContext({selectInApp:void 0,canSelectInApp:void 0});function w({resource:e,appSelection:t,setAppSelection:r,children:i}){let s=e.scene,a=(0,l.useAtomValue)(_),[o,c]=(0,l.useAtom)(N),u=n.useCallback(e=>{let t=s.getNodeByGuid(I.c1.fromString(e));t&&c(t.id)},[c,s]);n.useEffect(()=>{y.Y5.setFigmascopeSelectedGuidCallback(u)},[u]);let d=o?s.getNodeById(o):null,h=(0,p.k9)(()=>d?R(d):null,[d]);n.useEffect(()=>{a&&r&&h&&r(h)},[a,r,h]),n.useEffect(()=>{a&&t?.guid&&u(t.guid)},[a,t?.guid,u]);let m=n.useMemo(()=>({canSelectInApp:e=>!!R(e),selectInApp:e=>{let t=R(e);t&&r(t)}}),[r]);return n.createElement(F.Provider,{value:m},i)}function R(e){if(!e.isInternalOnly)return{selectionType:"canvas",guid:e.guid};if(e.isStyle&&e.isLocalAsset){let t=e.nodeChange.styleType;if(t)return{selectionType:"local_style",guid:e.guid,styleType:t}}return null}var V=(e=>(e.None="No Diff",e.Layer="Layer Diff",e.Tree="Tree Diff",e.Full="Full Diff",e))(V||{});function k(e){return"Layer Diff"===e?"layer":"tree"}let M=(0,l.withReducer)((0,l.atom)(null),(e,t,r)=>{let n,i;let a=new Date;if("clear"===t.type)return e&&s.az.trackDefinedEvent("figmascope.diff_end",{type:k(e.type),duration_seconds:(a.getTime()-e.time.getTime())/1e3}),null;if("start"===t.type?(n=t.id,i=t.diffType):"refresh"===t.type&&e&&(n=e.object.id,i=e.type),!n||!i)return null;let l=r(m.Cc).getObject(n)?.freeze();return l?(s.az.trackDefinedEvent("figmascope.diff_start",{type:k(i)}),{type:i,object:l,time:new Date}):null}),$=(0,l.atom)(e=>{let t=e(m.lX);return t?{type:"Full Diff",resource:t}:e(M)??{type:"No Diff"}}),G=(0,l.atom)(e=>{let t=e(N),r=e($);switch(r.type){case"Layer Diff":return r.object;case"Tree Diff":return r.object.findDescendant(e=>e.id===t,{includeSelf:!0})??null;case"Full Diff":for(let e of r.resource.rootObjects){let r=e.findDescendant(e=>e.id===t,{includeSelf:!0});if(r)return r}return null;default:return null}});function H(e,t,r=!1){return!e&&t?"REMOVED":!t&&e?"CREATED":e?.value&&t?.value&&(e.value.type!==t.value.type||!h()(e.value.value,t.value.value))?"MODIFIED":r?"CHILD_MODIFIED":void 0}var U=r(493685),j=r(697737),Y=r(689346),K=(e=>(e[e.Fetched=0]="Fetched",e[e.Fetching=1]="Fetching",e[e.NeverFetched=2]="NeverFetched",e))(K||{});let W=(0,l.atom)(e=>{let t=e(E.OC);return"fullscreen"===t.view?`/api/file/scenegraph_validations/${t.fileKey}`:(0,b.E)(t)&&t.urlParams?.type==="server_file"?`/api/admin/scenegraph_validations/${t.urlParams.key}`:null}),z=(0,l.atom)(e=>null!=e(W)),X=(()=>{let e=(0,l.atom)((0,U.Ok)());return(0,l.atom)(t=>t(e),async(t,r)=>{let n;if(t(e).status===c.r.LOADING)return;let i=t(W);if(i){r(e,(0,U.ux)());try{n=await J(i)}catch(t){r(e,(0,U.uW)(t));return}r(e,(0,U.NY)(n))}})})();async function J(e){let t=await (0,j.GD)(e),r=new Y._;for(let e of t.data.meta.data.results.violations)if("always-fail-for-testing"!==e.name)for(let t of e.instances)r.add(t.guid,t.message);return r}var q=r(922308),Q=r(457473),Z=r(806247),ee=r(834825),et=r(805014),er=r(461816),en=r.n(er),ei=r(265851),es=r(648800);function ea(e,t,r){let n={...e},i=!1;for(let e of t)i=i||n[e]!==r,n[e]=r;return i?n:e}function el(e,t){let r={...e},n=!1;for(let e of t)n=n||e in r,delete r[e];return n?r:e}var eo=(e=>(e[e.No=0]="No",e[e.Yes=1]="Yes",e))(eo||{});function ec(e,t,r,n=1){let i=[t,...r];return e[t]?n?el(e,i):ea(e,i,!1):ea(e,i,!0)}function eu(e){return function(e=1,t=(0,l.atom)({})){return(0,l.atom)(e=>e(t),(r,n,i,s)=>{n(t,ec(r(t),i,s??[],e))})}(0,(0,l.atom)(t=>t(T)[e]??{},(t,r,n)=>r(T,t=>({...t,[e]:n}))))}let ed=eu("middlePanelExpandedProperties"),eh=eu("middlePanelPinnedProperties"),em=eu("rightPanelExpandedProperties"),eg=eu("rightPanelPinnedProperties");function ep(e,t,r){return[...e.getObject(r)?.mapDescendants(e=>e.id)??[],...t?.getObject(r)?.mapDescendants(e=>e.id)??[]]}let ef=(0,l.withReducer)((0,l.atom)({}),(e,t,r)=>{let n=r(m.Cc),i=r(m.lX);switch(t.type){case"toggleExpanded":return ec(e,t.objectId,t.toggleSubtree?ep(n,i,t.objectId):[]);case"expandAncestors":return ea(e,function(e,t,r){return[...e.getObject(r)?.mapAncestors(e=>e.id)??[],...t?.getObject(r)?.mapAncestors(e=>e.id)??[]]}(n,i,t.objectId),!0);case"expandDescendants":return ea(e,[t.objectId,...ep(n,i,t.objectId)],!0);case"collapseDescendants":return el(e,[t.objectId,...ep(n,i,t.objectId)])}});var ey=r(511445),eE=r(236891);let eI=(0,l.atom)({status:"initial"}),eb=(0,l.atom)(0),eS=(0,l.atom)(!1),eC=(0,l.atom)(e=>{if(e(eS)){let t=e(eb);return`Indexing search results (this may take a moment)... [${t}/???]`}return null}),ev=D("searchMode",v.Search),eT=(0,l.atom)(e=>{let t=e(eI),r=e(m.Cc),n=e(x);return"initial"===t.status?n.map(e=>r.getObject(e)).filter(eE.Vq).map(e=>({object:e,matches:[]})).reverse():"results"in t&&t.results.length>0?t.results:null}),eD=(0,l.atom)(e=>{let t=e(eI);if("searching"===t.status&&0===t.results.length){let t=["Searching..."],r=e(eC);return r&&t.push(r),t}if("success"===t.status&&0===t.results.length){let t=["No results found."],r=e(m.Cc);return r instanceof S.G2&&t.push("Some content may be unavailable because of incremental loading"),"hide"===r.sensitiveTextPolicy&&t.push("Searching text fields is limited beacuse text redaction has been applied."),t}return"error"===t.status?["Error searching:",String(t.error)]:null}),eN=(0,l.atom)(e=>{if(e(ev)!==v.Filter)return null;let t=e(eI);return"results"in t?t.results.map(e=>e.object):null}),eA=(0,l.atom)(e=>{if(e(ev)!==v.Filter)return null;let t=e(eD);return t?t.join(" "):null}),eP=D("sortOrder",C.Position),ex=(0,l.atom)(e=>{let t=[C.Position,C.Name,C.NodeId];return e(m.Cc).rootObjects[0]?.displayProperties.memoryFraction!=null&&t.push(C.Memory),t.sort(),t}),eO=(0,l.atom)(e=>{switch(e(eP)){case C.Position:return eB;case C.Name:return e_;case C.Memory:return eF;case C.NodeId:return eL}});function e_(e,t){return e.displayProperties.name.localeCompare(t.displayProperties.name)}function eB(e,t){let[r,n]=ew(e,t);if(r&&n){let e=r.parentIndex?.position,t=n.parentIndex?.position;if(null==e&&null==t)return 0;if(null==t)return 1;if(null==e)return -1;if(e<t)return -1;else if(e>t)return 1}return e_(e,t)}function eL(e,t){let[r,n]=ew(e,t);if(r&&n){let{sessionID:e,localID:t}=r.guid??{localID:-1,sessionID:-1},{sessionID:i,localID:s}=n.guid??{localID:-1,sessionID:-1};return e-i||t-s}return eB(e,t)}function eF(e,t){return(t.displayProperties.memoryFraction??0)-(e.displayProperties.memoryFraction??0)||eB(e,t)}function ew(e,t){return"nodeChange"in e&&"nodeChange"in t?[e.nodeChange,t.nodeChange]:[null,null]}var eR=r(696603),eV=r(40035),ek=r(163703);function eM({badges:e}){return n.createElement(es.Y,{width:"hug-contents"},e.map((e,t)=>n.createElement(e$,{key:t,badge:e})))}function e$({badge:e}){switch(e.type){case"type":return n.createElement(eQ,{type:e.value,tracked:e.tracked});case"phase":return n.createElement(e2,{phase:e.value});case"change":return n.createElement(e0,{type:e.value});case"editType":return n.createElement(e7,{type:e.value});default:return n.createElement(te,{...e})}}let eG=ei.s.px4.minW10.inlineBlock.bRadius4.h16.flex.alignCenter.justifyCenter.fontSemiBold,eH=eG.colorBgSecondary.colorText.$,eU=eG.colorBgBrandSecondary.colorTextOnbrand.$,ej=eG.colorBgBrand.colorTextOnbrand.$,eY=eG.colorBgSuccess.colorTextOnsuccess.$,eK=eG.colorBgWarning.colorTextOnwarning.$,eW=eG.colorBgDanger.colorTextOndanger.$,ez=eG.minW28.w28.colorBg.b1.h14,eX={[ek.SP.Editor]:ez.colorBorderDesign.colorTextDesignSecondary.$,[ek.SP.DesignSystems]:ez.colorBorderComponent.colorTextComponent.$,[ek.SP.FigJam]:ez.colorBorderFigjam.colorBorderFigjam.$,[ek.SP.Page]:ez.colorBorder.colorText.$,[ek.SP.Other]:ez.colorBorderSuccess.colorTextSuccessSecondary.$},eJ={fontSize:9,lineHeight:"16px",fontStyle:"normal"},eq={fontSize:9,lineHeight:"14px",fontStyle:"normal"};function eQ({type:e,tracked:t=!0}){return n.createElement("div",{title:`${e}${t?" (tracked)":" (untracked)"}`,className:eX[(0,ek.p7)(e)],style:{...eq,...t?{}:{borderStyle:"dashed"}}},ek.uy[e])}let eZ={CREATED:eY,MODIFIED:eU,CHILD_MODIFIED:ej,REMOVED:eW};function e0({type:e}){return n.createElement("div",{title:e,className:eZ[e],style:eJ},eR.x[e])}let e1=eG.minW24.w24.colorBg.b1.h14,e4={CREATED:e1.colorBorderSuccess.colorTextSuccessSecondary.$,MODIFIED:e1.colorBorderBrand.colorTextBrandSecondary.$,REMOVED:e1.colorBorderDanger.colorTextDangerSecondary.$};function e2({phase:e}){return n.createElement("div",{title:e,className:e4[e],style:eq},eR.z[e])}let e3=eG.minW28.w28.colorBg.b1.h14,e6=e3.colorBorderComponent.colorTextComponent.$,e8=e3.colorBorderComponent.colorTextComponentTertiary.$,e9=e3.colorBorderWarning.colorTextWarning.$;function e7({type:e}){return n.createElement("div",{title:`Edit scope type: ${e}`,className:"MIXED"===e?e8:eV.YY.has(e)?e6:e9,style:eq},eV.nP[e])}let e5={info:eH,warning:eK,error:eW};function te({type:e,value:t,title:r}){return n.createElement("div",{title:r,className:e5[e],style:eJ},t)}var tt=r(903570),tr=r(629019),tn=r.n(tr),ti=r(449233);let ts="badge_display--canUnderline--aufN5";function ta({id:e}){let t=(0,l.useAtomValue)(m.Cc),r=(0,l.useAtomValue)(m.lX),i=t.getObject(e)??r?.getObject(e)??null;return n.createElement(tb,{target:i,text:e,errorIfMissing:!0})}function tl({guid:e,scene:t}){let r=t.getNodeByGuid(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:I.c1.format(e)})}function to({styleId:e,scene:t}){let r=t.getStyleByStyleId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt.PK),fullText:tt.PK.toString(e)})}function tc({variableId:e,scene:t}){let r=t.getVariableByVariableId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt.sD),fullText:tt.sD.toString(e)})}function tu({variableCollectionId:e,scene:t}){let r=t.getVariableCollectionByCollectionId(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt.gr),fullText:tt.gr.toString(e)})}function td({codeComponentId:e,scene:t}){let r=t.getCodeComponentById(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt._H),fullText:tt._H.toString(e)})}function th({codeLibraryId:e,scene:t}){let r=t.getCodeLibraryById(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt.eJ),fullText:tt.eJ.toString(e)})}function tm({codeFileId:e,scene:t}){let r=t.getCodeFileById(e);return n.createElement(tb,{target:r,errorIfMissing:t.isComplete,text:(0,I.r4)(e,tt.Tq),fullText:tt.Tq.toString(e)})}function tg({id:e,secondary:t}){return n.createElement(tS,{colorStyle:t?2:1,text:e,isValid:!0})}function tp({guid:e}){return n.createElement(tS,{colorStyle:1,text:I.c1.format(e),isValid:I.c1.isValid(e)})}function tf({guidPath:e}){return n.createElement(tS,{colorStyle:1,text:I.dB.format(e),isValid:I.dB.isValid(e)})}var ty=(e=>(e[e.Invalid=0]="Invalid",e[e.Normal=1]="Normal",e[e.Seconary=2]="Seconary",e[e.Link=3]="Link",e))(ty||{});let tE=ei.s.inlineBlock,tI={0:tE.colorTextDanger.$,1:tE.colorText.fontSemiBold.$,2:tE.colorTextSecondary.$,3:tE.colorTextFigjam.fontSemiBold.$};function tb({target:e,text:t,errorIfMissing:r,fullText:i}){let s=(0,l.useSetAtom)(N);return null==e?n.createElement(tS,{colorStyle:r?0:3,text:t,copyOnClickText:i,isValid:!1}):n.createElement("span",{role:"button",className:tn()(ei.s.inlineBlock.$,"badge_display--guidLink--3Avjv"),onClick:()=>s(e.id)},n.createElement(es.Y,{spacing:4},n.createElement(eM,{badges:e.displayProperties.leftBadges}),n.createElement("span",{className:tn()(tI[3],ts)},t),n.createElement("span",{className:tn()(tI[3],ts,ei.s.fontNormal.$)},e.displayProperties.name)))}function tS({colorStyle:e,text:t,copyOnClickText:r,isValid:i}){let s=tI[i?e:0];return null==r?n.createElement("span",{className:s},t):n.createElement("span",{className:s,role:"button",onClick:()=>{(0,ti.Dk)(r).then(()=>window.alert(`Copied ${r} to clipboard`)).catch(()=>window.alert(r))}},t)}var tC=r(957568),tv=r(918091),tT=r(76265),tD=r(237442);let tN=tv.ms,tA=tv.c$,tP=tv.wv;function tx({contextMenuData:{objectId:e,position:t},onClose:r}){let[i,s]=n.useState(0),a=t.left,o=t.top+i>window.innerHeight?t.top-i:t.top,{canSelectInApp:c,selectInApp:d}=n.useContext(F),h=n.useRef(null);(0,tC.ww)(h,r);let g=(0,l.useAtomValue)(m.Cc).getObject(e),p=g instanceof tD.E?g:null,[f,y]=(0,l.useAtom)(M),E=(0,l.useSetAtom)(ef);if(null==g)return null;let I=e=>()=>{e(),r()},b=g.children.length>0,S=(()=>{if(c?.(g))return I(()=>d(g))})(),C=p&&(p.isInternalOnly||"DOCUMENT"===p.nodeType||"CANVAS"===p.nodeType),v=e=>I(()=>et.glU.triggerAction(e,{guid:g.id})),T=f?.object.id===g.id;return n.createElement(tN,{style:{...u.sx.fixed.$,left:a,top:o},dropdownRef:e=>{e&&s(e.clientHeight)}},n.createElement("div",{ref:h},S&&n.createElement(tA,{onClick:S},"Jump to node"),b&&n.createElement(tA,{onClick:I(()=>E({type:"expandDescendants",objectId:e}))},"Expand descendants"),b&&n.createElement(tA,{onClick:I(()=>E({type:"collapseDescendants",objectId:e}))},"Collapse descendants"),(S||b)&&n.createElement(tP,null),T&&n.createElement(tA,{onClick:I(()=>y({type:"clear"}))},"Stop diffing against this node"),(!T||f?.type!==V.Layer)&&n.createElement(tA,{onClick:I(()=>y({type:"start",diffType:V.Layer,id:e}))},"Layer diff against this node"),(!T||f?.type!==V.Tree)&&n.createElement(tA,{onClick:I(()=>y({type:"start",diffType:V.Tree,id:e}))},"Tree diff against this node"),!C&&n.createElement(tP,null),!C&&S&&p&&"DOCUMENT"!==p.type&&"CANVAS"!==p.type&&n.createElement(tA,{onClick:v("debug-print-as-test-code")},(0,tT.tx)("fullscreen_actions.debug-print-as-test-code")),!C&&S&&p&&"VECTOR"===p.type&&n.createElement(tA,{onClick:v("debug-print-vector-network-as-test-code")},(0,tT.tx)("fullscreen_actions.debug-print-vector-network-as-test-code"))))}var tO=r(336427),t_=r(153767),tB=r(297203);let tL=n.createContext(()=>!1);function tF({children:e,className:t,style:r}){let i=n.useRef(null),s=n.useCallback(()=>!!i.current?.contains(document.activeElement),[]);return n.createElement(t_.dP,{ref:i,className:t,style:r,allowVim:!0},n.createElement(tL.Provider,{value:s},e))}let tw="tree_row--expansionToggle--mYjsb";function tR({children:e,changeType:t,isExpanded:r,isLeaf:i,isPinned:s,isSelected:a,isChanging:l,indent:o,style:c,keyboardNavigationPath:u,toggleExpanded:d,togglePinned:h,select:m,onContextMenu:g,onMouseEnter:p,onMouseLeave:f}){let{setKeyboardNavigationElement:y,keyboardNavigationItem:E,isFocused:I}=(0,t_.M3)({path:u}),b=n.useContext(tL),S=(0,tO.ZC)(a);n.useEffect(()=>{!S&&a&&!I&&b()&&E?.focus()},[I,S,a,E,b]);let C=n.useRef(!1),v=n.useCallback(e=>e.target instanceof Element&&"BUTTON"===e.target.tagName,[]),T=n.useCallback(e=>!!(e.target instanceof Element&&(e.target.classList.contains(tw)||e.target.parentElement?.classList.contains(tw))),[]);return n.createElement("button",{ref:y,style:c,className:tn()("tree_row--treeItem--6gIYH",{"tree_row--selected--url1U":a||I,"tree_row--changing--E9CSm":l}),onFocus:m,onMouseDown:e=>{(v(e)||T(e))&&e.detail>1&&e.preventDefault(),T(e)?C.current=e.detail>1:C.current=!0},onClick:e=>{C.current?C.current=!1:d(e.metaKey||e.altKey),e.currentTarget.focus()},onMouseEnter:p,onMouseLeave:f,onDoubleClick:e=>{T(e)||d(e.metaKey)},onKeyDown:e=>{(r&&(0,t_.yn)(e.code,!0)||!r&&(0,t_.lv)(e.code,!0))&&d(e.metaKey)},onContextMenu:g},n.createElement(tB.Y,null,n.createElement(tV,{indent:o,isLeaf:i,isExpanded:r}),e,h&&n.createElement(tk,{isPinned:!!s,togglePinned:h}),t&&n.createElement(e0,{type:t})))}function tV({indent:e,isLeaf:t,isExpanded:r}){return n.createElement("div",{className:tn()(tw,!t&&"tree_row--clickable--ttIc9"),style:{paddingLeft:14*e,width:14,minHeight:14}},n.createElement("span",null,t?"":r?"\u25BC":"\u25B6"))}function tk({isPinned:e,togglePinned:t}){return n.createElement("span",{onClick:t,className:e?"tree_row--unpinToggle--CU4-x tree_row--_pinToggleBase--W1djM":"tree_row--pinToggle--wbULT tree_row--_pinToggleBase--W1djM"},e?"Unpin":"Pin")}let tM=n.memo(function({diffType:e,id:t,primaryId:r,secondaryId:i,leftBadges:s,indent:a,index:l,isExpanded:o,isLeaf:c,isSelected:u,memoryFraction:d,rightBadges:h,additionalBadges:m,name:g,style:p,select:f,toggle:y,showContextMenu:E}){let I=n.useCallback(e=>{e.preventDefault(),E({objectId:t,position:{left:e.clientX,top:e.clientY}})},[t,E]);return n.createElement(tR,{changeType:e,keyboardNavigationPath:[l],isSelected:u,isLeaf:c,isExpanded:o,indent:a,style:p,select:()=>f(t),toggleExpanded:e=>y(t,e),onContextMenu:I,onMouseEnter:()=>{et.Ez5&&et.Ez5.editorState().figmaScopeHighlightedNode.set(t)},onMouseLeave:()=>{et.Ez5&&et.Ez5.editorState().figmaScopeHighlightedNode.set("")}},n.createElement(eM,{badges:s}),n.createElement(tg,{id:r}),i&&n.createElement(tg,{id:i,secondary:!0}),n.createElement("div",{title:g,className:ei.s.ellipsis.noWrap.overflowHidden.$},g),n.createElement(es.M,null),n.createElement(eM,{badges:h}),m&&n.createElement(eM,{badges:m}),null!=d&&n.createElement("span",{className:ei.s.colorTextSecondary.$,title:"Node memory usage"},(100*d).toFixed(3),"%"))});function t$({style:e,data:{displayedObjects:t,selectedId:r,...i},index:s}){let a=t[s],l=(0,p.zN)(e);return n.createElement(tM,{...a,...i,isSelected:r===a.id,style:l,index:s})}function tG(){let e=(0,l.useAtomValue)(tH),[t,r]=(0,l.useAtom)(N),[i,s]=n.useState(null),a=n.useRef(null);n.useEffect(()=>{let r=e.findIndex(e=>e.id===t);r>=0&&a.current?.scrollToItem(r,"smart")},[e,t]);let o=(0,l.useSetAtom)(ef);n.useEffect(()=>{o({type:"expandAncestors",objectId:t})},[o,t]);let c=n.useCallback((e,t)=>{o({type:"toggleExpanded",objectId:e,toggleSubtree:t})},[o]),u=(0,l.useAtomValue)(eA);return 0===e.length?n.createElement("div",null,u??"Empty Scene"):n.createElement(n.Fragment,null,n.createElement(Q.A,{disableWidth:!0},({height:i})=>n.createElement(Z.Y1,{itemSize:18,itemCount:e.length,height:i,ref:a,itemData:{displayedObjects:e,selectedId:t,select:r,toggle:c,showContextMenu:s},width:"100%"},t$)),i&&n.createElement(tx,{contextMenuData:i,onClose:()=>{s(null)}}))}let tH=(0,l.atom)(e=>e(tU)??e(tj)),tU=(0,l.atom)(e=>{let t=e(eN);if(!t)return null;let r=e(m.Cc);return t.map(e=>({...e.displayProperties,diffType:void 0,additionalBadges:r.getAdditionalBadges?.(e.id)??[],id:e.id,indent:0,isExpanded:!1,isLeaf:!0}))}),tj=(0,l.atom)(e=>{let t=e(m.Cc),r=t.rootObjects,n=e($),i=e(ef),s=e(eO),a=(()=>{switch(n.type){case V.Tree:return[n.object];case V.Full:return n.resource.rootObjects;default:return[]}})(),l={resource:t,sortFn:s,expandedIds:i};return en()(r,e=>{if(!e)return[];if(0===a.length)return tY(e,0,l);let t=tW(e,a);return t?tK(e,t,0,l):function e(t,r,n,i){let s=t.id,a=t.children,l=0===a.length,o=!!i.expandedIds[s],c=!1,u=en()(a,t=>{let s=(()=>{let s=tW(t,r);if(s)return tK(t,s,n+1,i);let a=r.filter(e=>e.someAncestor(e=>e.id===t.id,{includeSelf:!0}));return a.length>0?e(t,a,n+1,i):tY(t,n+1,i)})();return c=c||s[0]?.diffType!=null,s}),d={...t.displayProperties,diffType:c?"CHILD_MODIFIED":void 0,additionalBadges:i.resource.getAdditionalBadges?.(s)??[],id:s,indent:n,isExpanded:o,isLeaf:l};return o?[d,...u]:[d]}(e,a,0,l)})});function tY(e,t,r){let n=e.id,i=e.children,s=0===i.length,a=!!r.expandedIds[n],l={...e.displayProperties,diffType:void 0,additionalBadges:r.resource.getAdditionalBadges?.(n)??[],id:n,indent:t,isExpanded:a,isLeaf:s};return a?[l,...en()(tz(i,r.sortFn),e=>tY(e,t+1,r))]:[l]}function tK(e,t,r,n){let i=e??t;if(!i)throw Error("Diffing two nothings");if(e&&t&&e.id!==t.id)throw Error("Diffing nodes with mismatched keys");let s=i.id,a=tz(e?.children??[],n.sortFn),l=tz(t?.children??[],n.sortFn),o=(0,ee.TR)(a,l,e=>e.id),c=!1,u=en()(o,({left:e,right:t})=>{let i=tK(e,t,r+1,n);return c=c||i[0]?.diffType!=null,i}),d=function(e,t,r=!1){if(!e)return"REMOVED";if(!t)return"CREATED";let n=e.rawProperties,i=t.rawProperties;if(n.length!==i.length)return"MODIFIED";for(let e=0;e<n.length;e++)if(void 0!==function e(t,r){let n=H(t,r);if(void 0!==n)return n;let i=t.children,s=r.children;if(i.length!==s.length)return"CHILD_MODIFIED";for(let t=0;t<i.length;t++)if(void 0!==e(i[t],s[t]))return"CHILD_MODIFIED"}(n[e],i[e]))return"MODIFIED";return r?"CHILD_MODIFIED":void 0}(e,t,c),h=e?.displayProperties.name,m=t?.displayProperties.name,g=null!=h&&null!=m&&h!==m?`${h} <=> ${m}`:i.displayProperties.name,p=!!n.expandedIds[s],f={...i.displayProperties,diffType:d,additionalBadges:n.resource.getAdditionalBadges?.(s)??[],id:s,indent:r,isExpanded:p,isLeaf:0===o.length,name:g};return p?[f,...u]:[f]}function tW(e,t){return t.find(t=>t.id===e.id)}function tz(e,t){return e.slice().sort(t)}var tX=r(586908);function tJ({searchRef:e}){let t=(0,l.useSetAtom)(N),r=(0,l.useAtomValue)(eT),i=(0,l.useAtomValue)(eD),[s,a]=n.useState(!1),o=(0,l.useAtomValue)(ev)!==v.Filter&&s,c=n.useRef(null);(0,tC.ww)(c,()=>a(!1));let u=n.useCallback(e=>{a(!1),t(e.object.id)},[a,t]);return n.createElement(t_.dP,{className:ei.s.flex1.$,ref:c,allowVim:!0},n.createElement(tq,{searchRef:e,setShowSearchResults:a}),o&&(r?n.createElement(tZ,{searchResults:r,selectResult:u}):i?n.createElement(t0,{text:i}):null))}function tq({searchRef:e,setShowSearchResults:t}){let r=(0,l.useAtomValue)(ev),i=function(){let e=(0,l.useAtomValue)(m.Cc),t=(0,l.useSetAtom)(eI),r=(0,l.useSetAtom)(eb),i=(0,l.useSetAtom)(eS),s=n.useRef(0),a=n.useMemo(()=>(0,ey.s)(n=>{let a=++s.current;i(!0);let l=new TaskController({priority:"user-visible"});scheduler.postTask(()=>i(!0),{signal:l.signal,delay:300}).catch(()=>{}),e.getSearch(r).then(e=>e.searchWithText(n)).then(e=>{l.abort(),a===s.current&&t({status:"success",results:e})}).catch(e=>{console.error(e),l.abort(),a===s.current&&t({status:"error",error:e})})},200),[e,r,t,i]);return n.useCallback(e=>0===e.length?t({status:"initial"}):a(e),[a,t])}(),{setKeyboardNavigationElement:s}=(0,t_.M3)({path:[0,0],id:"input"});return n.createElement("input",{ref:t=>{s(t),e.current=t},type:"text",placeholder:r,className:"search_bar--searchBar--qnpUm",onChange:e=>i(e.target.value),onFocus:()=>t(!0)})}function tQ({children:e}){return n.createElement("div",{className:ei.s.absolute.zIndexModal.colorBg.b1.colorBorder.mt2.overflowAuto.$,style:{maxHeight:450,minWidth:500,boxShadow:"0px 2px 14px var(--color-shadow, rgba(0, 0, 0, 0.15))"}},e)}function tZ({searchResults:e,selectResult:t}){return n.createElement(tQ,null,e.map((e,r)=>n.createElement(t1,{key:e.object.id,result:e,index:r,onClick:()=>t(e)})))}function t0({text:e}){return n.createElement(tQ,null,(Array.isArray(e)?e:[e]).map((e,t)=>n.createElement("div",{key:t,className:ei.s.colorBg.colorTextSecondary.px8.py4.$},e)))}function t1({result:e,index:t,onClick:r}){let{object:i,matches:s}=e,{displayProperties:a}=i,{setKeyboardNavigationElement:l,keyboardNavigationItem:o,isFauxFocused:c}=(0,t_.M3)({path:[1,t],id:i.id});return n.useEffect(()=>{o&&0===t&&o.fauxFocus()},[o,t]),n.createElement("button",{ref:l,className:tn()(ei.s.block.wFull.px4.py8.colorText.flex.itemsCenter.alignLeft.$,"search_bar--searchResult--0iOvc",c&&"search_bar--fauxFocus--BYHwu"),onClick:r},n.createElement(es.Y,{spacing:4},n.createElement(eM,{badges:a.leftBadges}),n.createElement(tg,{id:i.displayProperties.primaryId}),n.createElement(tX.R,{className:ei.s.overflowHidden.$,text:a.name}),n.createElement(es.M,null),s.filter(({property:e})=>!["id","guid","name","type","phase"].includes(e)).map(({property:e,value:t},r)=>n.createElement(es.Y,{key:r,spacing:4,width:"hug-contents"},n.createElement("div",null,e,":"),n.createElement("div",null,t)))))}var t4=r(693565);function t2({children:e}){return n.createElement("div",{className:ei.s.colorBorder.px8.py4.bb1.bSolid.$},n.createElement(es.Y,null,e))}function t3(e){let t={className:"toolbar_components--iconButton--1-XNe",children:n.createElement(t4.B,{svg:e.svg}),title:e.label,"aria-label":e.label};return"href"in e?n.createElement("a",{...t,href:e.href,target:"blank"}):n.createElement("button",{...t,onClick:e.onClick,disabled:e.disabled})}var t6=r(444890),t8=r(816679);function t9({searchRef:e}){let[t,r]=(0,l.useAtom)(A),[i,a]=(0,l.useAtom)(P),o=!!n.useContext(F).selectInApp,[c,u]=(0,l.useAtom)(ev),[d,h]=(0,l.useAtom)(_),[m,g]=(0,l.useAtom)(eP),p=(0,l.useAtomValue)(ex);return n.createElement(t2,null,n.createElement(tJ,{searchRef:e}),n.createElement("select",{name:"filter-or-search",title:"Determines whether the text box searches or filters",onChange:e=>{u(e.target.value)},defaultValue:c},n.createElement("option",{value:v.Search},"Search"),n.createElement("option",{value:v.Filter},"Filter")),n.createElement("select",{name:"sort",title:"Sets the left panel sort order",onChange:e=>{let t=e.target.value;s.az.trackDefinedEvent("figmascope.sort_order_change",{order:function(e){switch(e){case C.Position:return"position";case C.Name:return"name";case C.Memory:return"memory";case C.NodeId:return"node_id"}}(t)}),g(t)},defaultValue:m},p.map(e=>n.createElement("option",{key:e,value:e},"Sort by ",e))),o&&n.createElement(n.Fragment,null,n.createElement("input",{name:"follow-selection",type:"checkbox",checked:d,onChange:e=>h(e.target.checked)}),n.createElement("label",{htmlFor:"follow-selection"},"Follow")),n.createElement(t3,{label:"Select Previous",onClick:()=>{r(),s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"button"})},disabled:!t,svg:t6.A}),n.createElement(t3,{label:"Select Next",onClick:()=>{a(),s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"button"})},disabled:!i,svg:t8.A}))}var t7=r(991458),t5=r(488527);let re=(0,t7.jz)(t5.HJx),rt=(0,t7.jz)(t5.EJM),rr=new WeakMap;function rn(e){let t=rr.get(e);if(void 0!==t)return t;let[r,n]=et.Vzr.generateThumbnailForNode(I.c1.fromKiwi(e),4*rt,4*re,4,{forceContentsOnly:!0,isDetatchedComponentScene:!1});if(!n||0===n.length||!r)return rr.set(e,null),null;let{width:i,height:s}=r,a={url:URL.createObjectURL(new Blob([n])),renderWidth:i/4,renderHeight:s/4};return rr.set(e,a),a}var ri=r(846288),rs=r(357272),ra=r(475824),rl=r(720759),ro=r(339977),rc=r(967111),ru=r(23236);let rd=(0,t7.jz)(t5.HJx),rh=(0,t7.jz)(t5.EJM);function rm({thumbnailInput:e}){let t=rn(e),r=(0,rc.c6)(I.c1.fromKiwi(e));return t?n.createElement("div",{className:ei.s.wFull.flex.flexShrink1.itemsCenter.justifyCenter.$,style:r},n.createElement(ru.J,{className:"node_thumbnail_display--thumbnailPreview--9qgOD",src:t.url,width:t.renderWidth>rh?rh:t.renderWidth,height:t.renderHeight>rd?rd:t.renderHeight})):n.createElement("span",{className:ei.s.noWrap.colorTextDesign.$},"Error generating thumbnail")}function rg({value:e}){switch(e.type){case"blobIndex":return n.createElement(rx,{...e});case"userInputtedText":return n.createElement(rS,{...e});case"nonUserText":return n.createElement(rC,{...e});case"boolean":return n.createElement(rb,{...e});case"numeric":return n.createElement(rD,{...e});case"position":return n.createElement(rv,{...e});case"color":return n.createElement(rT,{...e});case"vector":return n.createElement(rN,{...e});case"matrix":return n.createElement(rA,{...e});case"objectId":return n.createElement(ta,{id:e.value});case"nodeGuid":return n.createElement(tl,{guid:e.value,scene:e.scene});case"styleId":return n.createElement(to,{styleId:e.value,scene:e.scene});case"variableId":return n.createElement(tc,{variableId:e.value,scene:e.scene});case"variableCollectionId":return n.createElement(tu,{variableCollectionId:e.value,scene:e.scene});case"codeFileId":return n.createElement(tm,{codeFileId:e.value,scene:e.scene});case"codeLibraryId":return n.createElement(th,{codeLibraryId:e.value,scene:e.scene});case"codeComponentId":return n.createElement(td,{codeComponentId:e.value,scene:e.scene});case"genericGuid":return n.createElement(tp,{guid:e.value});case"guidPath":return n.createElement(tf,{guidPath:e.value});case"imageHash":return n.createElement(rO,{...e});case"bytes":return n.createElement(rP,{...e});case"metadata":return n.createElement(rL,{...e});case"error":return n.createElement(rF,{...e});case"nodeThumbnail":return n.createElement(rm,{thumbnailInput:e.value});case"editScope":return n.createElement(rB,{...e});case"timestamp":return n.createElement(rL,{value:new Date(e.value).toLocaleString()});default:(0,ri.xb)(e)}}let rp=ei.s.noWrap,rf=rp.colorTextDesign,ry=rp.colorTextSuccess,rE=rp.colorTextDanger,rI=rp.colorTextSecondary;function rb({value:e}){return n.createElement("span",{className:ry.$},e?"TRUE":"FALSE")}function rS({value:e}){let t=(0,l.useAtomValue)(m.Cc),r=(0,ro.bU)(e,t.sensitiveTextPolicy);return n.createElement("span",{className:rf.$},'"',r,'"')}function rC({value:e}){return n.createElement("span",{className:rf.$},e)}function rv({value:e}){return n.createElement(es.Y,{width:"hug-contents"},n.createElement("span",{className:rf.$},(0,rs.PZ)(e)),n.createElement("span",{className:rI.$},"(compressed: `",e,"`)"))}function rT({value:e}){let t=ra.F.format(e);return n.createElement(es.Y,{width:"hug-contents"},n.createElement("span",{className:ei.s.inlineBlock.w12.h12.bRadius2.$,style:{backgroundColor:t}}),n.createElement("span",{className:rf.$},t))}function rD({value:e}){return n.createElement("span",{className:ry.$,title:e.toString()},rw(e))}function rN({value:e}){return n.createElement("span",{className:ry.$,title:`<${e.x||0}, ${e.y||0}>`},`<${rw(e.x||0)}, ${rw(e.y||0)}>`)}function rA({value:e}){let{m00:t,m01:r,m02:i,m10:s,m11:a,m12:l}=e;return n.createElement("span",{className:ry.$},"[",[[t,r,i],[s,a,l]].map(e=>`[${e.map(rw).join(", ")}]`).join(", "),"]")}function rP({value:e}){return n.createElement("span",{className:ry.$},rR(e))}function rx({value:e,scene:t}){let r=t.getBlobByIndex(e);return r===rl.y?n.createElement(rL,{value:`Blob ${e} :: [NOT SUPPORTED]`}):r?n.createElement("span",{className:ry.$},"Blob ",e," ::"," ","string"==typeof r?r:rR(r.bytes)):n.createElement(rF,{value:`Blob ${e} :: [MISSING]`})}function rO({value:e}){let t=rV(e,"");return n.createElement(n.Fragment,null,n.createElement("span",{className:ry.$},t),n.createElement("span",null,n.createElement(r_,{hash:t,name:"staging"})," | ",n.createElement(r_,{hash:t,name:"prod"})))}function r_({hash:e,name:t}){return n.createElement("a",{href:`https://${"staging"===t?"staging-":""}admin.figma.com/admin/image/${e}`},t)}function rB({value:e}){return n.createElement(es.Y,{width:"hug-contents"},n.createElement("span",{className:ry.$},e.type),n.createElement("span",{className:rf.$},e.label),e.editorType&&n.createElement("span",{title:"The editor type active when this scope was opened",className:rI.$},"(",e.editorType.toLowerCase(),")"))}function rL({value:e}){return n.createElement("span",{className:rI.$},"(",e,")")}function rF({value:e}){return n.createElement("span",{className:rE.$},e)}function rw(e){return"bigint"==typeof e||e%1==0?e.toString():e.toFixed(4)}function rR(e){return`binary[${e.length}] = ${rV(e," ")}`}function rV(e,t){let r="";for(let n=0;n<e.length;++n){if(n>=30){r+="...";break}r+=function(e){let t=e.toString(16);return 1===t.length?"0"+t:t}(e[n]),r+=t}return r}let rk=(0,t7.jz)(t5.hVg),rM=(0,t7.jz)(t5.k$X),r$=n.memo(function({panel:e,items:t,diffItems:r,extraItems:i}){let[s,a]=(0,l.useAtom)("middle"===e?ed:em),[o,c]=(0,l.useAtom)("middle"===e?eh:eg),u=n.useMemo(()=>{let e=[];for(let t of i??[])e=e.concat(rz(t,0,void 0,s,o));let n=rK(t??[],void 0,o),a=null!=r,l=rK(r??[],void 0,o);for(let t of(0,ee.TR)(n,l,e=>rj(e,void 0)))e=a?e.concat(rX(t.left,t.right,0,void 0,s,o)):e.concat(rz(t.left??t.right,0,void 0,s,o));return e},[t,r,i,s,o]),d=n.createRef();function h(e){if(void 0!==u[e]){let t=u[e].value;if(t&&"nodeThumbnail"===t.type){let e=rn(t.value);if(e)return e.renderHeight+rM}}return rk}return n.useEffect(()=>{d.current?.resetAfterIndex(0)},[d,u]),n.createElement(Q.A,{disableWidth:!0},({height:t})=>n.createElement(Z._m,{ref:d,itemSize:h,itemCount:u.length,height:t,itemKey:e=>u[e].expansionKey,itemData:{panel:e,displayedProperties:u,togglePropertyExpanded:a,togglePropertyPinned:c},width:"100%"},rG))});function rG({style:e,index:t,data:{panel:r,displayedProperties:i,togglePropertyExpanded:s,togglePropertyPinned:a}}){let l=i[t],o=(0,tO.ZC)(l),[c,u]=n.useState(!1),d=n.useRef(void 0);n.useEffect(()=>{o&&null!=H(o,l)&&(clearTimeout(d.current),u(!0),d.current=setTimeout(()=>u(!1),250))},[l,o]),n.useEffect(()=>()=>clearTimeout(d.current),[]);let h=(0,p.zN)(e);return n.createElement(rU,{...l,style:h,isChanging:c,panel:r,index:t,togglePropertyExpanded:s,togglePropertyPinned:a})}let rH=n.memo(function({diffValue:e,value:t}){return n.createElement(es.Y,{width:"hug-contents"},null!=e&&n.createElement(rg,{value:e}),null!=e&&n.createElement("span",null,"\u21E8"),null!=t&&n.createElement(rg,{value:t}))}),rU=n.memo(function({childExpansionKeys:e,expansionKey:t,indent:r,isExpanded:i,isChanging:a,isPinned:l,isLeaf:o,isImage:c,label:u,index:d,style:h,value:m,diffValue:g,diffType:p,panel:f,togglePropertyExpanded:y,togglePropertyPinned:E}){return n.createElement(tR,{keyboardNavigationPath:[d],isLeaf:o,isExpanded:i,isChanging:a,indent:c?0:r,style:c?{...h,height:"fit-content",width:"100%",alignItems:"flex-start"}:h,toggleExpanded:r=>{i||s.az.trackDefinedEvent("figmascope.expand_row",{field:u,panel:f}),y(t,r?e:[])},isPinned:l,togglePinned:c?void 0:()=>{l||s.az.trackDefinedEvent("figmascope.pin_row",{field:u,panel:f}),E(t)},changeType:p},c?n.createElement(rH,{diffValue:g,value:m}):n.createElement(n.Fragment,null,n.createElement("span",{className:ei.s.colorText.$},u),n.createElement("div",{className:ei.s.ellipsis.noWrap.overflowHidden.alignCenter.$},n.createElement(rH,{diffValue:g,value:m}))),n.createElement(es.M,null))}),rj=(e,t)=>{let r=e.key??e.label;return t?[t,r].join("."):r},rY=(e,t)=>!!t[e],rK=(e,t,r)=>[...e.filter(e=>rY(rj(e,t),r)),...e.filter(e=>!rY(rj(e,t),r))],rW=(e,t,r,n)=>{if(e)return!1;let i=n[t];return null!=i?i:r??!1},rz=(e,t,r,n,i)=>{let s=rj(e,r),a=0===e.children.length,l=e.value?.type==="nodeThumbnail",o=rW(a,s,e.expandByDefault,n),c=en()(rK(e.children??[],s,i),e=>rz(e,t+1,s,n,i)),u={label:e.label,value:e.value,isExpanded:o,isLeaf:a,isImage:l,indent:t,expansionKey:s,childExpansionKeys:en()(c,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rY(s,i)};return o?[u,...c]:[u]},rX=(e,t,r,n,i,s)=>{let a=e??t;if(!a)throw Error("Nothing to diff");if(e&&t&&rj(e,n)!==rj(t,n))throw Error("Mismatched keys");let l=rj(a,n),o=rK(e?.children??[],l,s),c=rK(t?.children??[],l,s),u=(0,ee.TR)(o,c,e=>rj(e,l)),d=!1,h=en()(u,({left:e,right:t})=>{let n=rX(e,t,r+1,l,i,s);return d=d||null!=n[0].diffType,n}),m=0===u.length,g=H(e,t,d),p=rW(m,l,a.expandByDefault??!1,i),f=a.value?.type==="nodeThumbnail",y={label:a.label,value:a.value,diffValue:e&&t&&g?t?.value:void 0,isExpanded:p,isLeaf:m,isImage:f,indent:r,expansionKey:l,childExpansionKeys:en()(h,e=>[e.expansionKey,...e.childExpansionKeys]),isPinned:rY(l,s),diffType:g};return p?[y,...h]:[y]};var rJ=r(621847),rq=r(959065),rQ=r(91365),rZ=r(167198),r0=r(247866),r1=r(630834);function r4({selectedObject:e,diffObject:t,onClose:r}){let i=(0,l.useAtomValue)(z),[s,a]=(0,l.useAtom)(M);return n.createElement(t2,null,e?s&&t?n.createElement(r6,{selectedObject:e,diffObject:t,diffState:s,setDiffState:a}):n.createElement(r3,{object:e}):t?n.createElement(r3,{object:t}):n.createElement(es.M,null),i&&n.createElement(r8,null),n.createElement(t3,{label:"Help",href:rq.e,svg:rQ.A}),r&&n.createElement(t3,{label:"Close FigmaScope",onClick:r,svg:r1.default}))}let r2=ei.s.flex1.ml10.my4.$;function r3({object:e}){return n.createElement("div",{className:r2},n.createElement("span",{className:ei.s.fontSemiBold.$},e.displayProperties.longName))}function r6({selectedObject:e,diffObject:t,diffState:r,setDiffState:i}){let s=(0,l.useSetAtom)(N);return n.createElement("div",{className:ei.s.flex1.ml10.my4.$},n.createElement("div",null,n.createElement("span",{className:ei.s.colorTextSecondary.$},"Diffing "),n.createElement("span",{className:ei.s.fontSemiBold.$},e.displayProperties.longName),n.createElement("span",{className:ei.s.colorTextSecondary.$}," against "),n.createElement("span",{className:ei.s.fontSemiBold.$},t.displayProperties.longName)),r&&n.createElement("div",{className:ei.s.colorTextSecondary.mt8.$},n.createElement(es.Y,{spacing:8,width:"hug-contents",height:"hug-contents",verticalAlignItems:"start"},n.createElement("span",null,"Snapshot of"," ",n.createElement(rJ.CY,{onClick:()=>s(r.object.id),className:ei.s.colorTextFigjam.fontSemiBold.$,trusted:!0},r.object.displayProperties.name),r.type===V.Tree&&" and full subtree"," was taken at"," ",r.time.toLocaleTimeString("en-US")),n.createElement(rJ.CY,{onClick:()=>i({type:"refresh"}),className:ei.s.colorTextDesign.$,trusted:!0},"Refresh"),n.createElement(rJ.CY,{onClick:()=>i({type:"clear"}),className:ei.s.colorTextDanger.$,trusted:!0},"Finish"))))}function r8(){let[e,t]=(0,l.useAtom)(X),r=e.status===c.r.LOADING;return n.useEffect(()=>{t()},[t]),n.createElement(t3,{label:r?"Fetching scene graph validation failures":"Refetch scenegraph validation failures",onClick:t,svg:r?rZ.A:r0.A})}var r9=r(233950);function r7({children:e}){return n.createElement("div",{className:ei.s.hFull.$},n.createElement(es.Y,{direction:"vertical",width:"fill-parent",height:"fill-parent",padding:0,spacing:0},n.createElement(r5,null),e))}function r5(){let{name:e,metadata:t}=(0,l.useAtomValue)(m.Cc);return n.createElement(es.Y,{direction:"horizontal",width:"fill-parent",height:32,padding:8,spacing:32,backgroundColor:"toolbar"},e&&n.createElement(r9.E,{fontWeight:"bold",color:"toolbar"},e),t&&Object.entries(t).map(([e,t])=>t&&n.createElement("span",{key:e},n.createElement(r9.E,{color:"toolbar-secondary"},e,": "),n.createElement(r9.E,{color:"toolbar",fontFamily:"monospace",fontWeight:"bold"},t))))}let ne=n.memo(function({embedded:e=!1,emptyStateContent:t,onClose:r,appSelection:i,setAppSelection:s}){let a=(0,l.useAtomValue)(m.lu);switch(a.status){case c.r.INIT:return t??n.createElement(q.zG,null);case c.r.LOADING:return n.createElement(q.zG,null);case c.r.FAILURE:return n.createElement(q.rf,{error:a.error});case c.r.SUCCESS:}if(0===a.value.primaryResource.rootObjects.length)return n.createElement(q.rf,{error:"No root objects found. This is likely a bug - please report in #figmascope."});let o=n.createElement(nt,{appSelection:i,setAppSelection:s,onClose:r});return e?o:n.createElement(r7,null,o)});function nt({onClose:e,appSelection:t,setAppSelection:r}){let d=n.useRef(null),h=n.useRef(null),{windowInnerWidth:g}=(0,a.l)(),[p,f]=(0,l.useAtom)(nr),[y,E]=(0,l.useAtom)(nn),[I,b]=(0,i.i)({onDrag(e){let t=e.clientX/g;f(`${(100*t).toFixed(2)}%`)}}),[S,C]=(0,i.i)({onDrag(e){let t=h.current;if(!t)return;let r=(e.clientX-t.getBoundingClientRect().left)/t.clientWidth;E(`${(100*r).toFixed(2)}%`)}}),v=(0,l.useSetAtom)(A),T=(0,l.useSetAtom)(P),D=n.useCallback(e=>{let t=d.current;document.activeElement!==t&&(e.keyCode===o.Uz.FORWARD_SLASH&&t?(t.focus(),e.preventDefault()):e.keyCode===o.Uz.BRACKET_LEFT?(s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"prev",source:"keyboard"}),v()):e.keyCode===o.Uz.BRACKET_RIGHT&&(s.az.trackDefinedEvent("figmascope.select_prev_next",{direction:"next",source:"keyboard"}),T()))},[v,T]),x=(0,l.useAtomValue)(m.Cc);window.figmaScope=x,window.figmaScopeScene=x,function(e){let[t,r]=(0,l.useAtom)(X);t.status===c.r.SUCCESS&&e?.setSceneGraphValidationInfo?.(t.value),(0,n.useEffect)(()=>{r()},[r])}(x);let _=(0,l.useAtomValue)(N),L=(0,l.useAtomValue)(O),F=(0,l.useAtomValue)(G);return n.createElement(B,{appSelection:t,setAppSelection:r},n.createElement("div",{className:"main_view--root--uFXxy",style:u.sx.if(I||S,{cursor:"ew-resize"}).$,onKeyDown:D},n.createElement("div",{className:"main_view--leftHalf--D2ctr",style:{width:p}},n.createElement(t9,{searchRef:d}),n.createElement(tF,{className:"main_view--leftPanel--wD96C"},n.createElement("div",{...b({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(tG,null))),n.createElement("div",{className:"main_view--rightHalf--t2aqF"},n.createElement(r4,{selectedObject:L,diffObject:F,onClose:e}),(L||F)&&n.createElement("div",{className:"main_view--rightPanels--Id6Dj",ref:h},n.createElement(tF,{className:"main_view--centerPanel--5lkgL",style:{width:y}},n.createElement("div",{...C({style:{position:"absolute",top:0,bottom:0,right:"-3px",width:"5px",gridArea:"center",cursor:"ew-resize",zIndex:9}})}),n.createElement(r$,{panel:"middle",items:L?.rawProperties,diffItems:F?.rawProperties,extraItems:void 0,key:_})),n.createElement(tF,{className:"main_view--rightPanel---MhPC"},n.createElement(r$,{panel:"right",items:L?.computedProperties,diffItems:F?.computedProperties,extraItems:x.getAdditionalProperties?.(_),key:_}))))))}let nr=D("leftPanelWidth","35%"),nn=D("rightPanelWidth","50%")}}]);

//# debugId=882ecd98-c548-51f4-b8e3-02204f42825a

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/b63f2ee9d843f9cf6a36d20e3ff6a16cb0e3c218/6809-9dcb9bd3b07d53e1.min.js.map