"use strict";
!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},n=(new Error).stack;n&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[n]="33f376f5-18ab-5c1c-8111-c16b6e11b752")}catch(e){}}();
(globalThis.webpackChunk=globalThis.webpackChunk||[]).push([[5368],{285842:(e,t,n)=>{n.d(t,{A7:()=>i,i4:()=>o,nt:()=>a});var r=n(302245),l=n(671056);let a=e=>e.library.localStyleSelection,o=(0,r.Mz)([a,(e,t)=>t],(e,t)=>e?.type===t?e:null),i=(0,r.Mz)([o,(e,t,n)=>n],(e,t)=>{if(!e)return null;let n=new Set,r=new Set;return e.folderNames.forEach(e=>{let a=t.find(t=>"STYLE_FOLDER"===t.type&&t.name===e);a&&((0,l.KU)(a).forEach(e=>{n.add(e.name)}),(0,l.dm)(a).forEach(e=>{r.add(e.node_id)}))}),{type:e.type,folderNames:n,styleIds:r}})},812932:(e,t,n)=>{n.d(t,{E:()=>lK});var r=n(411855),l=n(188507),a=n(805014),o=n(245954),i=n(108982),s=n(841962),c=n(399991),d=n(803098),p=n(73041),u=n(972640),m=n(343373),y=n(440475),E=n(509343),g=n(6428),h=n(963993),_=n(427494),f=n(354465),b=n(797187),S=n(510669),T=n(914077),v=n(511002),k=n(370212),P=n(747579),I=n(846836),N=n(15721),w=n(875877),C=n(968525),A=n(94055),R=n(471340),O=n(650437),L=n(199953),x=n(653798),M=n(15092),F=n(615883),K=n(33415),D=n(244862),V=n(225690),U=n(923219),B=n(357614),G=n(965636),Y=n(779099),H=n(612605),Q=n(846288),z=n(511445),W=n(588172),$=n(879058),j=n(851169),X=n(277154),J=n(336427),q=n(866415),Z=n(563192),ee=n(583502),et=n(550906),en=n(453956),er=n(76265),el=n(47795),ea=n(225371),eo=n(888807),ei=n(254760),es=n(674505),ec=n(581713),ed=n(366172),ep=n(176160),eu=n(827473),em=n(710443),ey=n(285842),eE=n(505534),eg=n(957020),eh=n(141604),e_=n(98551),ef=n(76237),eb=n(351966),eS=n(138225),eT=n(538887),ev=n(777885),ek=n(967790),eP=n(414796),eI=n(132939),eN=n(688656),ew=n(629019),eC=n.n(ew),eA=n(666308),eR=n(488527);let eO="styles--contextMenu--C-hVT",eL="styles--caret--DZmzh",ex="styles--rowSelectedExpanded--MGvUV",eM="styles--rowSelectedSecondaryLightBlue--S-zy- draggable_list--rowSelectedSecondary--yOI1g raw_components--rowSelectedSecondary---U7Us raw_components--rowSelected--M2Eip";function eF({childLeft:e,childRight:t,deleteSelectedItems:n,forceShowHoverBorder:l,hideStylePreview:a,index:o,inspectStyleSelected:i,isDragging:s,isEditable:c,isRenaming:d,isCollapsed:p=!0,isLastChildOfSelection:u=!1,isFirstChildOfSelection:y=!1,isFolder:E,level:g,name:h,nameRef:_,onContextMenu:f,onCreateFolder:b,onDoubleClick:S,onHoverChange:T,onMouseDown:v,onMouseMove:k,recordingKey:P,rowRef:I,secondaryName:N,selected:w,selectedSecondary:C,stopRenamingItem:A,tooltipData:R}){let[O,L]=r.useState(h),[x,M]=r.useState(!1),F=(0,m.GS)(),K=r.useCallback(e=>{e?.select()},[]);r.useEffect(()=>{L(h)},[h]);let D=r.useCallback(e=>{""===e.trim()?(A(o,h),L(h)):A(o,e)},[o,h,A]),V=(0,Z.AF)((0,Z.Pt)(P,"text-input"),"change",r.useCallback(e=>{L(e.currentTarget.value)},[L])),U=(0,Z.v_)((0,Z.Pt)(P,"text-input"),"keydown",e=>{e.keyCode===eA.Uz.ESCAPE?(A(o,h),L(h)):e.keyCode===eA.Uz.ENTER&&D(e.currentTarget.value)},{recordMetadata:e=>({inputValue:e.currentTarget.value}),playbackMetadata:e=>({currentTarget:{value:e.inputValue}})}),B=(0,Z.v_)(P,"keydown",e=>{c&&!d&&(e.keyCode===eA.Uz.BACKSPACE||e.keyCode===eA.Uz.DELETE)?n():c&&!d&&e.keyCode===eA.Uz.G&&(0,eA.Fo)(e)?(b(),e.preventDefault()):!d&&"Tab"!==e.key&&e.nativeEvent&&ed.Y5.forwardKeyboardEvent(e.nativeEvent)}),G=r.useCallback(()=>{D(O)},[D,O]),Y=(0,Z.rf)(P,"contextmenu",e=>{f(e)}),H=(0,Z.rf)(P,"mousemove",e=>{k(e)},{recordMetadata:e=>({bounds:e.currentTarget.getBoundingClientRect(),pageX:e.pageX,pageY:e.pageY}),playbackMetadata:e=>({currentTarget:{getBoundingClientRect:()=>e.bounds},pageX:e.pageX,pageY:e.pageY})}),Q=(0,Z.rf)(P,"mousedown",e=>{v(e),a()}),z=(0,Z.rf)(P,"mouseenter",r.useCallback(()=>{M(!0),T?.(!0)},[M,T])),W=r.useCallback(()=>{M(!1),T?.(!1)},[M,T]),$=(0,Z.rf)(P,"dblclick",r.useCallback(e=>{S(e)},[S])),j=Math.min((g-1)*3,18),X=eR.jNX-4-j,J=X-(F?7:5),q=x&&!d||i?J:X,ee=w||C,et=eC()({[ex]:!p&&ee,"styles--folderSecondarySelected--SL0JY":C||w&&!y,[eM]:C&&!F}),en=eC()({[eM]:ee,[ex]:!u&&ee}),er=eC()("styles--rowWithBorder--bphZ-",{[et]:E,[en]:!E,"styles--rowWithHover--RWNMH":!ee&&(l||x&&!s)}),el=r.createElement("div",{className:d?"styles--rowContentsRenaming--oDTtO styles--rowContents--37JBy":"styles--rowContents--37JBy",key:h,style:F?{width:"100%"}:{gridColumnEnd:`span ${q}`}},d?r.createElement(ef.ks,{autoCapitalize:"off",autoCorrect:"off",autoFocus:!0,className:"styles--input--LbjR0",onBlur:G,onChange:V,onKeyDown:U,innerRef:K,spellCheck:!1,value:O}):r.createElement(r.Fragment,null,r.createElement("div",{className:"styles--name--KWZ8d ellipsis--ellipsis--Tjyfa",ref:_,...R},h),N&&r.createElement("div",{className:"styles--textStyle--DiUv4"},N)));return r.createElement(e_.e,{className:er,dragging:s,hideGrabber:!0,onContextMenu:Y,onKeyDown:B,onMouseDown:Q,onMouseEnter:z,onMouseLeave:W,onMouseMove:H,onDoubleClick:$,ref:I,selected:w,selectedSecondary:!1,tabIndex:0},j>0&&r.createElement("span",{style:{gridColumnEnd:`span ${j}`}}),r.createElement("div",{className:"styles--childLeftContainer--Hu61K",style:F?{gridColumnEnd:`span ${q}`}:void 0},e,F&&el),!F&&el,t)}var eK=n(949207),eD=n(432023),eV=n(501191),eU=n(660164);function eB({deleteSelectedItems:e,folder:t,folderNameToNestUnder:n,hideStylePreview:a,index:o,isCollapsed:i,isDragging:s,isEditable:c,isRenaming:d,isTemporarilyExpanded:p,isFirstChildOfSelection:u,level:m,onContextMenu:y,onCreateFolder:E,onMouseDown:g,onMouseMove:h,onRenameItem:_,recordingKey:f,selected:b,selectedSecondary:S,stopRenamingItem:T,temporarilyExpandFolder:v,toggleFolder:k}){let P=(0,l.wA)(),[I,N]=r.useState(!1),w=r.useRef(null),C=r.useRef(null),A=I&&!d&&c,R=r.useCallback(()=>{k(!i)},[i,k]),O=r.useCallback(e=>{e.target!==C.current&&t.styleTypeSection&&_(t.name,!1,t.styleTypeSection)},[t.name,t.styleTypeSection,_]);r.useEffect(()=>{if(I&&s&&i){let e=setTimeout(()=>{v(t.name)},1e3);return()=>clearTimeout(e)}},[I,s,i,v,t]);let L=r.useCallback(()=>{let e=(0,eP.Zk)(t.styleTypeSection),n=w.current?.getBoundingClientRect();e&&n&&P(es.Zs({rowLeft:n.left,rowTop:n.top,styleType:t.styleTypeSection,styleNameInputPrefix:`${t.name}/`,inheritStyleKeyField:e}))},[w,t.name,t.styleTypeSection,P]);return r.createElement(eF,{deleteSelectedItems:e,forceShowHoverBorder:n===t.name,hideStylePreview:a,index:o,isDragging:s,isEditable:c,isRenaming:d,isCollapsed:i,isFolder:!0,isFirstChildOfSelection:u,level:m,name:(0,em.kH)(t.name),onContextMenu:y,onCreateFolder:E,onDoubleClick:O,onHoverChange:N,onMouseDown:g,onMouseMove:h,onRenameItem:_,recordingKey:f,selected:b,selectedSecondary:S,stopRenamingItem:T,rowRef:w,childLeft:r.createElement(eb.E,{onClick:R,className:"styles--caretContainer--4-dqw",ref:C},r.createElement(eI.U,{svg:i&&!p?eD.A:eK.A,className:eL},i&&!p?r.createElement(eT.k,{className:eL}):r.createElement(ev.O,{className:eL}))),childRight:A&&r.createElement(ef.$4,null,r.createElement(eS.K,{recordingKey:Z.Pt(f,"addButton"),"aria-label":(0,er.t)("design_systems.styles.tooltips.create"),onClick:L,htmlAttributes:{"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("design_systems.styles.tooltips.create")}},r.createElement(eI.U,{svg:eV.A,fallbackSvg:eU.A,children:r.createElement(ek.x,null)})))})}var eG=n(28819),eY=n(591421),eH=n(991458),eQ=n(639215),ez=n(481954),eW=n(737139),e$=n(231150),ej=n(162502);function eX({deleteSelectedItems:e,hideStylePreview:t,index:n,isDragging:a,isEditable:o,isRenaming:i,isLastChildOfSelection:s,level:c,onContextMenu:d,onCreateFolder:p,onInspectStyle:u,onMouseDown:y,onMouseMove:E,onRenameItem:g,recordingKey:h,selected:_,selectedSecondary:f,stopRenamingItem:b,dsStyle:S,stylePreviewShown:T,updateContextMenuStyleRef:v,updateSelection:k,updateFocusRowRef:P}){let[I,N]=r.useState(!1),w=(0,l.wA)(),C=r.useRef(null),A=r.useRef(null),R=(0,m.GS)(),O=r.useCallback(()=>{o&&g(S.node_id,!0,S.style_type)},[g,S.node_id,S.style_type,o]),L=T.isShown&&!T.isCreating&&T.style.node_id===S.node_id&&(0,eQ.EF)(T.style,S),x=I&&!i||L,M=r.useCallback(function(){let e=A.current;if(e){let t=e.getBoundingClientRect();L?w(es.sw()):(w(es.rk({style:S,rowTop:t.top,rowLeft:t.left})),u(S),k({type:S.style_type,folderNames:new Set,styleIds:new Set(S.node_id)}))}w(ea.XE())},[w,u,k,S,L]),F=r.useCallback(e=>{(2===e.button||e.ctrlKey)&&v(A.current),y(e),L&&M()},[M,y,L,v]),K=C.current,D=!!K&&K.offsetWidth<K.scrollWidth,V=r.useMemo(()=>!a&&S.description&&D?{"data-tooltip-type":eN.Ib.SPECIAL,"data-tooltip":e$.Z,"data-tooltip-style-name":(0,em.kH)(S.name),"data-tooltip-style-description":S.description,"data-tooltip-max-width":eR.jNX*(0,eH.hG)(eR.dGl)}:null,[D,a,S.name,S.description]),U="TEXT"===S.style_type&&S.meta?.style_thumbnail?S.meta.style_thumbnail:null;return r.createElement(eF,{deleteSelectedItems:e,hideStylePreview:t,index:n,inspectStyleSelected:L,isDragging:a,isEditable:o,isRenaming:i,isFolder:!1,isLastChildOfSelection:s,level:c,name:(0,em.kH)(S.name),nameRef:C,onContextMenu:d,onCreateFolder:p,onDoubleClick:O,onHoverChange:N,onMouseDown:F,onMouseMove:E,onRenameItem:g,recordingKey:h,rowRef:e=>{e&&(P?.(e),A.current=e)},secondaryName:U&&(0,ez.P$)(U),selected:_,selectedSecondary:f,stopRenamingItem:b,tooltipData:V,childLeft:r.createElement(r.Fragment,null,r.createElement(eW.zi,{dsStyle:S,disableTooltip:!0}),_&&"FILL"===S.style_type&&r.createElement("div",{className:"styles--selectedRing--UniEc"})),childRight:x&&r.createElement(ef.$4,null,r.createElement("div",{style:{gridColumnEnd:"span 1"}}),R?r.createElement(eG.d,{recordingKey:Z.Pt(h,"customButton"),"aria-expanded":L,onClick:M,htmlAttributes:{"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":o?(0,er.t)("design_systems.styles.edit_style"):(0,er.t)("design_systems.styles.view_style"),onMouseDown:ec.dG},children:r.createElement(eI.U,{svg:ej.A},r.createElement(eY.A,null)),"aria-label":o?(0,er.t)("design_systems.styles.edit_style"):(0,er.t)("design_systems.styles.view_style")}):r.createElement(ef.YW,{className:_?"styles--showOnSelectedRowHover--Lcf7e styles--showOnRowHover--OUqRT":"styles--showOnRowHover--OUqRT",recordingKey:Z.Pt(h,"customButton"),"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":o?(0,er.t)("design_systems.styles.edit_style"):(0,er.t)("design_systems.styles.view_style"),selected:L,onMouseDown:ec.dG,onClick:M},r.createElement(eI.U,{svg:ej.A},r.createElement(eY.A,null))))})}function eJ({styleType:e,children:t}){let n=!(0,_.p8)("isReadOnly");return r.createElement("div",{className:"styles--styleTypeSection--jPjTq component_tiles--section--qMua7"},n?r.createElement(eq,{styleType:e,recordingKey:`style-section-header-${e}`}):r.createElement("div",{className:"styles--styleTypeSectionHeader--224lA component_tiles--sectionHeader--eEC6d raw_components--panelTitle--VAQQA"},(0,eu.QT)(e)),t)}function eq({styleType:e,recordingKey:t}){let[n,a]=r.useState(!1),o=(0,l.wA)(),i=r.useRef(null),s=r.useCallback(()=>{let t=(0,eP.Zk)(e),n=i.current?.getBoundingClientRect();t&&n&&o(es.Zs({rowLeft:n.left,rowTop:n.top,styleType:e,inheritStyleKeyField:t}))},[i,e,o]);return r.createElement("div",{className:"styles--styleTypeSectionRow--wVTIO",onMouseEnter:()=>a(!0),onMouseLeave:()=>a(!1),ref:i},r.createElement(ef.JU,{className:"styles--styleTypeSectionRowLabel--PrKm-"},(0,eu.QT)(e)),r.createElement("div",{style:{visibility:n?"visible":"hidden"}},r.createElement(eS.K,{recordingKey:Z.Pt(t,"addButton"),"aria-label":(0,er.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,eu.XV)(e).toLowerCase()}),onClick:s,htmlAttributes:{"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("design_systems.styles.tooltips.create_style_from_section",{kind:(0,eu.XV)(e).toLowerCase()})}},r.createElement(eI.U,{svg:eV.A,fallbackSvg:eU.A,children:r.createElement(ek.x,null)}))))}eJ.displayName="StyleTypeSection";var eZ=n(918091),e0=n(125682),e1=n(671056);let e4=eZ.ms,e5=eZ.c$,e2=eZ.wv,e3="styles-by-type-context-menu",e7=.75*(0,eH.hG)(eR.uj0);function e8({styleRowRef:e,onEditStyle:t,onRenameItem:n,onCreateFolder:a,onDeleteItems:o,onCutItems:i,onPasteItems:s,styleType:c}){let d=(0,e0.Um)(),p=(0,l.d4)(e=>e.library.localStyleSelection),u=r.useMemo(()=>p&&p.type===c&&d?.type===e3?(0,e1.QA)(p,d.data.uiList):[],[p,d,c]),m=r.useMemo(()=>(0,e1.Ug)(u).map(e=>e.node_id),[u]),y=m.length;return d&&m.length?r.createElement(e6,{styleRowRef:e,selectedItems:u,numStyles:y,dropdownShown:d,onEditStyle:t,onRenameItem:n,onCreateFolder:a,onDeleteItems:o,onCutItems:i,onPasteItems:s}):r.createElement("div",null)}function e6({styleRowRef:e,selectedItems:t,numStyles:n,dropdownShown:o,onEditStyle:i,onRenameItem:s,onCreateFolder:c,onDeleteItems:d,onCutItems:p,onPasteItems:u}){let m=(0,l.wA)();r.useEffect(()=>(a.glU.computePastableStyleCount(),()=>{a.glU.clearPastableStyleCount()}),[]);let y=(0,l.d4)(e=>e.mirror.appModel.pastableStyleCount),E=!!ep.q5()?.canEdit,g=r.useCallback(()=>{if(!t.length||t[0].type!==eg.PW.STYLE)return;let n=t[0];if(e){let t=e.getBoundingClientRect();m(es.rk({style:n,rowTop:t.top,rowLeft:t.left})),m(ea.XE())}i(n)},[m,t,i,e]),h=r.useCallback(()=>{if(!t.length||t[0].type===eg.PW.STYLE)return;let e=t[0];s(e.name,!1,e.styleTypeSection)},[s,t]);if(-1===y)return r.createElement("div",null);if(!E)return n>1?r.createElement("div",null):r.createElement(e4,{style:o.data.position,className:eO},r.createElement(e5,{recordingKey:"edit-style-option",onClick:g},(0,er.tx)("design_systems.styles.view_style")));let _=1===n&&(t[0].type===eg.PW.STYLE?r.createElement(e5,{recordingKey:"edit-style-option",onClick:g},(0,er.tx)("design_systems.styles.edit_style")):r.createElement(e5,{recordingKey:"rename-folder-option",onClick:h},(0,er.tx)("design_systems.styles.rename_folder")));return r.createElement(e4,{style:o.data.position,className:eO},r.createElement(e5,{recordingKey:"create-folder-option",onClick:c},(0,er.tx)("design_systems.styles.add_new_folder")),_,r.createElement(e5,{recordingKey:"delete-style-option",onClick:d},(0,er.tx)("design_systems.styles.delete_styles",{numStyles:n})),r.createElement(e2,null),r.createElement(e5,{recordingKey:"cut-style-option",onClick:p},(0,er.tx)("design_systems.styles.cut_styles",{numStyles:n})),!!y&&r.createElement(e5,{recordingKey:"paste-style-option",onClick:u},(0,er.tx)("design_systems.styles.paste_styles",{numStyles:y})))}var e9=n(662068),te=n(338581),tt=n(328753),tn=n(784708),tr=n(120022),tl=n(153332),ta=n(929717),to=n(505105),ti=n(608974),ts=n(257812),tc=n(319431),td=n(914110);let tp="local-style-creation-dropdown";function tu(){let e=(0,l.wA)(),t=(0,r.useContext)(to.lk),n=!(0,_.p8)("isReadOnly"),a=r.useRef(null),o=r.useRef(null),i=a.current,s=(0,e0.Um)(),c=s?.type===tp,d=s?.data?.targetRect,p="localStyleHeader",u=0===(0,R.Bs)().length,m=(0,l.d4)(e=>e.stylePreviewShown.isShown&&e.stylePreviewShown.isCreating),y=r.useMemo(()=>d||(c&&i?i.getBoundingClientRect():null),[d,i,c]),E=()=>{e(el.oB())},g=()=>{e(el.j7({type:tp}))},h=t=>{t.stopPropagation(),e(es.YG());let n=a.current;c?E():n&&((0,X.sx)("editor-local-styles-dropdown-show"),g())},f=e=>{E();let n=(0,eP.Zk)(e),r=o.current?.getBoundingClientRect();n&&r&&t({styleType:e,inheritStyleKeyField:n,rowLeft:r.left,rowTop:r.top})},b=u&&!c&&!m;return r.createElement(ef.fI,{className:b?"styles--panelHeaderRowFaded--pfgKz styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO draggable_list--panelHeaderRowFaded--kETRR":"styles--panelHeaderRow--Kxqgo styles--styleTypeSectionRow--wVTIO",ref:o},r.createElement(ef.xZ,{className:"styles--panelTitleText--v7gXm draggable_list--panelTitleText--SwKez",onMouseDown:e=>b&&h(e),onClick:e=>e.stopPropagation()},(0,er.tx)("design_systems.styles.local_styles")),n&&r.createElement(r.Fragment,null,r.createElement(ef.K0,{ref:a,onMouseDown:h,onClick:e=>e.stopPropagation(),className:c?"styles--stylesHeaderButtonHighlight--WTeWy raw_components--iconButtonSelected--bJibL raw_components--_iconButton---ybo6":"styles--stylesHeaderButton--jhpA5 draggable_list--addButton--D0q--","data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("design_systems.create_style.create_style"),recordingKey:Z.Pt(p,"addButton")},r.createElement(eI.U,{svg:eV.A,fallbackSvg:eU.A},r.createElement(e9.e,null))),c&&y&&r.createElement(ta.Cf,{targetRect:y,minWidth:128,disableDropdownScrollContainer:!0,propagateCloseClick:!0},eu.og.map(e=>{let{icon:t,label:n}=function(e){switch(e){case"TEXT":return{icon:r.createElement(eI.U,{svg:td.A},r.createElement(te.e,null)),label:(0,er.t)("design_systems.styles.dropdown.text")};case"FILL":return{icon:r.createElement(eI.U,{svg:ts.A},r.createElement(tt.G,null)),label:(0,er.t)("design_systems.styles.dropdown.fill")};case"GRID":return{icon:r.createElement(eI.U,{svg:tc.A},r.createElement(tn.E,null)),label:(0,er.t)("design_systems.styles.dropdown.grid")};case"EFFECT":return{icon:r.createElement(eI.U,{svg:ti.A},r.createElement(tr.n,null)),label:(0,er.t)("design_systems.styles.dropdown.effect")};default:throw(0,Q.j)(e),Error(`Invalid style type: ${e}`)}}(e),l=t=>{t.stopPropagation(),f(e)};return r.createElement(eZ.c$,{key:e,className:"styles--createStyleDropdownRow--7iCXQ",onClick:l,onPointerUp:l,recordingKey:Z.Pt(p,`dropdown-option-${e}`)},r.createElement(tl.Nu,null,t),n)}))))}let tm="collapsed-style-folders";function ty({scrollContainer:e,recordingKey:t}){let n=(0,R.Bs)(),l=(0,_.p8)("isReadOnly");return 0===n.length&&l?null:r.createElement(en.k,{name:"local_styles_panel"},r.createElement(ef.Zk,null,r.createElement(tE,{scrollContainer:e,recordingKey:t})))}function tE({scrollContainer:e,recordingKey:t}){let n=(0,l.wA)(),o=(0,l.d4)(e=>e.stylePreviewShown),i=(0,l.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),s=(0,l.d4)(e=>e.mirror.appModel.currentTool),c=r.useRef(null),d=(0,R.Bs)(),p=(0,l.d4)(e=>e.library.localStyleSelection),[u,m]=r.useState(null),[y,E]=r.useState(null),g=r.useRef(null),[h,_]=r.useState(!1),f=i===a.m1T.GRADIENT||i===a.m1T.RASTER||s===a.NLJ.DROPPER_COLOR;r.useEffect(()=>{let e=()=>{!f&&(n(eo.Bn(null)),o.isShown&&(n(es.sw()),a.glU.selectStyle($.n3.INVALID,$.IA.INVALID)))},t=(0,ec.ft)();return t?window.addEventListener("pointerdown",e):window.addEventListener("mousedown",e),()=>{t?window.removeEventListener("pointerdown",e):window.removeEventListener("mousedown",e)}},[n,o.isShown,f]);let{stylesByType:b,foldersAndStylesByType:S}=r.useMemo(()=>{let e=(0,eu.Kw)(d),t=new Map;return eu.og.map(n=>{let r=e.get(n);if(r){(0,eu.LX)(r);let e=(0,e1.lM)(r,n),l=(0,e1.l0)(e);t.set(n,l)}}),{stylesByType:e,foldersAndStylesByType:t}},[d]),T=r.useCallback(e=>{(0,Q.KF)(null!=e.content_hash,"style does not have a hash"),a.glU.selectStyleByGuid(e.node_id),n(eo.ay({isRenaming:!1})),(0,X.sx)("Style Inspected",{styleType:e.style_type,from:"styleListClick"})},[n]),v=r.useCallback((e,t,n)=>{m(t?e:null),E(t?null:{name:e,styleTypeSection:n})},[]),k=r.useCallback(e=>{if(!e){n(eo.Bn(null));return}let t=new Set;e.styleIds.forEach(n=>{let r=d.find(e=>e.type===eg.PW.STYLE&&e.node_id===n);if(!r)return;let l=(0,em.In)(r.name);e.folderNames.has(l)||t.add(n)});let r={type:e.type,folderNames:e.folderNames,styleIds:t};n(eo.Bn(r))},[n,d]),P=r.useCallback((e,t,n)=>{if(!p)return;let r=e[t],l=(e,t)=>{let r=(0,em.ke)(e.name),l=null!=t?t:r.length-1;r[l]=n;let o=(0,e1.Pc)(r.join("/"));j.l7.user("rename-style",()=>a.glU.renameNode(e.node_id,o))};if(r.name!==n){if(r.type===eg.PW.STYLE)l(r);else{(0,e1.mx)(t,e).forEach(t=>{let n=e[t];n.type===eg.PW.STYLE&&l(n,r.level-1)});let a=new Set(p.folderNames);a.delete(r.name);let o=(0,em.In)(r.name)+"/"+n;a.add(o),k({type:p.type,folderNames:a,styleIds:p.styleIds})}}ed.Y5.triggerAction("commit"),m(null),E(null)},[p,k]),I=r.useCallback((e,t)=>{t.preventDefault(),t.stopPropagation(),n(el.j7({type:e3,data:{uiList:e,position:{top:t.clientY,left:Math.min(t.clientX,window.innerWidth-e7)}}}))},[n]),N=r.useCallback(e=>{g.current=e},[]),w=r.useCallback(()=>{_(!0)},[]),C=r.useCallback(()=>{_(!1)},[]);return r.createElement("div",{className:"styles--localStylesPanel--T4Gqs",ref:c},r.createElement(tu,null),eu.og.map(n=>{let l=b.get(n);if(!l)return;let a=S.get(n);if(a)return r.createElement(tg,{key:n,recordingKey:Z.Pt(t,`style-section-${n}`),styleType:n,storedStyleList:l,styleList:a,updateSelection:k,isDragging:h,onDragStart:w,onDragEnd:C,onInspectStyle:T,onContextMenu:I,updateContextMenuStyleRef:N,renamingStyleID:u,renamingFolder:y,onRenameItem:v,stopRenamingItem:P,styleRowRef:g.current,onEditStyle:T,scrollContainer:e})}))}function tg({styleType:e,storedStyleList:t,styleList:n,renamingStyleID:o,renamingFolder:i,onRenameItem:s,stopRenamingItem:c,onDragStart:d,onDragEnd:p,onInspectStyle:u,onContextMenu:y,updateContextMenuStyleRef:E,updateSelection:g,styleRowRef:h,scrollContainer:f,recordingKey:b}){let S=(0,ep.q5)(),T=!(0,_.p8)("isReadOnly"),v=(0,l.wA)(),k=(0,l.d4)(e=>e.stylePreviewShown),P=(0,m.GS)(),I=(0,l.d4)(t=>(0,ey.i4)(t,e)),N=(0,l.d4)(t=>(0,ey.A7)(t,e,n)),[w,C]=r.useState(()=>{if(et.x4&&S){let t=JSON.parse(et.x4.getItem(tm)||"{}");if(S.key in t){let n=t[S.key];if(e in n)return new Set(n[e])}else t[S.key]={},et.x4.setItem(tm,JSON.stringify(t))}return new Set(n.filter(e=>"STYLE_FOLDER"===e.type).map(e=>e.name))}),[A,R]=r.useState([]),[O,L]=r.useState(null),[x,M]=r.useState(null),F=r.useMemo(()=>(0,z.s)(()=>{v(ei.GT({styleType:e}))},200),[v,e]);r.useEffect(()=>{F()},[F,n]);let K=(0,J.ZC)(w);r.useEffect(()=>{if(!K||!et.x4||!S||(0,ee._f)(K,w))return;let t=JSON.parse(et.x4.getItem(tm)||"{}"),n=t[S.key];n&&(n[e]=[...w],et.x4.setItem(tm,JSON.stringify(t)))},[w,S,K,e]);let D=r.useCallback(e=>!!e&&"STYLE_FOLDER"===e.type,[]),V=r.useCallback((e,t)=>{let r=new Set(e),l=[];n.forEach((e,t)=>{if(r.has(e)&&(l.push(t),"STYLE_FOLDER"===e.type)){let e=(0,e1.mx)(t,n);l.push(...e)}});let a=new Set(l),o=t?n.indexOf(t):n.length,i=[...(0,W.y1)(o).filter(e=>!a.has(e)),...l,...(0,W.y1)(o,n.length).filter(e=>!a.has(e))],s=new Map;return i.forEach((e,t)=>{e!==t&&s.set(e,t)}),s},[n]),U=r.useCallback(()=>{k.isShown&&(v(es.sw()),v(ea.XE()),a.glU.selectStyle($.n3.INVALID,$.IA.INVALID))},[v,k.isShown]),B=r.useMemo(()=>{if(!O)return null;if("in"===O.type){let e=n[O.index];return e?{folderNameToNestUnder:e.name,dividerStyles:{display:"none"}}:null}if(null==O.index||null==x||!I)return null;let e=(0,e1.QA)(I,n),t=e[0],r=null,l=null;if(0===O.index?l=n[O.index]:O.index===n.length?r=n[O.index-1]:(r=n[O.index-1],l=n[O.index]),r?.type==="STYLE_FOLDER"&&w.has(r.name)&&-1===A.indexOf(r.name))return{folderNameToNestUnder:r.name,dividerStyles:{display:"none"}};if(r?.type===eg.PW.STYLE){let e=(0,em.In)(r.name).split("/");for(let n=0;n<e.length;n++){let r=e.slice(0,n+1).join("/");if(w.has(r)&&-1===A.indexOf(r)){if("STYLE_FOLDER"!==t.type)return{folderNameToNestUnder:r,dividerStyles:{display:"none"}};return{folderNameToNestUnder:(0,em.In)(r),dividerStyles:{marginLeft:24*Math.min((0,em.ke)(r).length,8)-8}}}}}let a=0,o=null,i=r?(0,e1.rM)(r):0,s=l?(0,e1.rM)(l):0;if(i<=s)a=s,o=r?r.type===eg.PW.STYLE?(0,em.In)(r.name):r.name:"";else if((0,Q.KF)(null!=r,"Dragging after an item that doesn't exist"),t.type===eg.PW.STYLE||x>=.5)a=i,o=(0,em.In)(r.name);else{let e=Math.floor(x/.5*(0,e1.rM)(r));e=Math.max(s-1,e),o=(0,em.ke)((0,em.In)(r.name)).slice(0,e).join("/"),a=e+1}let c={marginLeft:24*Math.min(a,8)-8};return r&&e.includes(r)||!(0,e1.Md)(r,t,l)?{folderNameToNestUnder:null,dividerStyles:c}:{folderNameToNestUnder:o,dividerStyles:c}},[w,x,I,O,n,A]),G=r.useCallback((r,l,a,o)=>{if(!t||!l&&!a||!B)return;let i=B.folderNameToNestUnder;if(null===i)return;let s=[],c=[];r.forEach(e=>{(0,e1.Md)(l,e,a,i)&&("STYLE_FOLDER"===e.type?c.push(e):s.push(e))});let d=s.concat(c);if(!d.length)return;let p=j.l7.user("reorder-styles",()=>(0,e1.VB)(d,l,a,i,n,t,o||!1)),u=new Set,m=new Set;d.forEach(e=>{let t=(0,e1.t_)(e),n=p?.get(t);n&&("STYLE_FOLDER"===e.type?u.add(n):m.add(t))}),g({type:e,folderNames:u,styleIds:m});let y=new Set;return w.forEach(e=>{if(i.startsWith(e))return;let t=p?.get(e);t?y.add(t):y.add(e)}),C(y),U(),o||ed.Y5.triggerAction("commit"),V(d,a)},[g,w,B,V,U,t,n,e]),Y=r.useCallback((e,t)=>{if("STYLE_FOLDER"!==t.type)return;let r=n.indexOf(t),l=(0,e1.dm)(t).filter(e=>(0,em.In)(e.name)===t.name);if(!l.length)return G(e,t,n[r+1]);{let t=l[l.length-1],r=n.indexOf(t);return G(e,t,n[r+1])}},[G,n]),H=(0,q.xx)((e,t)=>{let r=new Map,l=t.map(e=>e.type===eg.PW.STYLE?e.node_id:e.name);return e.forEach(e=>{let a=l.indexOf(e);-1!==a&&(0,e1.mx)(a,n).forEach(e=>{let n=t[e],l="STYLE_FOLDER"===n.type?n.name:n.node_id,a=r.get(l);a||(a=0),r.set(l,a+1)})}),r}),X=r.useCallback(()=>{if(!I)return;let t=(0,e1.QA)(I,n);if(0===t.length)return;let r=t[0],l=n.indexOf(r),o=l,i=l+1;if(r.type===eg.PW.STYLE&&n[i]&&n[i].type===eg.PW.STYLE){let e=(0,e1.rM)(r);for(let t=l+1;t<n.length;t++){let r=n[t];if("STYLE_FOLDER"===r.type&&r.level===e||(0,e1.rM)(r)<e){o=t-1,i=t;break}t===n.length-1&&(o=t,i=t+1)}}G(t,n[o],n[i],!0);let c=(0,em.In)(r.name),d=P?(0,er.t)("design_systems.create_style.new_folder"):(0,er.t)("design_systems.create_style.untitled_folder");c&&(d=`${c}/${d}`);let p=(e,t)=>{if(e.type===eg.PW.STYLE){let n=d+"/"+t+(0,em.kH)(e.name);j.l7.user("rename-style",()=>{a.glU.renameNode(e.node_id,n)})}else{let n=t+(0,em.kH)(e.name)+"/";e.styles.forEach(e=>{p(e,n)}),e.subfolders.forEach(e=>{p(e,n)})}};t.forEach(e=>{p(e,"")}),g({type:e,folderNames:new Set([d]),styleIds:new Set}),s(d,!1,e)},[g,G,P,I,s,n,e]),en=r.useCallback((e,t)=>{let r=n[e];"STYLE_FOLDER"===r.type&&C(e=>{let n=new Set(e);return t?n.add(r.name):n.delete(r.name),n})},[n]),el=r.useCallback((e,t)=>{C(r=>{let l=new Set(r),a=n[e];if("STYLE_FOLDER"===a.type){let e=(0,em.In)(a.name),n=""===e?t:e+"/"+t;w.has(a.name)&&(w.delete(a.name),w.add(n)),(0,e1.KU)(a).forEach(e=>{if(w.has(e.name)){let t=e.name.replace(a.name,"");w.add(n+t),w.delete(e.name)}})}return l}),c(n,e,t)},[c,w,n]),eo=r.useCallback(e=>{y(n,e)},[y,n]),ec=r.useCallback((e,t,n)=>{let r=t>.5?1:Math.round(1e3*t)/1e3;L({index:e,type:n?"in":"before"}),M(r)},[]),eu=r.useCallback(()=>{C(e=>j.l7.user("delete-styles",()=>{let t=new Set(e);return(I?(0,e1.QA)(I,n):[]).forEach(e=>{"STYLE_FOLDER"===e.type?((0,e1.a2)(e,S?.key||null),w.delete(e.name),(0,e1.KU)(e).forEach(e=>w.delete(e.name))):(0,e1.Nr)(e,S?.key||null)}),t})),ed.Y5.triggerAction("commit"),k.isShown&&(v(es.sw()),v(ea.XE()),a.glU.selectStyle($.n3.INVALID,$.IA.INVALID)),g(null)},[k.isShown,g,I,n,S?.key,w,v]),e_=r.useMemo(()=>{let e=I?(0,e1.QA)(I,n):[];return(0,e1.Ug)(e).map(e=>e.node_id)},[I,n]),ef=r.useCallback(()=>{j.l7.user("cut-styles",()=>a.glU.cutStyles(e_))},[e_]),eb=r.useCallback((e,t)=>{t===eE.zy.PASTE?j.l7.user("paste-styles",()=>a.glU.pasteStyles()):e.shouldPropagate=!0},[]);r.useEffect(()=>{if(!I)return;let e=e=>{e.target&&("INPUT"===e.target.tagName||"TEXTAREA"===e.target.tagName)||ef()};return document.addEventListener("cut",e),()=>{document.removeEventListener("cut",e)}},[ef,I]);let eS=r.useCallback(()=>{a.glU.pasteStyles()},[]),eT=r.useCallback(e=>{R(t=>[...t,e])},[]),ev=r.useCallback(()=>{d()},[d]),ek=Z.rf(b,"ondragend",r.useCallback(()=>{L(null),M(null),R([]),p()},[p])),eP=(0,J.ZC)(I);r.useEffect(()=>{eP!==I&&I&&C(e=>{let n=new Set(e);for(let e of I.styleIds.values()){let r=t.find(t=>t.node_id===e);if(!r)continue;let l=(0,em.ke)(r.name);for(let e=0;e<l.length;e++){let t=l.slice(0,e).join("/");n.delete(t)}}return n})},[I,eP,t]);let eI=r.useRef(null),eN=r.useCallback(e=>{eI.current=e},[eI]),ew=r.useMemo(()=>I?(0,e1.h$)(I,n):[],[I,n]),eC=r.useMemo(()=>N?(0,e1.h$)(N,n):[],[N,n]),eA=r.useMemo(()=>[...ew,...eC].sort((e,t)=>e-t),[ew,eC]),eR=r.useCallback((e,t,l,a,c,d)=>{let p="STYLE_FOLDER"===e.type?e.name:e.node_id,m=!1,y=!1;for(let t of A)if("STYLE_FOLDER"===e.type){if(e.name===t){y=!0;break}e.name.startsWith(t)&&(m=!0)}else if((0,em.In)(e.name)===t){m=!0;break}if(!y&&!m&&H(w,n).has(p))return null;let h=eA&&eA[eA.length-1]===t,_=eA&&eA[0]===t;if(e.type===eg.PW.STYLE){let n=(0,e1.rM)(e),i=null!=o&&o===e.node_id;return r.createElement(eX,{hideStylePreview:U,recordingKey:`style-row-${t}`,index:t,key:e.node_id,isDragging:a,dsStyle:e,selected:l,selectedSecondary:N?.styleIds.has(e.node_id)||!1,level:n,stylePreviewShown:k,onContextMenu:eo,updateContextMenuStyleRef:E,updateFocusRowRef:l?eN:null,onMouseDown:c,onMouseMove:d,onInspectStyle:u,updateSelection:g,isEditable:T,deleteSelectedItems:eu,isRenaming:i,onRenameItem:s,stopRenamingItem:el,onCreateFolder:X,isLastChildOfSelection:h})}{let n=null!=i&&i.name===e.name&&i.styleTypeSection===e.styleTypeSection,o=B?.folderNameToNestUnder||null;return r.createElement(eB,{recordingKey:`folder-section-${e.styleTypeSection}-row-${t}`,key:t,index:t,isDragging:a,folder:e,selected:l,selectedSecondary:N?.folderNames.has(e.name)||!1,isCollapsed:w.has(e.name),temporarilyExpandFolder:eT,isTemporarilyExpanded:y,isRenaming:n,folderNameToNestUnder:o,onRenameItem:s,stopRenamingItem:el,level:e.level,toggleFolder:e=>en(t,e),onContextMenu:eo,onCreateFolder:X,onMouseDown:c,onMouseMove:d,isEditable:T,deleteSelectedItems:eu,hideStylePreview:U,isFirstChildOfSelection:_})}},[g,eA,w,eu,B?.folderNameToNestUnder,H,U,eo,X,u,s,i,o,N?.folderNames,N?.styleIds,el,n,k,eT,A,en,E,T,eN]),eO=r.useCallback(t=>{let r=new Set,l=new Set;t.forEach(e=>{let t=n[e];"STYLE_FOLDER"===t.type?r.add(t.name):l.add(t.node_id)}),g({type:e,folderNames:r,styleIds:l})},[g,n,e]),eL=r.useRef(),ex=r.useRef();return r.useEffect(()=>{eL.current&&ew.length?(eL.current(),eI.current&&!eI.current.contains(document.activeElement)&&eI.current.focus()):ex.current&&!ew.length&&(ex.current(),eI.current=null)},[eL,ew,eI]),r.createElement(eh.vL,{name:"StyleDraggableList",handleClipboard:eb,focusFunctionRef:eL,blurFunctionRef:ex},r.createElement(eJ,{styleType:e},r.createElement(th,{recordingKey:"style-draggable-list",listItems:n,onInsertItemsIn:Y,canInsertItemsIn:D,onInsertItemsBetweenValues:G,onDrag:ec,onDragStart:ev,onDragEnd:ek,insertDividerStyle:B?.dividerStyles,selectedIndices:ew,updateSelection:eO,renderListItem:eR,scrollContainer:f,isDragDisabled:!T}),r.createElement(e8,{styleRowRef:h,onDeleteItems:eu,onCutItems:ef,onPasteItems:eS,onRenameItem:s,onEditStyle:u,onCreateFolder:X,styleType:e})))}let th=e_.q;var t_=n(274087),tf=n(118093),tb=n(849414),tS=n(136051),tT=n(475762),tv=n(914967);function tk(e){let t=(0,tT.t)();return e.readOnly?r.createElement(tv.lc,{...e}):t.nodesAreAllInsideStacks&&"AUTO"===t.stackPositioning?null:r.createElement(ef.Zk,null,r.createElement(ef.fI,null,r.createElement(ef.xw,{extended:!0},(0,er.tx)("fullscreen.properties_panel.constraints_panel.constraints"))),r.createElement(tv.lc,{...e}))}function tP(e){return r.createElement(en.k,{name:"constraints_panel"},r.createElement(tk,{...e}))}var tI=n(991509),tN=n(471961),tw=n(104384),tC=n(121516),tA=n(263205),tR=n(834061),tO=n(878075),tL=n(921976),tx=n(540339),tM=n(987908),tF=n(154170),tK=n(172601),tD=n(190773),tV=n(520244),tU=n(265851),tB=n(955301),tG=n(442133);function tY({recordingKey:e,numSelected:t}){let n=(0,m.GS)(),l=t??1,o=()=>{a.glU.upgradeToLatestVectorOperationVersion()},i=(0,er.tx)("fullscreen.properties_panel.vector_operation.update_text",{numNodes:l}),s=(0,er.tx)("fullscreen.properties_panel.vector_operation.update_button",{numNodes:l});return r.createElement(ef.Zk,null,r.createElement("p",{className:tU.s.pl16.pr16.mb12.font11.$},i),n?r.createElement(tG.Ad,{label:null,input:r.createElement(tV.$n,{variant:"secondary",onClick:o,recordingKey:Z.Pt(e,"updateBoolean")},s)}):r.createElement(tB.z,{onClick:o,recordingKey:Z.Pt(e,"updateBooleanUI2")},s))}var tH=n(62791),tQ=n(515662),tz=n(870346),tW=n(614010);function t$(e){return e.modalShown?.type===tW.y.type||e.modalShown?.prevModal?.type===tW.y.type}function tj(){let e=(0,tz.n)({type:tW.y}),t=(0,r.useCallback)(()=>{e()},[e]),n=(0,l.d4)(t$),a=0===(0,tQ.Rb)().length&&!n;return r.createElement(en.k,{name:"local_variables_panel"},r.createElement(ef.Zk,null,r.createElement(ef.fI,{className:a?"local_variables_panel--localVariablesPanelRowFaded--atToe local_variables_panel--localVariablesPanelRow--zR8nJ draggable_list--panelHeaderRowFaded--kETRR":"local_variables_panel--localVariablesPanelRow--zR8nJ"},r.createElement(ef.xZ,{className:"local_variables_panel--titleText--7rdD7 draggable_list--panelTitleText--SwKez",onClick:t,"data-onboarding-key":"local-variables-panel-title"},(0,er.tx)("variables.local_variables_panel.local_variables_title")),r.createElement(tH.E,{name:"variables_modal_button"},r.createElement(eG.d,{onClick:t,recordingKey:(0,Z.Pt)("localVariablesPanel","variablesModalButton"),"aria-expanded":n,"aria-label":(0,er.t)("variables.local_variables_panel.open_variables_button_tooltip"),htmlAttributes:{"data-tooltip":(0,er.t)("variables.local_variables_panel.open_variables_button_tooltip"),"data-tooltip-type":eN.Ib.TEXT}},r.createElement(eI.U,{svg:ej.A},r.createElement(eY.A,null)))))))}var tX=n(453557);function tJ({allSavedPlugins:e,colorFormat:t,dropdownShown:n,library:o,localPlugins:i,modalShown:c,openFile:d,orgEntity:p,pickerInStyleCreationShown:u,pickerShown:m,publishedPlugins:y,saveAsState:E,sceneGraphSelection:g,scrollContainer:h,shownPanels:_,strokePanelMode:f,strokePanelTerminalPointCount:b,stylePickerListLayout:S,stylePickerShown:v}){let k=(0,l.wA)(),P=(0,w.useAtomValue)(A.b),I=(0,tM.qh)(),{numSelected:N,stateGroupSelectionInfo:C}=(0,G.fC)("numSelected","stateGroupSelectionInfo"),O=(0,V.So)(_,!1),{maskType:x,exportSettings:M}=(0,G.zj)("maskType","exportSettings"),K=(0,tN.hD)(),D=(0,V.SQ)(),Q=(0,G.tN)("areOnlyResponsiveSetsSelected"),{pluginRelaunchData:z,numSelected:W}=(0,G.DQ)("pluginRelaunchData","numSelected"),$=(0,V.SJ)(),j=(0,l.d4)(e=>e.mirror.appModel);return r.createElement(L.i,null,0===Object.keys(g).length&&r.createElement(tf.Mw,{panelName:tf.ON.DESIGN}),(0,V.d6)(_)&&r.createElement(t_.AV,{recordingKey:"alignPanel"}),r.createElement(F.VF,{isVisible:_[a.ibQ.TRANSFORM_ITEM]},()=>r.createElement(tD.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:P,pickerShown:m,openFileKey:d?.key||null,canEditConstraints:(0,V.GG)(_),onlyShowXYInputsRow:P===R.GR.DEFAULT_SIMPLIFIED||((Q&&(0,U.hS)(Q))??!1)})),r.createElement(F.VF,{isVisible:D},()=>r.createElement(tY,{key:"vectorOperation",recordingKey:"vectorOperationPanel",numSelected:N})),r.createElement(R.F$,{isVisible:_[a.ibQ.SCALE_ITEM]}),r.createElement(tI.Q,{selection:g,shownPanels:_,scaleShouldHideOtherPanels:(0,V.NR)(_)}),r.createElement(F.VF,{isVisible:_[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tK.r,{key:"template"})),r.createElement(F.VF,{isVisible:_[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tX.$,{key:"templateProperties",recordingKey:"templatePropsPanel"})),r.createElement(F.VF,{isVisible:_[a.ibQ.COMPONENT_ITEM]},()=>r.createElement(tS.cu,{key:"component",recordingKey:"componentPanel"})),r.createElement(F.VF,{isVisible:(0,V.tV)(_,C)},()=>r.createElement(H.BS,{key:"componentProperties",recordingKey:"propsPanel"})),r.createElement(F.VF,{isVisible:(0,V.M0)(_)},()=>r.createElement(tw._,{key:"instance",recordingKey:"instancePanel"})),r.createElement(F.VF,{isVisible:_[a.ibQ.VECTOR_ITEM]},()=>r.createElement(tD.Ss,{key:"vector-transform",recordingKey:"vectorTransformPanel",isUI3:!1,useContextualSelectionProperties:!0,dispatch:k,dropdownShown:n})),r.createElement(F.VF,{isVisible:O},()=>r.createElement(tF.Vy,{key:"stack",onlyShowResizingRow:!1,onlyStacksSelected:!!_[a.ibQ.STACK_ITEM],recordingKey:"stackPanel"})),r.createElement(F.VF,{isVisible:(0,V.GG)(_)},()=>r.createElement(tP,{key:"constraints",openFileKey:d?.key||null,dropdownShown:n,recordingKey:"constraintsPanel"})),r.createElement(F.VF,{isVisible:_[a.ibQ.MASK_ITEM]},()=>r.createElement(tR.B,{key:"mask",maskType:x,dispatch:k,dropdownShown:n,recordingKey:"maskPanel"})),r.createElement(F.VF,{isVisible:_[a.ibQ.GRIDS_ITEM]},()=>r.createElement(R.tC,{key:"grids"})),r.createElement(F.VF,{isVisible:_[a.ibQ.LAYER_ITEM]},()=>r.createElement(tA.s,{key:"layer",recordingKey:"layerPanel"})),r.createElement(F.VF,{isVisible:_[a.ibQ.TYPE_ITEM]},()=>r.createElement(R.gc,{key:"type"})),r.createElement(F.VF,{isVisible:_[a.ibQ.CANVAS_ITEM]},()=>r.createElement(tb.v,{key:"canvas-background",dispatch:k,dropdownShown:n,modalShown:c,pickerShown:m,colorFormat:t,library:o,openFile:d,recordingKey:"canvasBackgroundPanel",defaultColor:B.rC,sceneGraphSelection:g,hasExports:!!M&&(0,U._W)(M,[]).length>0})),r.createElement(F.VF,{isVisible:_[a.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>r.createElement(tL.C,{key:"remove-group-fill-stroke"})),r.createElement(F.VF,{isVisible:_[a.ibQ.FILL_ITEM]},()=>r.createElement(R.B8,{key:"fill",variableScopes:I})),r.createElement(F.VF,{isVisible:_[a.ibQ.STROKE_ITEM]},()=>r.createElement(tO.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:v,strokePanelMode:f,strokePanelTerminalPointCount:b,dispatch:k,dropdownShown:n,modalShown:c,pickerShown:m,pickerInStyleCreationShown:u,stylePickerListLayout:S,colorFormat:t,defaultColor:B.Em,library:o,sceneGraphSelection:g,openFile:d,isPanelBodyCollapsedAtom:null})),r.createElement(F.VF,{isVisible:$},()=>r.createElement(tO.UA,{key:"selection-paints",recordingKey:"selectionPaintsPanel",dispatch:k,dropdownShown:n,sceneGraphSelection:g,pickerShown:m,stylePickerListLayout:S,colorFormat:t,defaultColor:B.rC,library:o,openFile:d,isUI3:!1})),r.createElement(F.VF,{isVisible:_[a.ibQ.EFFECTS_ITEM]},()=>r.createElement(R.w5,{key:"effects"})),r.createElement(F.VF,{isVisible:(0,V.ji)(_,j,g)},()=>r.createElement(tj,{key:"local-variables"})),r.createElement(F.VF,{isVisible:(0,V.ww)(_,g)},()=>r.createElement(ty,{key:"local-styles",recordingKey:"local-styles",scrollContainer:h})),r.createElement(F.VF,{isVisible:(0,V.P1)(_,d)},()=>r.createElement(tN.LI,{key:"export",recordingKey:"exportsPanel",openFile:d,singleNodeName:K,numSelected:N,exportSettings:M,sceneGraphSelection:g,isSelectionRenamable:tN.LI.isSelectionRenamable(Object.keys(g)),currentPage:(0,Y.Nf)(j),dispatch:k,dropdownShown:n,currentSelectedProperty:j.currentSelectedProperty,pickerShown:m,saveAsState:E,panelWidth:V.iP})),r.createElement(F.VF,{isVisible:!(0,V.NR)(_)},()=>r.createElement(tx.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:z,localPlugins:i,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:p,dispatch:k,openFileKey:d?.key||null,editorType:d?.editorType?(0,T.wN)(d.editorType):null,numSelected:W??0})),(0,s.kc)().jsx_debugging&&r.createElement(tC.A,{recordingKey:"jsxDebugPanel"}))}var tq=n(606897),tZ=n(636609),t0=n(873706),t1=n(360914);function t4({allSavedPlugins:e,colorFormat:t,dropdownShown:n,library:o,localPlugins:i,modalShown:c,openFile:d,orgEntity:p,pickerInStyleCreationShown:u,pickerShown:m,publishedPlugins:y,saveAsState:E,sceneGraphSelection:g,scrollContainer:h,shownPanels:f,strokePanelMode:b,strokePanelTerminalPointCount:S,stylePickerListLayout:v,stylePickerShown:k}){let P=(0,l.wA)(),I=(0,w.useAtomValue)(A.b),N=(0,tM.qh)(),C=(0,V.SQ)(),O=(0,V.So)(f,!0),x=(0,V.KY)("SYMBOL"),M=(0,tN.hD)(),K=(0,G.kl)("exportSettings"),{numSelected:D,stateGroupSelectionInfo:Y}=(0,G.fC)("numSelected","stateGroupSelectionInfo"),{areOnlyResponsiveSetsSelected:Q,maskType:z}=(0,G.pw)("areOnlyResponsiveSetsSelected","maskType"),{numSelected:W,pluginRelaunchData:$}=(0,G.DQ)("pluginRelaunchData","numSelected"),j=(0,_.p8)("currentPage"),X=(0,_.p8)("currentSelectedProperty"),J=(0,V.Ws)(f,g),q=(0,V.SJ)();return r.createElement(L.i,null,0===Object.keys(g).length&&r.createElement(tf.Mw,{panelName:tf.ON.DESIGN}),r.createElement(t1._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:(0,V.tV)(f,Y),shouldShowInstancePanel:(0,V.M0)(f),shouldShowVectorOperationPanel:C}),r.createElement(F.VF,{isVisible:C},()=>r.createElement(tY,{key:"vectorOperation",recordingKey:"vectorOperationPanel",numSelected:D})),r.createElement(F.VF,{isVisible:(0,V.tV)(f,Y)},()=>r.createElement(H.BS,{key:"componentProperties",recordingKey:"propsPanel"})),r.createElement(F.VF,{isVisible:f[a.ibQ.COMPONENT_ITEM]},()=>r.createElement(tS.cu,{key:"component",recordingKey:"componentPanel"})),r.createElement(F.VF,{isVisible:(0,V.M0)(f)},()=>r.createElement(tw._,{key:"instance",recordingKey:"instancePanel"})),r.createElement(F.VF,{isVisible:x},()=>r.createElement(tZ.fZ,{key:"hoistedStackLayoutPanel"})),r.createElement(F.VF,{isVisible:(0,V.d6)(f)||f[a.ibQ.TRANSFORM_ITEM]},()=>r.createElement(tD.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:I,pickerShown:m,openFileKey:d?.key||null,canEditConstraints:(0,V.GG)(f),onlyShowXYInputsRow:I===R.GR.DEFAULT_SIMPLIFIED||((Q&&(0,U.hS)(Q))??!1)})),r.createElement(F.VF,{isVisible:O},()=>r.createElement(tF.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:I===R.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:!!f[a.ibQ.STACK_ITEM]})),r.createElement(R.F$,{isVisible:f[a.ibQ.SCALE_ITEM]}),r.createElement(tI.Q,{selection:g,shownPanels:f,scaleShouldHideOtherPanels:(0,V.NR)(f)}),r.createElement(F.VF,{isVisible:f[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tK.r,{key:"template"})),r.createElement(F.VF,{isVisible:f[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tX.$,{key:"templateProperties",recordingKey:"templatePropsPanel"})),r.createElement(F.VF,{isVisible:f[a.ibQ.VECTOR_ITEM]},()=>r.createElement(tD.Ss,{isUI3:!0,key:"vector-transform",recordingKey:"vectorTransformPanel",dispatch:P,dropdownShown:n})),r.createElement(F.VF,{isVisible:f[a.ibQ.MASK_ITEM]},()=>r.createElement(tR.B,{key:"mask",recordingKey:"maskPanel",maskType:z,dispatch:P,dropdownShown:n})),r.createElement(F.VF,{isVisible:f[a.ibQ.LAYER_ITEM]},()=>r.createElement(t0.X,{recordingKey:"appearancePanel"})),r.createElement(F.VF,{isVisible:f[a.ibQ.TYPE_ITEM]},()=>r.createElement(R.gc,{key:"type"})),r.createElement(F.VF,{isVisible:f[a.ibQ.CANVAS_ITEM]},()=>r.createElement(tb.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",dispatch:P,dropdownShown:n,modalShown:c,pickerShown:m,colorFormat:t,library:o,openFile:d,defaultColor:B.rC,sceneGraphSelection:g,hasExports:!!K&&(0,U._W)(K,[]).length>0})),r.createElement(F.VF,{isVisible:f[a.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>r.createElement(tL.C,{key:"remove-group-fill-stroke"})),r.createElement(F.VF,{isVisible:f[a.ibQ.FILL_ITEM]},()=>r.createElement(R.B8,{key:"fill",variableScopes:N})),r.createElement(F.VF,{isVisible:f[a.ibQ.STROKE_ITEM]},()=>r.createElement(tO.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:k,strokePanelMode:b,strokePanelTerminalPointCount:S,dispatch:P,dropdownShown:n,modalShown:c,pickerShown:m,pickerInStyleCreationShown:u,stylePickerListLayout:v,colorFormat:t,defaultColor:B.Em,library:o,sceneGraphSelection:g,openFile:d,isPanelBodyCollapsedAtom:null})),(0,tq.m)().ce_il_array&&r.createElement(F.VF,{isVisible:f[a.ibQ.TRANSFORM_MODIFIERS_ITEM]},()=>r.createElement(R.sX,{key:"transformModifiers"})),r.createElement(F.VF,{isVisible:f[a.ibQ.EFFECTS_ITEM]},()=>r.createElement(R.w5,{key:"effects"})),r.createElement(F.VF,{isVisible:q},()=>r.createElement(tO.UA,{isUI3:!0,key:"selection-paints",recordingKey:"selectionPaintsPanel",dispatch:P,dropdownShown:n,sceneGraphSelection:g,pickerShown:m,stylePickerListLayout:v,colorFormat:t,defaultColor:B.rC,library:o,openFile:d})),r.createElement(F.VF,{isVisible:J},()=>r.createElement(tj,{key:"local-variables"})),r.createElement(F.VF,{isVisible:(0,V.ww)(f,g)},()=>r.createElement(ty,{key:"local-styles",recordingKey:"local-styles",scrollContainer:h})),r.createElement(F.VF,{isVisible:f[a.ibQ.GRIDS_ITEM]},()=>r.createElement(R.tC,{key:"grids"})),r.createElement(F.VF,{isVisible:(0,V.P1)(f,d)},()=>r.createElement(tN.LI,{key:"export",recordingKey:"exportsPanel",openFile:d,singleNodeName:M,numSelected:D,exportSettings:K,isSelectionRenamable:tN.LI.isSelectionRenamable(Object.keys(g)),sceneGraphSelection:g,currentPage:j,dispatch:P,dropdownShown:n,currentSelectedProperty:X,pickerShown:m,saveAsState:E,panelWidth:V.iP})),r.createElement(F.VF,{isVisible:!(0,V.NR)(f)},()=>r.createElement(tx.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:$,localPlugins:i,publishedPlugins:y,allSavedPlugins:e.plugins,orgEntity:p,dispatch:P,openFileKey:d?.key||null,editorType:d?.editorType?(0,T.wN)(d.editorType):null,numSelected:W??0})),(0,s.kc)().jsx_debugging&&r.createElement(tC.A,{recordingKey:"jsxDebugPanel"}))}function t5(e){let t=(0,l.wA)(),n=(0,m.GS)(),o=(0,M.iZ)(),i=(0,V.Dj)(o),s=(0,b.J2)((0,E.UK)().expandedFramePresetType);return(((0,O.Im)(e.shownPanels)||Object.keys(e.shownPanels).every(t=>!e.shownPanels[parseInt(t)]))&&!window.figmaPerfTesting&&!(0,c.Lg)()&&!(0,c.nl)()&&(0,x.x1)("PropertiesPanel","Rendering design tab with no shownPropertiesPanels",{isEmpty:(0,O.Im)(e.shownPanels),shouldRenderInspectTab:i}),e.shownPanels[a.ibQ.FRAME_PRESETS])?r.createElement(L.i,null,r.createElement(F.VF,{isVisible:!0},()=>r.createElement(K.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:t,expandedFramePresetType:s}))):e.shownPanels[a.ibQ.PENCIL_TOOL]?r.createElement(L.i,null,r.createElement(F.VF,{isVisible:!0},()=>r.createElement(D.q,{key:"pencilToolPanel",recordingKey:"pencilToolPanel",id:"pencilToolPanel",openFile:e.openFile}))):n?r.createElement(t4,{...e}):r.createElement(tJ,{...e})}var t2=n(217950),t3=n(550479),t7=n(666055);function t8({allSavedPlugins:e,colorFormat:t,dropdownShown:n,library:o,localPlugins:i,modalShown:s,openFile:c,orgEntity:d,pickerInStyleCreationShown:p,pickerShown:u,publishedPlugins:m,saveAsState:y,sceneGraphSelection:E,shownPanels:g,strokePanelMode:h,strokePanelTerminalPointCount:f,stylePickerListLayout:b,stylePickerShown:S}){let v=(0,l.wA)(),[k,P]=(0,w.useAtom)(A.b),I=(0,tM.qh)(),N=(0,tN.hD)(),C=(0,G.kl)("exportSettings"),O=(0,G.Gt)("numSelected"),{maskType:x}=(0,G.pw)("maskType"),{pluginRelaunchData:M,numSelected:K}=(0,G.DQ)("pluginRelaunchData","numSelected"),D=(0,V.So)(g,!1),Y=(0,_.s6)("currentPage","currentSelectedProperty");return r.createElement(L.i,null,(0,V.d6)(g)&&r.createElement(t_.AV,{recordingKey:"alignPanel"}),r.createElement(F.VF,{isVisible:!0},()=>r.createElement(tD.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:k,pickerShown:u,openFileKey:c?.key||null,canEditConstraints:!1,onlyShowXYInputsRow:!1})),r.createElement(R.F$,{isVisible:g[a.ibQ.SCALE_ITEM]}),r.createElement(F.VF,{isVisible:!(0,V.NR)(g)},()=>r.createElement(tw._,{key:"instance",recordingKey:"instancePanel"})),r.createElement(F.VF,{isVisible:(0,V.GG)(g)},()=>r.createElement(tP,{key:"constraints",recordingKey:"constraintsPanel",openFileKey:c?.key||null,dropdownShown:n})),r.createElement(F.VF,{isVisible:g[a.ibQ.LAYER_ITEM]},()=>r.createElement(tA.s,{key:"layer",recordingKey:"layerPanel"})),k===R.GR.DEFAULT_SIMPLIFIED&&r.createElement(t7.Y,{onExpand:()=>P(R.GR.OVERRIDDEN_EXPANDED)}),k===R.GR.OVERRIDDEN_EXPANDED&&r.createElement(r.Fragment,null,r.createElement(tI.Q,{selection:E,shownPanels:g,scaleShouldHideOtherPanels:(0,V.NR)(g)}),r.createElement(F.VF,{isVisible:g[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tK.r,{key:"template"})),r.createElement(F.VF,{isVisible:g[a.ibQ.COMPONENT_ITEM]},()=>r.createElement(tS.cu,{key:"component",recordingKey:"componentPanel"})),r.createElement(F.VF,{isVisible:g[a.ibQ.VECTOR_ITEM]},()=>r.createElement(tD.Ss,{key:"vector-transform",recordingKey:"vectorTransformPanel",dispatch:v,dropdownShown:n,isUI3:!1})),r.createElement(F.VF,{isVisible:D},()=>r.createElement(tF.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:!1,onlyStacksSelected:!!g[a.ibQ.STACK_ITEM]})),r.createElement(F.VF,{isVisible:g[a.ibQ.MASK_ITEM]},()=>r.createElement(tR.B,{key:"mask",recordingKey:"maskPanel",maskType:x,dispatch:v,dropdownShown:n})),r.createElement(F.VF,{isVisible:g[a.ibQ.GRIDS_ITEM]},()=>r.createElement(R.tC,{key:"grids"})),r.createElement(F.VF,{isVisible:g[a.ibQ.TYPE_ITEM]},()=>r.createElement(R.gc,{key:"type"})),r.createElement(F.VF,{isVisible:g[a.ibQ.CANVAS_ITEM]},()=>r.createElement(tb.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",dispatch:v,dropdownShown:n,modalShown:s,pickerShown:u,colorFormat:t,library:o,openFile:c,defaultColor:B.rC,sceneGraphSelection:E,hasExports:!!C&&(0,U._W)(C,[]).length>0})),r.createElement(F.VF,{isVisible:g[a.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>r.createElement(tL.C,{key:"remove-group-fill-stroke"})),r.createElement(F.VF,{isVisible:g[a.ibQ.FILL_ITEM]},()=>r.createElement(R.B8,{key:"fill",variableScopes:I})),r.createElement(F.VF,{isVisible:g[a.ibQ.STROKE_ITEM]},()=>r.createElement(tO.$p,{key:"stroke",recordingKey:"strokePanel",dispatch:v,stylePickerShown:S,strokePanelMode:h,strokePanelTerminalPointCount:f,dropdownShown:n,modalShown:s,pickerShown:u,pickerInStyleCreationShown:p,stylePickerListLayout:b,colorFormat:t,defaultColor:B.Em,library:o,sceneGraphSelection:E,openFile:c,isPanelBodyCollapsedAtom:null})),r.createElement(F.VF,{isVisible:!0},()=>r.createElement(tO.UA,{key:"selection-paints",recordingKey:"selectionPaintsPanel",dispatch:v,dropdownShown:n,sceneGraphSelection:E,pickerShown:u,stylePickerListLayout:b,colorFormat:t,defaultColor:B.rC,library:o,openFile:c,isUI3:!1})),r.createElement(F.VF,{isVisible:g[a.ibQ.EFFECTS_ITEM]},()=>r.createElement(R.w5,{key:"effects"})),r.createElement(F.VF,{isVisible:!(0,V.NR)(g)},()=>r.createElement(tx.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:M,localPlugins:i,publishedPlugins:m,allSavedPlugins:e.plugins,orgEntity:d,dispatch:v,openFileKey:c?.key||null,editorType:c?.editorType?(0,T.wN)(c.editorType):null,numSelected:K??0}))),r.createElement(F.VF,{isVisible:(0,V.P1)(g,c)},()=>r.createElement(tN.LI,{key:"export",recordingKey:"exportsPanel",openFile:c,singleNodeName:N,numSelected:O,exportSettings:C,sceneGraphSelection:E,currentPage:Y.currentPage,isSelectionRenamable:tN.LI.isSelectionRenamable(Object.keys(E)),dispatch:v,dropdownShown:n,currentSelectedProperty:Y.currentSelectedProperty,pickerShown:u,saveAsState:y,panelWidth:V.iP})),r.createElement(F.VF,{isVisible:!(0,V.NR)(g)},()=>r.createElement(tx.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:M,localPlugins:i,publishedPlugins:m,allSavedPlugins:e.plugins,orgEntity:d,dispatch:v,openFileKey:c?.key||null,editorType:c?.editorType?(0,T.wN)(c.editorType):null,numSelected:K??0})))}function t6({allSavedPlugins:e,colorFormat:t,dropdownShown:n,library:o,localPlugins:i,modalShown:s,openFile:c,orgEntity:d,pickerInStyleCreationShown:p,pickerShown:u,publishedPlugins:m,saveAsState:y,sceneGraphSelection:E,shownPanels:g,strokePanelMode:h,strokePanelTerminalPointCount:f,stylePickerListLayout:b,stylePickerShown:S}){let v=(0,l.wA)(),[k,P]=(0,w.useAtom)(A.b),I=(0,_.s6)("currentPage","currentSelectedProperty"),N=(0,tM.qh)(),C=(0,tN.hD)(),O=(0,G.kl)("exportSettings"),x=(0,V.So)(g,!0),{numSelected:M,stateGroupSelectionInfo:K}=(0,G.fC)("numSelected","stateGroupSelectionInfo"),{maskType:D,areOnlyResponsiveSetsSelected:Y}=(0,G.pw)("maskType","areOnlyResponsiveSetsSelected"),{pluginRelaunchData:H,numSelected:Q}=(0,G.DQ)("pluginRelaunchData","numSelected"),z=(0,V.SJ)();return r.createElement(L.i,null,0===Object.keys(E).length&&r.createElement(tf.Mw,{panelName:tf.ON.DESIGN}),r.createElement(t1._i,{recordingKey:"toolbarView",shouldShowComponentPropertiesPanel:(0,V.tV)(g,K),shouldShowInstancePanel:(0,V.M0)(g)}),r.createElement(F.VF,{isVisible:!(0,V.NR)(g)},()=>r.createElement(tw._,{key:"instance",recordingKey:"instancePanel"})),r.createElement(F.VF,{isVisible:!0},()=>r.createElement(tD.zq,{key:"transform",recordingKey:"transformPanel",propertiesPanelState:k,pickerShown:u,openFileKey:c?.key||null,canEditConstraints:(0,V.GG)(g),onlyShowXYInputsRow:k===R.GR.DEFAULT_SIMPLIFIED||((Y&&(0,U.hS)(Y))??!1)})),r.createElement(F.VF,{isVisible:x},()=>r.createElement(tF.Vy,{key:"stack",recordingKey:"stackPanel",onlyShowResizingRow:k===R.GR.DEFAULT_SIMPLIFIED,onlyStacksSelected:!!g[a.ibQ.STACK_ITEM]})),r.createElement(R.F$,{isVisible:g[a.ibQ.SCALE_ITEM]}),k===R.GR.DEFAULT_SIMPLIFIED&&r.createElement(t7.Y,{onExpand:()=>P(R.GR.OVERRIDDEN_EXPANDED)}),k===R.GR.OVERRIDDEN_EXPANDED&&r.createElement(r.Fragment,null,r.createElement(F.VF,{isVisible:g[a.ibQ.LAYER_ITEM]},()=>r.createElement(t0.X,{recordingKey:"appearancePanel"})),r.createElement(tI.Q,{selection:E,shownPanels:g,scaleShouldHideOtherPanels:(0,V.NR)(g)}),r.createElement(F.VF,{isVisible:g[a.ibQ.TEMPLATE_ITEM]},()=>r.createElement(tK.r,{key:"template"})),r.createElement(F.VF,{isVisible:g[a.ibQ.COMPONENT_ITEM]},()=>r.createElement(tS.cu,{key:"component",recordingKey:"componentPanel"})),r.createElement(F.VF,{isVisible:g[a.ibQ.VECTOR_ITEM]},()=>r.createElement(tD.Ss,{isUI3:!0,key:"vector-transform",recordingKey:"vectorTransformPanel",dispatch:v,dropdownShown:n})),r.createElement(F.VF,{isVisible:g[a.ibQ.MASK_ITEM]},()=>r.createElement(tR.B,{key:"mask",recordingKey:"maskPanel",maskType:D,dispatch:v,dropdownShown:n})),r.createElement(F.VF,{isVisible:g[a.ibQ.TYPE_ITEM]},()=>r.createElement(R.gc,{key:"type"})),r.createElement(F.VF,{isVisible:g[a.ibQ.CANVAS_ITEM]},()=>r.createElement(tb.v,{key:"canvas-background",recordingKey:"canvasBackgroundPanel",dispatch:v,dropdownShown:n,modalShown:s,pickerShown:u,colorFormat:t,library:o,openFile:c,defaultColor:B.rC,sceneGraphSelection:E,hasExports:!!O&&(0,U._W)(O,[]).length>0})),r.createElement(F.VF,{isVisible:g[a.ibQ.REMOVE_GROUP_BACKGROUND_ITEM]},()=>r.createElement(tL.C,{key:"remove-group-fill-stroke"})),r.createElement(F.VF,{isVisible:g[a.ibQ.FILL_ITEM]},()=>r.createElement(R.B8,{key:"fill",variableScopes:N})),r.createElement(F.VF,{isVisible:g[a.ibQ.STROKE_ITEM]},()=>r.createElement(tO.$p,{key:"stroke",recordingKey:"strokePanel",stylePickerShown:S,strokePanelMode:h,strokePanelTerminalPointCount:f,dispatch:v,dropdownShown:n,modalShown:s,pickerShown:u,pickerInStyleCreationShown:p,stylePickerListLayout:b,colorFormat:t,defaultColor:B.Em,library:o,sceneGraphSelection:E,openFile:c,isPanelBodyCollapsedAtom:null})),(0,tq.m)().ce_il_array&&r.createElement(F.VF,{isVisible:g[a.ibQ.TRANSFORM_ITEM]},()=>r.createElement(R.sX,{key:"transformModifiers"})),r.createElement(F.VF,{isVisible:g[a.ibQ.EFFECTS_ITEM]},()=>r.createElement(R.w5,{key:"effects"})),r.createElement(F.VF,{isVisible:z},()=>r.createElement(tO.UA,{isUI3:!0,key:"selection-paints",recordingKey:"selectionPaintsPanel",dispatch:v,dropdownShown:n,sceneGraphSelection:E,pickerShown:u,stylePickerListLayout:b,colorFormat:t,defaultColor:B.rC,library:o,openFile:c})),r.createElement(F.VF,{isVisible:g[a.ibQ.GRIDS_ITEM]},()=>r.createElement(R.tC,{key:"grids"}))),r.createElement(F.VF,{isVisible:(0,V.P1)(g,c)},()=>r.createElement(tN.LI,{key:"export",recordingKey:"exportsPanel",openFile:c,singleNodeName:C,isSelectionRenamable:tN.LI.isSelectionRenamable(Object.keys(E)),numSelected:M,exportSettings:O,sceneGraphSelection:E,currentPage:I.currentPage,dispatch:v,dropdownShown:n,currentSelectedProperty:I.currentSelectedProperty,pickerShown:u,saveAsState:y,panelWidth:V.iP})),r.createElement(F.VF,{isVisible:!(0,V.NR)(g)},()=>r.createElement(tx.Q,{key:"plugin",recordingKey:"pluginPanel",pluginRelaunchData:H,localPlugins:i,publishedPlugins:m,allSavedPlugins:e.plugins,orgEntity:d,dispatch:v,openFileKey:c?.key||null,editorType:c?.editorType?(0,T.wN)(c.editorType):null,numSelected:Q??0})))}function t9(e){let t=(0,m.GS)();if((0,O.Im)(e.shownPanels)||Object.keys(e.shownPanels).every(t=>!e.shownPanels[parseInt(t)])){let e=Error("Rendering simplified design tab with no shownPropertiesPanels");(0,t3.$D)(t2.e.EDITOR_USABILITY,e)}return t?r.createElement(t6,{...e}):r.createElement(t8,{...e})}function ne({scrollContainer:e,...t}){let n=(0,w.useAtomValue)(A.b),l=(0,C.Yo)();return n===R.GR.DEFAULT_EXPANDED?r.createElement(t5,{...t,orgEntity:l,scrollContainer:e}):r.createElement(t9,{...t,orgEntity:l})}var nt=n(738402);function nn({dropdownShown:e,pickerShown:t,saveAsState:n,sceneGraphSelection:a}){let o=(0,l.wA)(),i=(0,ep.q5)(),s=(0,_.p8)("currentPage"),c=(0,_.p8)("isReadOnly"),d=(0,_.p8)("currentSelectedProperty"),p=(0,nt.ks)(),u=c&&!p,m=(0,G.Gt)("numSelected"),{exportSettings:y}=(0,G.pw)("exportSettings"),E=(0,tN.Wd)();return r.createElement(F.VF,{isVisible:!0},()=>r.createElement(tN.LI,{key:"export",title:u?(0,er.t)("fullscreen.properties_panel.export"):(0,er.t)("fullscreen.properties_panel.presets"),standalone:!0,openFile:i,singleNodeName:E,isSelectionRenamable:tN.LI.isSelectionRenamable(Object.keys(a)),numSelected:m,exportSettings:y,sceneGraphSelection:a,currentPage:s,dispatch:o,dropdownShown:e,currentSelectedProperty:d,pickerShown:t,recordingKey:"exportsPanel",saveAsState:n,panelWidth:V.iP}))}var nr=n(425708),nl=n(140835),na=n(465424),no=n(200047),ni=n(106646);function ns({scrollContainer:e}){let t=(0,ep.q5)(),n=(0,_.KH)(),l=(0,G.Gt)("prototypeStartingPointsInfo"),a=!l||l.length>0,o=0===Object.keys(n).length,i=t?.canEdit,s=r.createElement(F.VF,{isVisible:o&&!i&&a},()=>r.createElement(ni.A,{viewOnly:!0})),c=r.createElement(F.VF,{isVisible:o},()=>r.createElement(ty,{key:"code-local-styles",recordingKey:"code-local-styles",scrollContainer:e}));return r.createElement(nl.fu,{name:na.e0.CODE_PANEL},r.createElement(L.i,null,r.createElement(tf.Mw,{panelName:tf.ON.INSPECT}),r.createElement(no.U,{key:"inspection-properties-panel",recordingKey:"inspectionPanel",flowPanel:s,localStylesPanel:c})))}var nc=n(976431),nd=n(806565),np=n(245459),nu=n(278695),nm=n(952122),ny=n(922611),nE=n(965413),ng=n(612724),nh=n(535461),n_=n(1518),nf=n(143364),nb=n(172322),nS=n(413327),nT=n(859877),nv=n(839439);class nk extends Z.o6{render(){return r.createElement(ef.Zk,null,r.createElement(ef.fI,null,r.createElement(ef.xw,null,(0,er.tx)("proto.menu.background"))),r.createElement(nP,{...this.props}))}}function nP(e){let t=r.useRef(null),n=r.useRef(null),l=(0,m.GS)(),{dispatch:a,pickerShown:o,prototypeBackgroundColor:i}=e,s=r.useCallback(()=>{let e=l?n.current:t.current;if(o&&o.id===nh.$T)a(ea.XE());else if(e&&e instanceof HTMLElement){let t=(0,nf.cn)(e);a(ea.u1({id:nh.$T,initialX:t.x,initialY:t.y}))}},[a,o,l]),c=r.useCallback((e,t)=>{a((0,nm._P)({name:"Prototype Background Modified"})),ed.Y5.updateSelectionProperties({prototypeBackgroundColor:e},{shouldCommit:t})},[a]),d=(0,U._W)(i,{r:0,g:0,b:0,a:1}),p=r.createElement("div",{className:"prototype_background_panel--colorValueContainer--CEbzl paint_panels--colorValueContainer--DGeSP raw_components--borderFocusWithin--BaipZ paint_panels--_baseColorValueContainer--t-UIV raw_components--base--T7G0z raw_components--singleRowHeight--dKM4t"},r.createElement(nb.J,{onClick:s,color:d,opacity:d.a,recordingKey:Z.Pt(e,"chit"),className:"prototype_background_panel--chit--F--d0 paint_panels--chit--twQEy"}),r.createElement(nT.AN,{className:"prototype_background_panel--color--e5Pc8 paint_panels--colorInput--nSz13",noLeftBorder:!0,formatter:n_.TI,property:d,onChange:c,recordingKey:Z.Pt(e,"colorInput"),noBorderOnFocus:!0}));return r.createElement(r.Fragment,null,l?r.createElement(nv.TN,{ref:n},p):r.createElement(ef.fI,{ref:t,className:"prototype_background_panel--colorRow--MtNeY"},p),o&&o.id===nh.$T&&r.createElement(nS.h3,{disabledVariableIds:new Set,initialPosition:new ng.Mi(o.initialX??0,o.initialY??0),color:d,boundVariable:null,onChange:c,recordingKey:Z.Pt(e,"colorPicker")}))}nk.displayName="PrototypeBackgroundPanel";var nI=n(845438),nN=n(570446),nw=n(8195),nC=n(925415),nA=n(688581),nR=n(868911),nO=n(453783),nL=n(562933),nx=n(164502);let nM="prototype_device_panel--deviceSelect--wnOgI",nF="prototype_device_panel--deviceOption--rvW-q",nK="prototype_device_panel--inactiveLabel--UEKyk prototype_device_panel--activeLabel--l162n",nD="prototype_device_panel--labelInactive--pv4Sf",nV="prototype_device_panel--deviceDropdownChevron--kq9TV",nU="prototype_device_panel--deviceDropdownInput--AxG9E";var nB=n(537545),nG=n(64111);class nY extends r.PureComponent{constructor(){super(...arguments),this.deviceInfo=()=>nA.hY[this.props.prototypeDevice.presetIdentifier],this.shouldShowModelDropdown=()=>{let e=this.deviceInfo();return nA.yr[e?.deviceName||""].length>1},this.onModelChange=e=>{if(!this.deviceInfo())return;let t=nA.hY[e];if(!t)return;let n=this.props.prototypeDevice.rotation;ed.Y5.updateSelectionProperties({prototypeDevice:{type:"PRESET",size:t.framePresetSize,presetIdentifier:e,rotation:n}})},this.renderModelDropdown=(e,t,n)=>{if(!e)return;let l=r.createElement(nX,{dispatch:this.props.dispatch,presetIdentifier:this.deviceInfo().presetIdentifier,dropdownShown:this.props.dropdownShown,onChange:this.onModelChange,recordingKey:Z.Pt(this.props,"modelDropdown")}),a=t?r.createElement(nv.dx,{left:l,right:n}):r.createElement(nv.TN,null,l);return r.createElement("div",null,!this.props.isUI3&&r.createElement(ef.hl,null,r.createElement(ef.UZ,{className:nD},(0,er.tx)("presets.device_panel.model"))),this.props.isUI3?a:r.createElement(ef.fI,null,l))},this.cssForCurrentDeviceRotation=()=>{if("NONE"===this.props.prototypeDevice.type)return;let e="";switch("MICROSOFT_SURFACE_PRO_4"===this.props.prototypeDevice.presetIdentifier&&(e="scale(0.65)"),this.props.prototypeDevice.rotation){case"NONE":default:return;case"CCW_90":return`rotate(-90deg) ${e}`}},this.renderDevicePreview=()=>{let e=this.deviceInfo();if(!e)return;let t=(0,U._W)(this.props.prototypeBackgroundColor,{r:0,g:0,b:0,a:0}),n=n_.z5.format(t),l=t.r>.9&&t.g>.9&&t.b>.9,a=`1px solid ${l?"#EFEFEF":"transparent"}`,o=r.createElement("div",{className:"prototype_device_panel--devicePreview--T2Tzn",style:{backgroundColor:n,border:a}},r.createElement("img",{className:"prototype_device_panel--deviceImage--Wpr8Y",src:e.thumbnailUrl,style:{transform:this.cssForCurrentDeviceRotation()},alt:`${e.getI18nDeviceName()}`}));return r.createElement("div",null,!this.props.isUI3&&r.createElement(ef.hl,null,r.createElement(ef.UZ,{className:nD},(0,er.tx)("presets.device_panel.preview"))),this.props.isUI3?r.createElement(nv.TN,{appendedClassName:nx.Rk},o):r.createElement("div",{className:"prototype_device_panel--devicePreviewContainer--pC-H4"},o))},this.onChangeOrientation=e=>{let t=this.props.prototypeDevice;if("NONE"===t.type)return;let n=t.size.y>t.size.x,r=t.rotation;r=n?"PORTRAIT"===e?"NONE":"CCW_90":"PORTRAIT"===e?"CCW_90":"NONE",ed.Y5.updateSelectionProperties({prototypeDevice:{...t,rotation:r}})},this.currentDeviceOrientation=()=>{let e=this.props.prototypeDevice;return"NONE"===e.type?"PORTRAIT":e.size.y>e.size.x?"NONE"===e.rotation?"PORTRAIT":"LANDSCAPE":"NONE"===e.rotation?"LANDSCAPE":"PORTRAIT"}}render(){let e=this.props.prototypeDevice,t=r.createElement(nW,{dispatch:this.props.dispatch,prototypeDevice:this.props.prototypeDevice,isUI3:this.props.isUI3,dropdownShown:this.props.dropdownShown,recordingKey:Z.Pt(this.props,"deviceDropdown")}),n=r.createElement(nI.bL,{onChange:this.onChangeOrientation,recordingKey:Z.Pt(this.props,"orientationControl"),value:this.currentDeviceOrientation(),legend:r.createElement(nN.q,null,(0,er.t)("presets.device_panel.rotation"))},r.createElement(nI.c$,{"aria-label":(0,er.t)("presets.device_panel.rotation.portrait"),value:"PORTRAIT",icon:r.createElement(eI.U,{svg:nG.A},r.createElement(nw.l,null))}),r.createElement(nI.c$,{"aria-label":(0,er.t)("presets.device_panel.rotation.landscape"),value:"LANDSCAPE",icon:r.createElement(eI.U,{svg:nB.A},r.createElement(nC.J,null))})),l=(0,nA.$X)(e.type||"NONE",e.presetIdentifier),a=r.createElement(ef.fI,null,t,l&&n),o=this.deviceInfo()&&this.shouldShowModelDropdown(),i=l&&!o?r.createElement(nv.dx,{left:t,right:n}):r.createElement(nv.TN,null,t),s=r.createElement(nH,{prototypeDevice:this.props.prototypeDevice,dispatch:this.props.dispatch,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:Z.Pt(this.props,"deviceSizeInputs")});return r.createElement(ef.Zk,null,r.createElement(ef.fI,{className:"prototype_device_panel--panelTitleRowOuter--wkKKy collapsible_property_panel--panelTitleRowOuter--i5K0R"},r.createElement(ef.xw,{extended:this.props.isUI3},this.props.isUI3?(0,er.tx)("presets.device_panel.prototype_settings"):(0,er.tx)("presets.device_panel.device"))),this.props.isUI3?i:a,this.renderModelDropdown(!!o,l,n),this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s,this.props.isUI3&&r.createElement(nP,{pickerShown:this.props.pickerShown,dispatch:this.props.dispatch,prototypeBackgroundColor:this.props.prototypeBackgroundColor,recordingKey:Z.Pt(this.props,"backgroundPanel")}),this.renderDevicePreview(),!this.props.isUI3&&"CUSTOM"===this.props.prototypeDevice.type&&s)}}function nH(e){let t=r.useCallback(t=>{ed.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:t,y:e.prototypeDevice.size.y},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.y,e.prototypeDevice.rotation]),n=r.useCallback(t=>{ed.Y5.updateSelectionProperties({prototypeDevice:{type:"CUSTOM",size:{x:e.prototypeDevice.size.x,y:t},rotation:e.prototypeDevice.rotation}})},[e.prototypeDevice.size.x,e.prototypeDevice.rotation]),l=r.createElement(nR.$j,{className:"prototype_device_panel--scrubbableInputLeftCol--P2T66 prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--leftColInput--pAJSy prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.x,onValueChange:t,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("presets.device_panel.device_width_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:Z.Pt(e,"deviceWidth")},r.createElement("span",{className:nK},(0,er.tx)("proto.device_panel.width"))),a=r.createElement(nR.$j,{className:"prototype_device_panel--scrubbableInput--0TFVb",inputClassName:"prototype_device_panel--input--vNirJ",dispatch:e.dispatch,value:e.prototypeDevice.size.y,onValueChange:n,smallNudgeAmount:e.smallNudgeAmount,bigNudgeAmount:e.bigNudgeAmount,"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("presets.device_panel.device_height_tooltip"),tooltipForScreenReadersOnly:!0,recordingKey:Z.Pt(e,"deviceHeight")},r.createElement("span",{className:nK},(0,er.tx)("proto.device_panel.height")));return(0,m.GS)()?r.createElement(nv.dx,{left:l,right:a}):r.createElement(ef.fI,null,l,a)}nY.displayName="PrototypeDevicePanel";let nQ=nO.l6,nz=nO.c$;class nW extends Z.o6{constructor(){super(...arguments),this.formatter={format:e=>"NONE"===e?this.props.isUI3?(0,er.t)("proto.frame_preset_panel.no_device"):(0,er.t)("proto.frame_preset_panel.none"):"CUSTOM"===e?(0,er.t)("proto.frame_preset_panel.custom_size"):"PRESENTATION"===e?(0,er.t)("proto.frame_preset_panel.presentation"):e.getI18nDeviceName(),isEqual:(e,t)=>"NONE"===e||"CUSTOM"===e||"PRESENTATION"===e||"NONE"===t||"CUSTOM"===t||"PRESENTATION"===t?e===t:e.presetIdentifier===t.presetIdentifier},this.onChange=e=>{(0,nm.$J)(e,this.props.prototypeDevice);let t=this.props.prototypeDevice.type,n=t;n="NONE"===e?"NONE":"PRESENTATION"===e?"PRESENTATION":"CUSTOM"===e?"CUSTOM":"PRESET",this.props.dispatch((0,nm._P)({name:"Prototype Device Type Changed",params:{oldType:this.props.prototypeDevice.presetIdentifier||t,newType:e.presetIdentifier||n,isInlinePreviewOpened:w.atomStore.get(nL.h).modalStatus===nL.b.OPEN}}))},this.renderPresetOption=(e,t)=>{let n=(0,nA.Fh)(e,this.props.prototypeDevice);if(null===n)return null;let l=n.framePresetSize;return r.createElement(nz,{value:n,key:t,recordingKey:Z.Pt(this.props,n.deviceName)},r.createElement("div",{className:nF},r.createElement("span",null,n.getI18nDeviceName()),r.createElement("span",null,l.x,"\u200A\xd7\u200A",l.y)," "))}}render(){let e;return e="NONE"===this.props.prototypeDevice.type?"NONE":"PRESENTATION"===this.props.prototypeDevice.type?"PRESENTATION":"CUSTOM"===this.props.prototypeDevice.type?"CUSTOM":nA.hY[this.props.prototypeDevice.presetIdentifier]||"NONE",r.createElement(nQ,{className:nM,chevronClassName:nV,inputClassName:nU,id:"prototype-device-select",property:e,formatter:this.formatter,onChange:this.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:"prototype_device_panel--deviceDropdown--ufbuZ",recordingKey:Z.Pt(this.props,"select"),dropdownAlignment:"right"},r.createElement(nz,{value:"NONE",recordingKey:Z.Pt(this.props,"NONE")}),r.createElement(nO.sK,null),nA.r6.map(this.renderPresetOption),r.createElement(nO.sK,null),nA.J_.map(this.renderPresetOption),r.createElement(nO.sK,null),nA.AG.map(this.renderPresetOption),r.createElement(nO.sK,null),nA.$w.map(this.renderPresetOption),r.createElement(nO.sK,null),r.createElement(nz,{value:"CUSTOM",recordingKey:Z.Pt(this.props,"CUSTOM")},r.createElement("div",{className:nF},r.createElement("span",null,(0,er.tx)("proto.frame_preset_panel.custom_size")),r.createElement("span",null,(0,er.tx)("proto.frame_preset_panel.fit")))),r.createElement(nz,{value:"PRESENTATION",recordingKey:Z.Pt(this.props,"PRESENTATION")},r.createElement("div",{className:nF},r.createElement("span",null,(0,er.tx)("proto.frame_preset_panel.presentation")),r.createElement("span",null,(0,er.tx)("proto.frame_preset_panel.fill")))),r.createElement(nO.sK,null),nA.dr.map(this.renderPresetOption))}}nW.displayName="DeviceDropdown";let n$=nO.l6,nj=nO.c$;class nX extends Z.o6{constructor(){super(...arguments),this.formatter={format:e=>{let t=nA.hY[e];return t?t.getI18nStyleName():(0,er.t)("proto.frame_preset_panel.missing")},isEqual:(e,t)=>e===t},this.renderStyleOption=(e,t)=>{let n=e.presetIdentifier;return r.createElement(nj,{value:n,key:t,recordingKey:Z.Pt(this.props,n)},nA.hY[n].getI18nStyleName())}}render(){let e=nA.hY[this.props.presetIdentifier];if(!e)return null;let t=nA.yr[e.deviceName],n=this.props.presetIdentifier;return r.createElement(n$,{className:nM,chevronClassName:nV,inputClassName:nU,id:"prototype-style-select",property:n,formatter:this.formatter,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,dropdownClassName:"prototype_device_panel--modelDropdown--WbHYJ",recordingKey:Z.Pt(this.props,"select")},t.map(this.renderStyleOption))}}nX.displayName="ModelDropdown";var nJ=n(499325),nq=n(510548),nZ=n(640978),n0=n(717180),n1=n(254773),n4=n(156310),n5=n(746643),n2=n(137565),n3=n(693565),n7=n(373247),n8=n(604072),n6=n(502524),n9=n(404227),re=n(756044),rt=n(105498),rn=n(904510),rr=n(501717);function rl(e){return e??"Default"}let ra=r.createContext({getNodeName:rl}),ro=r.memo(function({getNodeName:e=rl,children:t}){let n=r.useMemo(()=>({getNodeName:e}),[e]);return r.createElement(ra.Provider,{value:n},t)});var ri=n(719176),rs=n(991995),rc=n(310618),rd=n(909491),rp=n(582008),ru=n(732767),rm=n(253244),ry=n(119925),rE=n(802425),rg=n(276769),rh=n(832439),r_=n(448313);function rf(){let e=(0,l.wA)(),t=(0,l.d4)(e=>(0,Y.Yh)(e.mirror.appModel,rm.JT.MAGIC_LINK)),n=(0,ru.PE)(),{withinMeter:a}=(0,rp.X)(rm.JT.MAGIC_LINK);return n&&a?r.createElement("span",{className:"magic_link--magicLinkButton--CWefW","data-testid":"magic-link-entry"},r.createElement(eS.K,{recordingKey:Z.Pt("prototypeInteractionList","magicLinkButton"),"aria-label":(0,er.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),onClick:()=>{(0,rg.$I)({moduleToOpen:{type:"custom",module:r.createElement(rh.p,null),name:rE.Sn.MAGIC_LINK,beforeModuleOpen:()=>{e((0,nm.Zh)({name:"prototype.ai_magic_link_entry_clicked",params:{source:"properties_panel"}})),(0,ry.B3)(rm.JT.MAGIC_LINK),t&&(0,ry.Ag)(rm.JT.MAGIC_LINK,r_.e,{})}},trackingData:{source:"prototype_magic_link_triggered"}})},htmlAttributes:{"data-tooltip":(0,er.t)("fullscreen.toolbar.prototyping-add-interactions-tooltip-v2"),"data-tooltip-show-above":!0}},r.createElement(rd.B,null))):null}var rb=n(174103);let rS=(0,rb.ex)("prototype_info",function(e){let{tooltipText:t}=e;return r.createElement("div",{className:tU.s.flex.justifyCenter.itemsCenter.$},r.createElement("span",{className:tU.s.m6.flexGrow1.$,style:{maxWidth:144}},t))},e=>({tooltipText:e.getAttribute("data-tooltip-text")}));var rT=n(792985),rv=n(182032),rk=n(819785),rP=n(695038),rI=n(612325);let rN=new n7.JV,rw=new n7.Eq,rC=new n7.sX,rA=r.memo(function({filterInteractionCategory:e}){let t=(0,l.wA)(),n=(0,l.d4)(rc.Cy),o=(0,l.d4)(rc.n9),i=(0,l.d4)(rc.DV),c=(0,l.d4)(rx),d=(0,l.d4)(n9.dK),u=(0,l.d4)(n9.Xt),m=(0,rc.a2)(),y=(0,rc.R)(),E=(0,l.d4)(rF),g=(0,l.d4)(rL),h=Object.keys(u).length>1,_=rK(),f=function(){let e=rK(),t=(0,l.d4)(rM);return!!e&&!!t&&t.selectionOverrides[a.YnC.PROTOTYPE_INTERACTIONS]}(),b=(0,ep.q5)(),S=(0,n1.U)(),T=(0,p.cJ)(),v=r.useMemo(()=>new n7.cP(d),[d]),k=r.useCallback(e=>v.format(e),[v]),P=r.useRef(null),I=e=>{ed.Y5.updateSelectionProperties({prototypeInteractions:e},{shouldCommit:re.zk.NO_BUT_TRACK_AS_EDIT}),ed.Y5.commit()},N=(0,nE.Zj)(Object.keys(u)),w=r.createElement(rR,{interactionGroups:m,inheritedInternalInteractionGroups:y,mixed:h,isOrInInstance:_,openFile:b,dispatch:t,currentSelectedProperty:c,onChange:(e,t)=>{let r=e.map(e=>e.interactions).reduce((e,t)=>e.concat(t),[]),l=new Set,i=[];for(let e of r){let t=np.dI(e.id);if(t&&!l.has(t))i.push(e);else{if(!(t=a.glU.generateUniqueID()))continue;let n=np.sH(t);if(!n)continue;i.push({...e,id:n})}t&&l.add(t)}t===rt.J.NORMAL?i=[...i,...o]:t===rt.J.INHERITED_INTERNAL&&(i=[...n,...i]),I(i)},onAddProperty:e=>{e.stopPropagation();let t=[],r=[];for(let e of Object.keys(u)){let n=a.glU.generateUniqueID();if(!n)return;let l=np.sH(n);if(!l)return;let o={id:l,sourceNodeID:np.sH(e)??np.Hr,event:{interactionType:function(e,t,n){let r=new Set;for(let{event:t}of e)r.add(t.interactionType);for(let e of rD)if(!r.has(e)&&(!n||"DRAG"!==e||!(0,s.kc)().sts_interaction_interop)&&("BACK"!==t||"ON_HOVER"!==e&&"ON_PRESS"!==e))return e;return"ON_KEY_DOWN"}(m,void 0,T)}};o.stateManagementVersion=1,o.actions=[{connectionType:"NONE"}],t.push(o);let i=(0,n0.kh)(d,e);r.push(i?i.guid:"")}let l=t.map(e=>n4.d({nodeID:e.sourceNodeID,interactionID:e.id}));if(l.length>0){a.glU.setSelectedInteractions(l);let e=(0,nf.cn)(P.current);rY(new ng.Mi(e.x,e.y+(0,eH.jz)(rv.rightNavGridRowHeight)))}let i=[...n,...t,...o];S("prototype_interaction_added",{interactionCount:i.length,sourceTlfIds:JSON.stringify(r)}),I(i)},onDeleteProperty:(e,t)=>{let n=(t===rt.J.NORMAL?m:y).filter((t,n)=>e.has(n)),r=[];for(let e of n)r.push(...e.interactions);let l=rG(r);j.l7.user("delete-prototype-interactions",()=>a.glU.deleteInteractions(l)),ed.Y5.deselectProperty()},shouldIgnoreKeyboardEvents:i.length>0||c.type!==a.rrT.PROTOTYPE_INTERACTION&&c.type!==a.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,isValidPrototypingSourceSelected:E,showResetInteractionsButton:f,toggleScrollBehaviorPicker:()=>{if(g?.id===nh.AO)t(ea.XE());else{let e=(0,nf.cn)(P.current);t(ea.u1({id:nh.AO,initialX:e.x,initialY:e.y}))}},headerAccessory:N&&r.createElement(rf,null),inSites:T,filterInteractionCategory:e});return r.createElement(ro,{getNodeName:k},T?w:r.createElement(ef.Zk,{"data-onboarding-key":"prototypePanel",ref:P,"data-testid":"prototype-interaction-list"},w))});function rR(e){let t=r.useRef(!1),n=(0,m.GS)(),l=(0,s.kc)().sts_interaction_interop&&!!e.filterInteractionCategory,o=!l||e.filterInteractionCategory===rt.J.NORMAL,i=e.isOrInInstance&&e.inheritedInternalInteractionGroups.length>0,c=l?e.filterInteractionCategory===rt.J.INHERITED_INTERNAL&&i:i,d=n?r.createElement("div",{className:"prototype_interaction_list--categoryRow--Xxfm4"},r.createElement(nJ.J,{className:"prototype_interaction_list--categoryLabel--0dGOM"},(0,er.tx)("proto.interaction_list.variant_interactions"))):r.createElement(ef.fI,null,r.createElement(ef.UZ,{className:"prototype_interaction_list--label--dGwgy"},(0,er.tx)("proto.interaction_list.variant_interactions")));return r.createElement(r.Fragment,null,o&&r.createElement(rr.h6,{title:e.inSites?"":(0,er.t)("proto.title_interactions"),stylePickerShown:{isShown:!1},addProperty:e.onAddProperty,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,hideAddButton:!e.isValidPrototypingSourceSelected,renderProperty:(n,l,a,o,i,c,d,p,u)=>!(0,s.kc)().sts_interaction_interop&&e.inSites&&(0,rT.p4)(n.interactions)?r.createElement(r.Fragment,{key:l}):r.createElement(rO,{interactionGroups:e.interactionGroups,interactionGroup:n,index:l,selected:a,hasFocus:i,isDragging:o,singletonRow:e.interactionGroups.length<=1,onMouseDown:d,onMouseMove:p,onMouseUp:u,dispatch:e.dispatch,category:rt.J.NORMAL,autoOpenVariablePicker:t,recordingKey:Z.Pt("prototypeInteractionList",l),key:l,inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,rt.J.NORMAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:a.rrT.PROTOTYPE_INTERACTION,propertyList:e.interactionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,rt.J.NORMAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:"prototypeInteractionList",boldHeaderRow:e.interactionGroups.length>=1||e.inheritedInternalInteractionGroups.length>=1,showResetInteractionsButton:e.showResetInteractionsButton,onResetInteractions:j.nc.user("reset-instance-interactions",()=>a.glU.resetSymbolOverrides(a.YnC.PROTOTYPE_INTERACTIONS)),headerAccessory:e.headerAccessory}),c&&d,c&&r.createElement(rr.h6,{title:"",stylePickerShown:{isShown:!1},addProperty:n5.lQ,hideAddButton:!0,toggleScrollBehaviorPicker:e.toggleScrollBehaviorPicker,renderProperty:(n,l,a,o,i,s,c,d,p)=>r.createElement(rO,{interactionGroups:e.inheritedInternalInteractionGroups,interactionGroup:n,key:l,index:l,selected:a,hasFocus:i,isDragging:o,singletonRow:e.inheritedInternalInteractionGroups.length<=1,onMouseDown:c,onMouseMove:d,onMouseUp:p,dispatch:e.dispatch,category:rt.J.INHERITED_INTERNAL,autoOpenVariablePicker:t,recordingKey:Z.Pt("prototypeInheritedInternalInteractionList",l),inSites:e.inSites}),openFile:e.openFile,onChange:t=>e.onChange(t,rt.J.INHERITED_INTERNAL),currentSelectedProperty:e.currentSelectedProperty,selectedPropertyType:a.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,propertyList:e.inheritedInternalInteractionGroups,pickerShown:null,dispatch:e.dispatch,onDeleteProperty:t=>e.onDeleteProperty(t,rt.J.INHERITED_INTERNAL),shouldIgnoreKeyboardEvents:e.shouldIgnoreKeyboardEvents,recordingKey:Z.Pt("prototypeInheritedInternalInteractionList")}))}function rO({interactionGroups:e,interactionGroup:t,index:n,hasFocus:o,isDragging:i,selected:c,singletonRow:d,onMouseDown:p,onMouseMove:u,onMouseUp:y,dispatch:E,category:g,recordingKey:h,inSites:_}){let f=(0,m.GS)(),{getNodeName:b}=r.useContext(ra),S=(0,l.d4)(rc.DV),T=(0,rc.a2)(),v=(0,l.d4)(rL),k=v?.id===nh.o$?v:null,P=(0,l.d4)(n9.dK),[I,N]=r.useState(!1),C=(0,w.useAtomValue)(n6.NE)?rw:rN,A=r.useContext(rT.qd),R=function(e,t){let n=new Set(t.map(e=>{let t=n4.s(e);return t?np.dI(t.interactionID):""}).filter(e=>""!==e));for(let t of e.interactions){let e=np.dI(t.id);if(e&&n.has(e))return!0}return!1}(t,S),O=r.useRef(null),L=r.useRef(null),x=r.useCallback(()=>{let e=f&&_?L.current:O.current;rY((0,nf.cn)(e))},[_,f]),M=r.useCallback(()=>{a.glU.setSelectedInteractions([]),E(ea.XE()),ed.Y5.deselectProperty()},[E]),F=n=>{if(!O||!L)return;let r=rB(t);if(n.metaKey||n.ctrlKey)R?r=S.filter(e=>!r.includes(e)):r.push(...S);else if(n.shiftKey){var l;let n,a;let o=(l=t.key,e.findIndex(({key:e})=>e===l));if(-1===o)return;let i=function(e,t){let n=1/0,r=e;for(let l of t){let t=Math.abs(e-l);t<n&&(r=l,n=t)}return r}(o,function(e,t){let n=new Set,r=new Set(t);for(let t=0;t<e.length;t++)rB(e[t]).some(e=>r.has(e))&&n.add(t);return n}(e,S)),s=(n=o,a=i,o>i&&(n=i,a=o),e.slice(n,a+1));for(let e of(r=[...S],s))r.push(...rB(e))}a.glU.setSelectedInteractions(r),ed.Y5.updateAppModel({currentSelectedProperty:{type:g===rt.J.NORMAL?a.rrT.PROTOTYPE_INTERACTION:a.rrT.PROTOTYPE_INHERITED_INTERNAL_INTERACTION,indices:[]}}),r.length?k&&k.shouldPin?_&&(r.length>1||r.includes(S[0]))&&M():x():M()},K=(0,l.d4)(rn.ZM),D=!1,V=null,U=null;for(let e of t.interactions)if(!V&&e.actions&&e.actions.length>0)V=e.actions[0],U=e;else if(rU(V,b,f,K)!=rU((e.actions??[])[0],b,f,K)){D=!0;break}let B=()=>{let e=rG(t.interactions);a.glU.hoverInteractions(e),N(!0)},G=()=>{a.glU.hoverInteractions([]),N(!1)},Y=e=>{e.stopPropagation()},H=e=>{e.stopPropagation();let n=rG(t.interactions);j.l7.user("delete-prototype-interactions",()=>a.glU.deleteInteractions(n)),ed.Y5.deselectProperty(),ed.Y5.commit()},Q=!1,z=!1;if(g===rt.J.NORMAL){for(let e of t.interactions){if(!e.actions||0===e.actions.length)continue;let t=e.actions[0];if(!t||"SWAP_STATE"!==t.navigationType)continue;let n="";if(t.transitionNodeID){let e=P.get(np.dI(t.transitionNodeID));if(e){if(e.isState)n=e.parentGuid||"";else{Q=!0;break}}}let r=a.glU.getContainingStateGroupOrSelf(np.dI(e.sourceNodeID??np.Hr))||"";if(""===r||""!==n&&r!==n){Q=!0;break}}let n=["ON_CLICK","MOUSE_DOWN","MOUSE_UP"].includes(t.event.interactionType??""),r=e.some(e=>"ON_HOVER"===e.event.interactionType);z=n&&r}Q=g!==rt.J.INHERITED_INTERNAL&&Q;let W=function(e,t,n){if(e!==rt.J.INHERITED_INTERNAL)return null;let r=n.find(e=>e.key===t.key&&e.interactions.length===t.interactions.length&&1===t.interactions.length&&function(e,t){let n=void 0!==e.actions&&e.actions.length>=1,r=void 0!==t.actions&&t.actions.length>=1;if(!n||!r)return!1;let l=e.actions.every(e=>"UPDATE_MEDIA_RUNTIME"===e.connectionType),a=e.actions.every(e=>np.fn(e.transitionNodeID));var o=!1;for(let e of t.actions)if("INTERNAL_NODE"===e.connectionType&&"SWAP_STATE"===e.navigationType){o=!0;break}return l&&a&&o}(e.interactions[0],t.interactions[0]));return r?.interactions[0]??null}(g,t,e),$=(0,J.ZC)(W),X=(0,n1.U)();if(r.useEffect(()=>{null===$&&W&&X("prototype_interaction_conflict_override_created",{interaction_type:t.interactions[0].event?.interactionType,action_type:W.event?.interactionType})}),(0,s.kc)().sts_interaction_interop&&t.event.interactionType&&A&&A!==(0,ri.hD)(t.event.interactionType)||(0,s.kc)().sts_interaction_interop&&"mouse"===A&&(0,rT.zL)(t.interactions))return null;let q=g===rt.J.INHERITED_INTERNAL&&T.some(e=>e.key===t.key)&&!W,ee=c&&o,et=R&&!c,en=new n7.js(f,K),el=(0,n7.mj)(V),eo=U?.actions?.length??0,ei=(0,s.kc)().sts_interaction_interop&&eo>1?(0,er.t)("sites.panel.interaction_summary",{numActions:eo}):D||!V||"NONE"===el?void 0:en.format(el),es=r.createElement(nq.Z,null),ec=Q||z||q,ep=Q?(0,er.t)("proto.prototype_panel.this_interaction_must_swap_from_a_variant_to_another_variant_within_the_same_component_set_tooltip"):z?(0,er.t)("proto.prototype_panel.prototype_multiple_interactions_mouse_and_hover_tooltip"):q?(0,er.t)("proto.prototype_panel.this_interaction_will_not_be_triggered_as_interactions_on_instances_are_triggered_before_inherited_internal_interactions_tooltip"):"",eu=r.createElement(tG.Y9,{ref:L,"data-testid":`prototypeInteractionItem-${n}`,singletonRow:d,dragging:i,onMouseDown:p,onMouseMove:u,onMouseUp:y,onMouseEnter:B,onMouseLeave:G,recordingKey:Z.Pt(h,"draggableRow"),onClick:(0,s.kc)().sts_interaction_interop?F:n5.lQ,selected:R&&!!k},r.createElement(tG.s2,{label:null,leftIcon:r.createElement(eG.d,{"aria-expanded":et&&!!k,recordingKey:Z.Pt(h,"interactionIcon"),onClick:(0,s.kc)().sts_interaction_interop?n5.lQ:F,htmlAttributes:{onMouseDown:Y,"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":ec?ep:rV(t.event,C,!!_)},"aria-label":ec?ep:rV(t.event,C,!!_),children:ec?es:(0,n8.e7)(t.event.interactionType)}),input:r.createElement(n2.D8,{onClick:(0,s.kc)().sts_interaction_interop?n5.lQ:F,onMouseDown:Y,recordingKey:Z.Pt(h,"interactionText")},rV(t.event,C,!!_),ei&&r.createElement("span",{className:"prototype_interaction_list--summaryText--hGpp4"},"\xa0\xb7\xa0",ei)),rightIcon:r.createElement("div",{hidden:(0,s.kc)().sts_interaction_interop&&!I},r.createElement(eS.K,{onClick:H,"aria-label":(0,er.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:Z.Pt(h,"removeButton"),htmlAttributes:{onMouseDown:Y}},r.createElement(eI.U,{svg:rk.A,fallbackSvg:rP.A},r.createElement(nZ.O,null))))}));return _?eu:r.createElement("div",null,r.createElement(e_.e,{ref:O,className:f?"prototype_interaction_list--interactionListRow---i0Rg ui3_rows--ui3OneInputOneIconRow--SMoQ9 ui3_rows--_row--DnZFk ui3_rows--_grid--cP2Wu":void 0,"data-testid":`prototypeInteractionItem-${n}`,selected:ee,selectedSecondary:et,singletonRow:d,dragging:i,onMouseDown:p,onMouseMove:u,onMouseUp:y,onMouseEnter:B,onMouseLeave:G,recordingKey:Z.Pt(h,"draggableRow")},r.createElement(n2.D8,{className:eC()({"prototype_interaction_list--interactionButton--q-58Q":!0,"prototype_interaction_list--interactionButtonSelected--8YX9A":ee,"prototype_interaction_list--interactionButtonSelectedSecondary--Nx73L":et}),onClick:F,onMouseDown:Y,recordingKey:h},ec&&r.createElement(n3.B,{className:"prototype_interaction_list--warningIcon--Mgr5O",svg:rI.A,"data-tooltip-type":eN.Ib.SPECIAL,"data-tooltip":rS,"data-tooltip-text":ep}),r.createElement("div",{className:ec?"prototype_interaction_list--interactionNameShort--5UMLL prototype_interaction_list--interactionName--zQsSL":"prototype_interaction_list--interactionName--zQsSL"},rV(t.event,C,!!_)),r.createElement(eI.U,{className:"prototype_interaction_list--actionIcon--x-haP",svg:D?(0,n8.Yb)("NONE"):(0,n8.Yb)((0,n7.mj)(V))},(0,n8.av)((0,n7.mj)(V))),r.createElement("div",{className:"prototype_interaction_list--targetText--UMXyE",dir:"auto"},D?(0,er.t)("proto.variant_actions.mixed"):g===rt.J.INHERITED_INTERNAL?(0,er.t)("proto.variant_actions.change_to"):rU(V,b,f,K))),r.createElement("span",{className:"prototype_interaction_list--removeButton--g6aiQ"},r.createElement(eS.K,{onClick:H,"aria-label":(0,er.t)("proto.prototype_panel.remove_interaction_tooltip"),recordingKey:Z.Pt(h,"removeButton"),htmlAttributes:{onMouseDown:Y}},r.createElement(eI.U,{svg:rk.A,fallbackSvg:rP.A},r.createElement(nZ.O,null))))))}function rL(e){return e.pickerShown}function rx(e){return e.mirror.appModel.currentSelectedProperty}function rM(e){return e.mirror.selectionProperties.resettableInstanceOverrides}function rF(e){return e.mirror.selectionProperties.isValidPrototypingSourceSelected??!0}function rK(){let e=(0,l.d4)(n9.Xt),t=(0,l.d4)(n9.dK);for(let n of Object.keys(e)){let e=t.get(n);if(e&&("INSTANCE"===e.type||e.isInstanceSublayer))return!0}return!1}let rD=["ON_CLICK","DRAG","ON_HOVER","ON_PRESS","MOUSE_ENTER","MOUSE_LEAVE","MOUSE_DOWN","MOUSE_UP"];function rV(e,t,n){let r=t.format(e.interactionType??"NONE");if("ON_KEY_DOWN"===e.interactionType&&e.keyTrigger&&e.keyTrigger.keyCodes){let t=(0,rs._i)(e.keyTrigger.keyCodes),l=(0,rs.E8)(e.keyTrigger,!0);if("KEYBOARD"===e.keyTrigger.triggerDevice&&t)return(0,s.kc)().sts_interaction_interop&&n?(0,rs.U8)(t):r+" ("+(0,rs.U8)(t)+")";if(l)return(0,s.kc)().sts_interaction_interop&&n?l:r+" ("+l+")"}return r}function rU(e,t,n,r){let l=new n7.js(n,r);if(!e)return l.format("NONE");let a=(0,n7.mj)(e);switch(a){case"NONE":case"GO_BACK":case"CLOSE_OVERLAY":case"SET_VARIABLE":case"SET_VARIABLE_MODE":case"CONDITIONAL":return l.format(a);case"OPEN_URL":if(null!=e.connectionURL){if((0,U.gl)(e.connectionURL))return(0,er.t)("fullscreen.mixed");return e.connectionURL.replace(/https?:\/\//,"")}return l.format("NONE");case"UPDATE_MEDIA_PLAY":case"UPDATE_MEDIA_PAUSE":case"UPDATE_MEDIA_TOGGLE_PLAY_PAUSE":case"UPDATE_MEDIA_MUTE":case"UPDATE_MEDIA_UNMUTE":case"UPDATE_MEDIA_TOGGLE_MUTE_UNMUTE":case"UPDATE_MEDIA_SKIP_FORWARD":case"UPDATE_MEDIA_SKIP_BACKWARD":case"UPDATE_MEDIA_SKIP_TO":return rC.format(e)}return e.transitionNodeID?(0,U.gl)(e.transitionNodeID)?(0,er.t)("fullscreen.mixed"):t(np.dI(e.transitionNodeID)):l.format("NONE")}function rB(e){return e.interactions.filter(e=>e.id&&e.sourceNodeID).map(e=>n4.d({nodeID:e.sourceNodeID,interactionID:e.id}))}function rG(e){let t=[];for(let n of e){let{sourceNodeID:e,id:r}=n;e&&r&&t.push(n4.d({nodeID:e,interactionID:r}))}return t}function rY(e){ed.Y5.triggerAction("show-prototype-interaction-edit-modal",{args:{source:a.yxn.PROPERTIES_PANEL,x:e.x,y:e.y}})}var rH=n(933174),rQ=n(462575),rz=n(270068),rW=n(444184),r$=n(656720),rj=n(761089),rX=n(263159);let rJ=(0,r.memo)(function(e){return(0,rX.jsx)("svg",{width:"24",height:"24",fill:"none",viewBox:"0 0 24 24",...e,children:(0,rX.jsx)("path",{fill:"var(--color-icon)",fillRule:"evenodd",d:"M14 7.879v-1.88a1 1 0 0 0-1.707-.706L9.586 8H7.5A1.5 1.5 0 0 0 6 9.5v5c0 .383.144.733.38.998l.711-.71A.5.5 0 0 1 7 14.5v-5a.5.5 0 0 1 .5-.5H10l2-2 1-1v2.879zm0 4.242-1 1V18l-1-1-1.44-1.44-.706.708 2.439 2.439A1 1 0 0 0 14 18v-5.88m2.069-2.068.71-.71a3.501 3.501 0 0 1-1.217 5.993c-.29.092-.562-.144-.562-.448v-.03c0-.237.17-.437.392-.522a2.5 2.5 0 0 0 .677-4.283m-1.013 1.013.172-.172c.113-.056.248-.044.36.073.255.269.412.632.412 1.033s-.157.764-.412 1.033c-.238.25-.588.02-.588-.326v-1.415a.5.5 0 0 1 .056-.226m2.798-4.92a.5.5 0 0 1 0 .708l-11 11a.5.5 0 1 1-.708-.707l11-11a.5.5 0 0 1 .708 0",clipRule:"evenodd"})})});var rq=n(848070),rZ=n(443420),r0=n(477633),r1=n(564734),r4=n(68710),r5=n(632319);function r2({videoPlayback:{mediaLoop:e,muted:t}}){let n=null;return(0,U.gl)(e)&&(0,U.gl)(t)?n=(0,er.tx)("proto.prototype_panel.replace_mixed_muted_and_loop_video_playback",{loopSvg:r.createElement(n3.B,{svg:r0.A,className:rZ.eT}),speakerSvg:r.createElement(n3.B,{svg:r4.A,className:rZ.To})}):(0,U.gl)(e)?n=(0,er.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:r.createElement(n3.B,{svg:r0.A,className:rZ.eT})}):(0,U.gl)(t)&&(n=(0,er.tx)("proto.prototype_panel.replace_mixed_video_playback",{svg:r.createElement(n3.B,{svg:r4.A,className:rZ.To})})),n?r.createElement(ef.fI,null,r.createElement(ef.UZ,{className:rZ.pc},n)):null}let r3=e=>(0,U.gl)(e)?"mixed":e,r7=e=>!0===e,r8=function(e){let t=()=>{let t=!r7(e.videoPlayback.mediaLoop);e.updateSelectionProperties({videoMediaLoop:t}),e.dispatch((0,nm._P)({name:"Node video loop changed",params:{newLoop:t,oldLoop:r3(e.videoPlayback.mediaLoop),numVideosSelected:e.videoPlayback.numVideosSelected}}))},n=()=>{let t=!e.videoPlayback.muted;e.updateSelectionProperties({videoMuted:t}),e.dispatch((0,nm._P)({name:"Node video muted changed",params:{newMuteValue:t,oldMuteValue:r3(e.videoPlayback.muted),numVideosSelected:e.videoPlayback.numVideosSelected}}))},l=r.createElement("span",{className:(0,m.GS)()?void 0:rZ.hW},r.createElement(rQ.S,{label:r.createElement(nJ.J,{htmlAttributes:{"data-tooltip":(0,er.t)("proto.prototype_panel.default_video_playback_state"),"data-tooltip-type":eN.Ib.TEXT}},(0,er.tx)("proto.prototype_panel.autoplay")),onChange:t=>{e.updateSelectionProperties({videoAutoplay:t}),e.dispatch((0,nm._P)({name:"Node video autoplay Changed",params:{newAutoplay:t,oldAutoplay:r3(e.videoPlayback.autoplay),numVideosSelected:e.videoPlayback.numVideosSelected}}))},checked:r7(e.videoPlayback.autoplay),mixed:(0,U.gl)(e.videoPlayback.autoplay),recordingKey:Z.Pt(e,"autoPlayToggle")})),a=(0,m.GS)()?r.createElement(rz.f,{checked:r7(e.videoPlayback.mediaLoop),mixed:(0,U.gl)(e.videoPlayback.mediaLoop),onIcon:r.createElement(eI.U,{svg:r0.A},r.createElement(rW.p,null)),offIcon:r.createElement(eI.U,{svg:r1.A},r.createElement(r$.U,null)),onChange:t,recordingKey:Z.Pt(e,"videoLoopToggle"),"aria-label":(0,er.t)("proto.prototype_panel.loop"),htmlAttributes:{"data-tooltip":(0,er.t)("proto.prototype_panel.loop"),"data-tooltip-type":eN.Ib.TEXT}}):r.createElement(rq.m,{toggled:r7(e.videoPlayback.mediaLoop),svg:e.videoPlayback.mediaLoop?r0.A:r1.A,fallbackSvg:e.videoPlayback.mediaLoop?r0.A:r1.A,onMouseDown:t,recordingKey:Z.Pt(e,"videoLoopToggle"),"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("proto.prototype_panel.loop"),dataTestId:"videoLoopToggle",className:rZ.BM}),o=(0,m.GS)()?r.createElement(rz.f,{checked:r7(!e.videoPlayback.muted),mixed:(0,U.gl)(e.videoPlayback.muted),onIcon:r.createElement(eI.U,{svg:r4.A},r.createElement(rj.L,null)),offIcon:r.createElement(eI.U,{svg:r5.A},r.createElement(rJ,null)),onChange:n,recordingKey:Z.Pt(e,"videoSoundToggle"),"aria-label":(0,er.t)("proto.prototype_panel.sound"),htmlAttributes:{"data-tooltip":(0,er.t)("proto.prototype_panel.sound"),"data-tooltip-type":eN.Ib.TEXT}}):r.createElement(rq.m,{toggled:!e.videoPlayback.muted,svg:r7(e.videoPlayback.muted)?r5.A:r4.A,fallbackSvg:r7(e.videoPlayback.muted)?r5.A:r4.A,onMouseDown:n,recordingKey:Z.Pt(e,"videoSoundToggle"),"data-tooltip-type":eN.Ib.TEXT,"data-tooltip":(0,er.t)("proto.prototype_panel.sound"),dataTestId:"videoSoundToggle",className:rZ.BM}),i=(0,m.GS)()?r.createElement(tG.pG,{input:l,leftIcon:a,rightIcon:o}):r.createElement(ef.fI,{className:rZ.kh},l,r.createElement("div",{className:rZ.zc},a,o));return r.createElement(ef.Zk,null,r.createElement(ef.fI,null,r.createElement(ef.xw,{extended:!0},(0,er.tx)("proto.prototype_panel.video"))),i,r.createElement(r2,{videoPlayback:e.videoPlayback}))};var r6=n(236891),r9=n(816222),le=n(742713),lt=n(420450),ln=n(955136);function lr(e){let{type:t}=e;return r.createElement("div",{className:tU.s.flex.justifyCenter.itemsCenter.$},r.createElement(n3.B,{className:tU.s.flexGrow1.mx12.$,useOriginalSrcFills_DEPRECATED:!0,svg:"horizontal"===t?lt.A:ln.A}),r.createElement("span",{className:tU.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,er.tx)("proto.prototype_panel.content_needs_to_be_bigger_than_the_frame_tooltip")))}let ll=(0,rb.ex)("prototype_scroll_horizontal_info",lr,()=>({type:"horizontal",unconstrainWidth:!0})),la=(0,rb.ex)("prototype_scroll_vertical_info",lr,()=>({type:"vertical",unconstrainWidth:!0})),lo=(0,rb.ex)("prototype_scroll_marquee_info",function(){return r.createElement("div",{className:tU.s.flex.justifyCenter.itemsCenter.$},r.createElement("span",{className:tU.s.flexGrow1.m6.$,style:{maxWidth:144}},(0,er.tx)("proto.prototype_panel.overflow_scrolling_not_available_for_frames_with_marquee")))},()=>({})),li="scroll_behavior_panel--inactiveLabel--IexW8",ls="scroll_behavior_panel--inactiveLabelContainer--lQjAi";function lc(e){let{disableOverflowBehaviorItem:t,disableScrollBehaviorItem:n,dropdownShown:o,updateSelectionProperties:i}=e,s=(0,l.wA)(),[c,d]=function(){let e=(0,b.J2)(a.Ez5.propertiesPanelState().shownPropertiesPanels)[a.ibQ.OVERFLOW_ITEM],t=(0,nd.cJ)(),n=(0,G.kl)("isSection"),r=(0,G.kl)("anyTopLevelFramesInSelection");return[e,!t&&!n&&!r]}(),[p]=(0,G.lJ)("showWontScrollWarning"),[u]=(0,G.lJ)("scrollDirection"),y=lh(),E=(0,m.GS)()?r.createElement(le.iE,{titleTx:(0,er.tx)("proto.scroll_panel.scroll_behavior_title")}):r.createElement(ef.fI,null,r.createElement(ef.xw,{className:"scroll_behavior_panel--panelTitle--kN-Nl"},(0,er.tx)("proto.scroll_panel.scroll_behavior_title")));return c||d?r.createElement(en.k,{name:"scroll_behavior_panel"},r.createElement(ef.Zk,null,E,d&&r.createElement(ef.fI,null,r.createElement("div",{className:ls},r.createElement("span",{className:li},(0,er.tx)("proto.scroll_panel.position_dropdown.position"))),r.createElement(lg,{recordingKey:Z.Pt(e,"scrollBehavior"),dropdownShown:o,disabled:n})),c&&r.createElement(ef.fI,null,r.createElement("div",{className:ls},r.createElement("span",{className:li},(0,er.tx)("proto.scroll_panel.overflow_dropdown.overflow"))),p&&r.createElement("div",{className:"scroll_behavior_panel--infoIcon--FeXbf","data-tooltip-type":eN.Ib.SPECIAL,"data-tooltip":y?lo:"HORIZONTAL"===u?ll:la,"data-tooltip-show-immediately":!0},r.createElement(r9.r,null)),r.createElement(lm,{className:p?"scroll_behavior_panel--scrollDirectionShort--w6iSo":"scroll_behavior_panel--scrollDirection--XSmzK",property:u,dispatch:s,dropdownShown:o,onChange:e=>{s((0,nm._P)({name:"Overflow Behavior changed",params:{newDirection:e,oldDirection:(0,U._W)(u,"MIXED")}})),i({scrollDirection:e})},disabled:t||y,recordingKey:Z.Pt(e,"scrollDirection")})))):null}let ld=nO.l6,lp=nO.c$,lu=["NONE","HORIZONTAL","VERTICAL","BOTH"];class lm extends r.PureComponent{render(){return r.createElement(ld,{id:"scroll-direction-select",className:this.props.className,chevronClassName:"scroll_behavior_panel--scrollDirectionChevron--5keRt",inputClassName:"scroll_behavior_panel--scrollDirectionInput--vJSqu",property:this.props.property||"NONE",formatter:n7.Rk,onChange:this.props.onChange,dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,disabled:this.props.disabled,recordingKey:this.props.recordingKey,dataTestId:"scroll-direction-dropdown"},lu.map(e=>r.createElement(lp,{key:e,value:e,recordingKey:Z.Pt(this.props,e)})))}}lm.displayName="ScrollDirectionDropdown";let ly=nO.l6,lE=nO.c$;function lg(e){let t=(0,l.wA)(),n=(0,G.kl)("scrollBehavior"),{fixedScrollingDisabled:o}=(0,i.R)(e=>{let t=e.mirror.selectionProperties;return{fixedScrollingDisabled:!t.nodesAreAllNotInStacksOrAbsolutePositioned||!t.allHaveScrollableFrameAsParent}}),s="scroll-behavior-select",c=e.dropdownShown&&e.dropdownShown.type===s?n7.Ge:n7.wi;return r.createElement(ly,{id:s,className:"scroll_behavior_panel--scrollPosition--YAyUM",formatter:c,property:n||"SCROLLS",onChange:e=>{t((0,nm._P)({name:"Node Scroll Behavior Changed",params:{newValue:e}}));let n="FIXED_WHEN_CHILD_OF_SCROLLING_FRAME"===e?a.KjJ.FIXED:"STICKY_SCROLLS"===e?a.KjJ.STICKY_SCROLLS:a.KjJ.SCROLLS;j.l7.user("set-scroll-behavior",()=>a.X3B.aggressivelySetScrollBehaviorOfSelection(n)),ed.Y5.commit()},dispatch:t,dropdownShown:e.dropdownShown,dropdownClassName:"scroll_behavior_panel--fullWidth--reSmx",recordingKey:e.recordingKey,disabled:e.disabled,dataTestId:"scroll-behavior-dropdown"},r.createElement(lE,{value:"SCROLLS"}),r.createElement(lE,{value:"FIXED_WHEN_CHILD_OF_SCROLLING_FRAME",disabled:o}),r.createElement(lE,{value:"STICKY_SCROLLS"}))}let lh=()=>{let[e]=(0,G.lJ)("marquee");return!!(0,r6.EA)(e)};var l_=n(485513),lf=n(105020),lb=n(548183),lS=n(854547),lT=n(654784),lv=n(351731);function lk(){return r.createElement(ny.u,{idForTests:"create-connection-hint",title:(0,er.t)("proto.onboarding.creating_a_connection"),userFlag:"dismissed_create_connection_hint",icon_DEPRECATED:lS.A,iconFallback:lT.A,hintText:(0,er.t)("proto.onboarding.select_a_frame_or_object_hint")})}function lP(){return r.createElement(ny.u,{idForTests:"delete-connection-hint",title:(0,er.t)("proto.onboarding.removing_a_connection"),userFlag:"dismissed_delete_connection_hint",icon_DEPRECATED:lf.A,iconFallback:lb.A,hintText:(0,er.t)("proto.onboarding.to_delete_a_connection_click_and_drag_on_either_end")})}function lI(){return r.createElement(ny.u,{idForTests:"play-button-hint",title:(0,er.t)("proto.onboarding.running_your_prototype"),userFlag:"dismissed_play_button_hint",icon_DEPRECATED:lv.A,hintText:(0,er.t)("proto.onboarding.use_the_play_button_hint")})}function lN({dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:l}){let a=0===l&&!e,o=0!==l&&!t,i=!n,s=r.useMemo(()=>a?nu.c.CREATING_A_CONNECTION:o?nu.c.REMOVING_A_CONNECTION:i?nu.c.RUNNING_YOUR_PROTOTYPE:null,[a,o,i]);return s?r.createElement(nl.fu,{name:"Prototype Onboarding Hint Panel V1",properties:{trackingDescriptor:s}},r.createElement(ef.Zk,null,r.createElement("div",null,a&&r.createElement(lk,null),o&&r.createElement(lP,null),i&&r.createElement(lI,null)))):null}class lw extends r.PureComponent{constructor(){super(...arguments),this.onClickShowPrototypeSettings=()=>{this.props.dispatch((0,nm._P)({name:"Show Prototype Settings Clicked"})),h.wr()}}renderOnboardingPanel(){let e=!!this.props.userFlags.dismissed_create_connection_hint,t=!!this.props.userFlags.dismissed_delete_connection_hint,n=!!this.props.userFlags.dismissed_play_button_hint,l=this.props.numTransitionsOnCurrentPage;return r.createElement(lN,{dismissedCreateConnectionHint:e,dismissedDeleteConnectionHint:t,dismissedPlayButtonHint:n,numTransitionsOnCurrentPage:l})}renderPrototypeSettingsPanel(){return r.createElement(en.k,{name:"show_prototype_settings_panel"},r.createElement(ef.Zk,{className:this.props.isUI3?l_.rq:void 0},r.createElement(tB.z,{onClick:this.onClickShowPrototypeSettings,recordingKey:Z.Pt(this.props,"prototypeSettingsButton")},(0,er.tx)("proto.menu.show_prototype_settings"))))}renderDevicePanel(){(0,Q.KF)((0,U.hS)(this.props.prototypeDevice),"should not have mixed device selection");let e=(0,nm.Qx)(this.props.prototypeDevice);return r.createElement(nY,{key:"device-panel",dispatch:this.props.dispatch,dropdownShown:this.props.dropdownShown,prototypeBackgroundColor:this.props.prototypeBackgroundColor,prototypeDevice:e,smallNudgeAmount:this.props.smallNudgeAmount,bigNudgeAmount:this.props.bigNudgeAmount,recordingKey:"devicePanel",isUI3:this.props.isUI3,pickerShown:this.props.pickerShown})}render(){let e=!(0,U.hS)(this.props.transitionNodeID)||np.fn((0,U.E7)(this.props.transitionNodeID)),t=this.props.numSelected??!1,n=!this.props.isSites&&!!this.props.numVideosSelected,l=this.props.isInstanceSelected||this.props.isInstanceSublayerSelected,a=this.props.isInstanceSublayerSelected,o=!this.props.isSites&&this.props.prototypeStartingPointsInfo&&this.props.prototypeStartingPointsInfo.length>0,i=!this.props.isSites&&!e,s=!this.props.isSites&&((this.props.isValidPrototypingSourceSelected??!0)||this.props.isSectionSelected&&(0,nE.YR)());if(!t)return r.createElement("div",null,!this.props.isSites&&this.renderDevicePanel(),!this.props.isUI3&&r.createElement(nk,{recordingKey:Z.Pt(this.props,"backgroundPanel"),prototypeBackgroundColor:this.props.prototypeBackgroundColor,pickerShown:this.props.pickerShown,dispatch:this.props.dispatch}),o&&r.createElement(ni.A,null),!this.props.isSites&&i&&this.renderOnboardingPanel(),r.createElement(tf.Mw,{panelName:tf.ON.PROTOTYPE}));{let e=r.createElement(lc,{dropdownShown:this.props.dropdownShown,disableOverflowBehaviorItem:!!l,disableScrollBehaviorItem:!!a,recordingKey:Z.Pt(this.props,"scrollBehaviorPanel"),updateSelectionProperties:ed.Y5.updateSelectionProperties});return r.createElement("div",null,!this.props.isSites&&this.props.isTopLevelFrameAndValidPrototypeSourceSelected&&r.createElement(rH.A,{recordingKey:Z.Pt(this.props,"startingPointPanel")}),s&&r.createElement(rA,null),e,n&&r.createElement(r8,{updateSelectionProperties:ed.Y5.updateSelectionProperties,dispatch:this.props.dispatch,videoPlayback:this.props.videoPlayback,recordingKey:Z.Pt(this.props,"prototypeVideoPlaybackPanel")}),!this.props.isSites&&this.renderPrototypeSettingsPanel(),i&&this.renderOnboardingPanel(),r.createElement(tf.Mw,{panelName:tf.ON.PROTOTYPE}),r.createElement("div",null))}}}lw.displayName="PrototypePanel";let lC=(0,nl.kp)(function(e){let t=(0,_.p8)("currentTool"),n=(0,_.p8)("activeCanvasEditModeType"),{bigNudgeAmount:l,smallNudgeAmount:a}=(0,E.sT)(),o=(0,m.GS)(),i=(0,nd.cJ)(),s=function(e){let t=e?G.pw:G.zj,n=e?G.DQ:G.fC;return{...t("prototypeDevice","prototypeBackgroundColor","numSelected","numVideosSelected","transitionNodeID","isInstanceSublayerSelected","isInstanceSelected","isValidPrototypingSourceSelected","isTopLevelFrameAndValidPrototypeSourceSelected"),...n("isSectionSelected","numTransitionsOnCurrentPage","prototypeStartingPointsInfo")}}(e.shouldUseSelectedStyleProperties),c=function(e){let t=(0,G.Gt)("videoMediaLoop"),n=(0,G.Gt)("videoAutoplay"),r=(0,G.Gt)("videoMuted"),l=(0,G.Gt)("numVideosSelected");if(e)return(0,Q.B1)(t),(0,Q.B1)(n),(0,Q.B1)(r),(0,Q.B1)(l),{autoplay:n,muted:r,mediaLoop:t,numVideosSelected:l}}(!!s.numVideosSelected);return r.createElement(lw,{...e,...s,videoPlayback:c,bigNudgeAmount:l,smallNudgeAmount:a,isUI3:o,isSites:i,currentTool:t,editModeType:n})},na.e0.PROTOTYPE_PANEL);function lA({colorFormat:e,dropdownShown:t,expandedFramePresetType:n,library:o,pickerShown:i,sceneGraphSelection:s,shownPanels:c,userFlags:d}){let p=(0,l.wA)(),u=(0,ep.q5)(),m=(0,nd.cJ)(),y=(0,G.tN)("containsResponsiveSets"),E=!c[a.ibQ.FRAME_PRESETS]&&!c[a.ibQ.PENCIL_TOOL]&&!y;return r.createElement(L.i,null,r.createElement(F.VF,{isVisible:c[a.ibQ.FRAME_PRESETS]},()=>r.createElement(K.nl,{key:"frame-presets",recordingKey:"framePresetPanel",dispatch:p,expandedFramePresetType:n})),!m&&r.createElement(F.VF,{isVisible:c[a.ibQ.PENCIL_TOOL]},()=>r.createElement(D.q,{id:"pencilToolPanel",key:"pencilToolPanel",recordingKey:"pencilToolPanel",openFile:u})),r.createElement(F.VF,{isVisible:E},()=>r.createElement(lC,{key:"prototype",recordingKey:"prototypePanel",dispatch:p,shouldUseSelectedStyleProperties:!0,pickerShown:i,dropdownShown:t,colorFormat:e,sceneGraphSelection:s,library:o,openFile:u,userFlags:d})))}function lR({scrollContainer:e,refMainScrollContainer:t,...n}){(0,nr.S2)();let l=(0,y.k)(),o=n.propertiesPanelTab,i=(0,_.p8)("topLevelMode"),s=(0,V.Dj)(n.user),c=i!==a.lyf.PREVIEW&&(i!==a.lyf.BRANCHING||!s)&&i!==a.lyf.DEV_HANDOFF&&o===a.FAf.DESIGN,d=i!==a.lyf.PREVIEW&&i!==a.lyf.BRANCHING&&o===a.FAf.PROTOTYPE,p=i===a.lyf.PREVIEW&&!n.userStateLoaded&&!l||o===a.FAf.INSPECT,u=o===a.FAf.EXPORT,m=o===a.FAf.COMMENT;return r.createElement(r.Fragment,null,c&&r.createElement(ne,{scrollContainer:e,...n}),d&&r.createElement(lA,{colorFormat:n.colorFormat,dropdownShown:n.dropdownShown,expandedFramePresetType:n.expandedFramePresetType,library:n.library,pickerShown:n.pickerShown,sceneGraphSelection:n.sceneGraphSelection,shownPanels:n.shownPanels,userFlags:n.userFlags}),p&&r.createElement(ns,{scrollContainer:e}),u&&r.createElement(nn,{dropdownShown:n.dropdownShown,pickerShown:n.pickerShown,saveAsState:n.saveAsState,sceneGraphSelection:n.sceneGraphSelection}),m&&r.createElement(n.commentsPanel,null))}function lO(e){!function(){let e="ui3"===(0,P.DP)().version,{isPropertiesPanelCollapsed:t,setPropertiesPanelCollapsed:n}=(0,N.iT)(),o=(0,I.Ye)(),i=(0,p.ow)(),s=(0,_.ax)(),c=(0,_.dH)(),d=c===a.NLJ.FRAME||c===a.NLJ.COMMENTS||c===a.NLJ.VECTOR_PENCIL,u=(0,l.d4)(e=>e.mirror.appModel.activeUserAction===a.QOV.DEFAULT),m=(0,N.ys)();(0,r.useEffect)(()=>{e&&u&&!i&&t&&(d||s)&&n(!1)},[s,u,c,e,n,t,o,d,i]),(0,r.useEffect)(()=>{m&&n(!0)},[m,n,t])}();let t=null,n=e=>{t=e};return r.createElement(nc.j,{recordingKey:e.recordingKey,activeTab:e.propertiesPanelTab,refMainScrollContainer:n},r.createElement(lR,{...e,scrollContainer:t,refMainScrollContainer:n}))}var lL=n(364985),lx=n(261222),lM=n(192309),lF=n(943984);let lK=r.memo(function(){let e=(0,i.R)(e=>(0,S.getPermissionsState)(e)),t=(0,_.aV)(),n=(0,l.d4)(e=>e.loadingState),P=(0,o.UN)(),I=(0,l.d4)(e=>e.mirror.sceneGraphSelection),N=(0,l.d4)(e=>e.currentUserOrgId),w=(0,l.d4)(e=>e.dropdownShown),C=(0,l.d4)(e=>e.fonts),A=(0,l.d4)(e=>e.fileVersion),R=(0,l.d4)(e=>e.installedPluginVersions),O=(0,l.d4)(e=>e.library),L=(0,l.d4)(e=>e.localPlugins),x=(0,l.d4)(e=>e.modalShown),M=(0,l.d4)(e=>e.openFile),F=(0,l.d4)(e=>e.pickerShown),K=(0,l.d4)(e=>e.pickerInStyleCreationShown),D=(0,l.d4)(e=>e.publishedPlugins),V=(0,l.d4)(e=>e.saveAsState),U=(0,l.d4)(e=>e.selectedView),B=(0,l.d4)(e=>e.voice.showWidget),G=(0,l.d4)(e=>e.stylePickerListLayout),Y=(0,l.d4)(e=>e.stylePickerShown),H=(0,l.d4)(e=>e.stylePreviewShown),Q=(0,l.d4)(e=>e.styleSets),z=(0,l.d4)(e=>e.usedKeyboardShortcuts),W=(0,l.d4)(e=>e.user),$=(0,l.d4)(e=>e.userFlags),j=(0,l.d4)(e=>e.userStateLoaded),X=(0,l.d4)(e=>e.repos),J=(0,l.d4)(e=>e.folders),q=(0,l.d4)(e=>e.teams),Z=(0,l.d4)(e=>e.orgById),ee=(0,l.d4)(e=>e.orgUsersByOrgId),et=(0,l.d4)(e=>e.userEduGracePeriods),en=(0,l.d4)(e=>e.licenseGroups),er=(0,m.GS)(),el=(0,p.my)()===T.nT.Design,ea=(0,y.k)(),eo=(0,f.VP)(n,"edit_button_upgrading_to_edit"),ei=t||eo,es=(0,b.ut)((0,h.aY)(),a.FAf.DESIGN),ec=(0,b.J2)(a.Ez5.propertiesPanelState().shownPropertiesPanels),ed=(0,b.J2)(a.Ez5.propertiesPanelState().strokePanelMode),ep=(0,b.J2)(a.Ez5.propertiesPanelState().strokePanelTerminalPointCount),eu=(0,b.J2)((0,E.UK)().expandedFramePresetType),em=(0,E.Ku)(),ey=(0,E.qw)(),eE=(0,u.b)(),eg=(0,b.J2)(a.Ez5.uiState().showPropertiesPanel),eh=!(0,d.Oo)()&&er&&eg,e_=(0,b.J2)((0,E.UK)().renderRulers),{isRightPanelCollapsed:ef}=(0,r.useContext)(v.t),{inProductHelpViewType:eb}=(0,k.A5)(),eS=(0,b.J2)(a.Ez5.uiState().inProductHelpSidePanelWidth),eT=(0,g.Tn)(),ev=(0,g.qM)(),ek=(0,r.useMemo)(()=>ea?a.FAf.COMMENT:es,[es,ea]);return(0,r.useEffect)(()=>{ek!==es&&h.aY()?.set(ek)},[ek,es]),r.createElement(lF.o,{boundaryKey:"PropertiesPanel",loggedOutDesktopRevampExpAvaialable:el},r.createElement(lO,{recordingKey:"propertiesPanel",isCollapsed:ef,propertiesPanelTab:ek,strokePanelMode:ed,strokePanelTerminalPointCount:ep,commentsPanel:lM.L,isLoading:ei,shouldAnimateLoadingState:t,shouldShowBackgroundGradient:eh,shownPanels:ec,rulersVisible:e_,isInsetEditorEnabled:eE,expandedFramePresetType:eu,colorFormat:em,propertiesPanelSplitPosition:ey,permissionsState:e,key:(0,c.tw)()??void 0,sceneGraph:P,sceneGraphSelection:I,currentUserOrgId:N,dropdownShown:w,fonts:C,fileVersion:A,allSavedPlugins:R,library:O,localPlugins:L,modalShown:x,openFile:M,pickerShown:F,pickerInStyleCreationShown:K,publishedPlugins:D,saveAsState:V,selectedView:U,stylePickerListLayout:G,stylePickerShown:Y,stylePreviewShown:H,styleSets:Q,usedKeyboardShortcuts:z,user:W,userFlags:$,userStateLoaded:j,repos:X,folders:J,teams:q,orgById:Z,orgUsersByOrgId:ee,userEduGracePeriods:et,licenseGroups:en,isUI3:er,showVoiceWidget:B,hasMergedDimensionsAndAutolayout:er,inProductHelpViewType:eb,inProductHelpSidePanelWidth:eS,justChangedMinimizeUIValue:eT,isUIMinimized:ev}),(0,s.kc)().asset_binding_picker?r.createElement(lx.lD,null):r.createElement(lL.tZ,null))})},218401:(e,t,n)=>{n.d(t,{Z:()=>A});var r=n(411855),l=n(188507),a=n(245954),o=n(629019),i=n.n(o),s=n(991458),c=n(841962),d=n(612724),p=n(972640),u=n(15721),m=n(343373),y=n(509343),E=n(923219),g=n(965636),h=n(695024),_=n(797187),f=n(549147),b=n(756044),S=n(214718),T=n(846836),v=n(488527);let k="offscreen_indicators--indicatorGraphicBlue---nYr-",P="offscreen_indicators--indicatorGraphicPurple--FAz-M",I=(0,s.jz)(v.J4v),N=(0,s.jz)(v.v5y),w=(0,s.jz)(v.M$q),C=(0,s.jz)(v.y9S);function A(){let e=[],t=(0,g.kl)("selectionRegions"),n=(0,E.E7)(t);n&&(e=n);let o=(0,l.d4)(e=>e.mirror.appModel.hoveredNode);if(o&&(0,c.kc)().ce_offscreen_indicators_for_hovered_nodes){let t=(0,a.UN)().get(o);if(t){let n=t.absoluteBoundingBox;e=[...e,{bounds:{height:n.h,width:n.w,x:n.x,y:n.y},regionType:t.isPrimaryInstance||t.isInstanceSublayer||t.isComponentish||t.isSymbolSublayer?b.fV.SYMBOLS_ONLY:b.fV.MIXED_OR_NO_SYMBOLS}]}}let i=!!e&&e.length>=1,s=(0,h._X)({subscribeToUpdates_expensive:i});return s&&e?r.createElement(R,{viewportInfo:s,regions:e}):null}function R({viewportInfo:e,regions:t}){let n=(0,r.useContext)(f.kw),a=(0,r.useMemo)(()=>n.getCommentsWrapperOffset(e),[n,e]),o=a.x,i=a.y,s={transform:`translate(${o}px, ${i}px)`},c=(0,m.GS)(),d=(0,p.b)(),E=c&&!d,g=(0,l.d4)(e=>e.mirror?.appModel.showUi),b=(0,y.dP)()+(E?w:I),v=(0,y.qw)()+b+(E?w:N),k=(0,T.Ye)(),{isPropertiesPanelCollapsed:P}=(0,u.iT)(),A=(E&&g&&!k?b:0)-3.5,R=(E&&g&&!P?v:0)-7,L=(0,_.J2)((0,y.UK)().renderRulers)&&g?C:0,x={x:A+L,y:-3.5+L,width:e.width-R-L,height:e.height- -7-L},M={x:A+L,y:-3.5+L,width:e.width-R-L,height:e.height- -7-L};return r.createElement(r.Fragment,null,r.createElement(S.p,null,r.createElement("div",{"aria-hidden":!0,"data-forward-events-to-fullscreen":!0,className:"offscreen_indicators--overlay--pNOlw",style:s},!!t?.length&&r.createElement("div",null,t.map((t,n)=>{let l=(0,h.Z0)(e,{x:t.bounds.x,y:t.bounds.y}),a=(0,h.Z0)(e,{x:t.bounds.x+t.bounds.width,y:t.bounds.y+t.bounds.height}),o={x:l.x,y:l.y,width:a.x-l.x,height:a.y-l.y};return o.x<x.x+x.width&&o.x+o.width>x.x&&o.y+o.height>x.y&&o.y<x.y+x.height?null:r.createElement(O,{key:n,viewportBounds:M,viewportInfo:e,indicatorViewportBounds:o,selectionBoundsScaledWidth:function(e,t){let n=Math.max(e.x,t.x);return Math.max(Math.min(e.x+e.width,t.x+t.width)-n,10)}(o,M),selectionBoundsScaledHeight:function(e,t){let n=Math.max(e.y,t.y);return Math.max(Math.min(e.y+e.height,t.y+t.height)-n,10)}(o,M),selectionRegionType:t.regionType})})))))}function O({viewportBounds:e,viewportInfo:t,indicatorViewportBounds:n,selectionBoundsScaledWidth:a,selectionBoundsScaledHeight:o,selectionRegionType:s}){let c=function(e,t){let n=0-t.x,r=0+e.width-t.x,l=0-t.y,a=0+e.height-t.y,o=Math.abs(n)<r?n:r,i=Math.abs(l)<a?l:a,s=n<0!=r<0,c=l<0!=a<0;return s&&c?Math.abs(o)<Math.abs(i)?{x:t.x+o,y:t.y}:{x:t.x,y:t.y+i}:!s&&c?{x:t.x+o,y:t.y}:s&&!c?{x:t.x,y:t.y+i}:{x:t.x+o,y:t.y+i}}(t,{x:n.x+n.width/2,y:n.y+n.height/2});c.x-=a/2,c.y-=o/2;let E=(0,l.d4)(e=>e.mirror?.appModel.showUi),g=(0,_.J2)((0,y.UK)().renderRulers)&&E?C:0,h=(0,m.GS)(),f=(0,p.b)(),S=h&&!f,v=S?w:I,A=S?w:N,R=(0,y.dP)()+v,O=(0,y.qw)()+A,L=(0,T.Ye)(),{isPropertiesPanelCollapsed:x}=(0,u.iT)(),M=1+(E&&S&&!L?R+1:0)+g,F=Math.max(M,t.width-1-a-(E&&S&&!x?O+1:0)),K=1+g,D=Math.max(K,t.height-1-o-1),V=d.Mi.bound(c,{min:{x:M,y:K},max:{x:F,y:D}}),U=n.y+n.height<e.y,B=n.y>e.y+e.height,G=n.x+n.width<e.x,Y=n.x>e.x+e.width;V.x+=t.x,V.y+=t.y;let H=Math.min(t.width-2-(E&&S?O+R:0),a),Q=Math.min(t.height-2,o);return r.createElement("div",{className:"offscreen_indicators--indicator---T9xk",style:{transform:`translate3D(${V.x}px, ${V.y}px, 0)`}},(U||B)&&r.createElement("div",{style:{position:"absolute",height:1.5,width:H,marginTop:B?Q-1.5:0},className:i()({[k]:s===b.fV.MIXED_OR_NO_SYMBOLS,[P]:s===b.fV.SYMBOLS_ONLY})}),(G||Y)&&r.createElement("div",{style:{position:"absolute",left:0,height:Q,width:1.5,marginLeft:Y?H-1.5:0},className:i()({[k]:s===b.fV.MIXED_OR_NO_SYMBOLS,[P]:s===b.fV.SYMBOLS_ONLY})}))}},945647:(e,t,n)=>{n.d(t,{X:()=>O});var r=n(411855),l=n(188507),a=n(5438),o=n(188004),i=n(17643),s=n(50686),c=n(575561),d=n(805014),p=n(851169),u=n(629019),m=n.n(u),y=n(666308),E=n(714266),g=n(797187),h=n(76237),_=n(428104),f=n(864300),b=n(145427),S=n(729705);let T="stack_controls--input--gK1jo text--fontNeg12--2PWcg text--_fontBase--QdLsd text--_negText--j9g-L",v="stack_controls--scrubbableControl--b1ChI",k="stack_controls--inputSvg--wFizL",P="stack_controls--stackSpacingRow--Uus3H";function I(){let e=(0,g.J2)(d.Ez5.canvasViewState().focusedStackRegion);if(!e)return null;let{region:t,focus:n}=e;return t===d.RN9.SPACING?r.createElement(w,{focusOnMount:n}):t===d.RN9.COUNTER_SPACING?r.createElement(C,{focusOnMount:n}):r.createElement(A,{stackRegion:t,focusOnMount:n})}let N=e=>{if(e.keyCode===y.Uz.TAB){e.preventDefault(),e.currentTarget.blur();let t=e.shiftKey;d.Qa7.tabActiveStackRegion(t)}};function w({focusOnMount:e}){return r.createElement(h.fI,{className:P},r.createElement(S.KI,{focusOnMount:e,outerClassName:v,inputClassName:T,svgClassName:k,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:N,onPaste:R,noBorderOnFocus:!0,recordingKey:"stackSpacingControl",inputTestId:"stackSpacingControl",source:"canvas",onCanvasUI:!0}))}function C({focusOnMount:e}){return r.createElement(h.fI,{className:P},r.createElement(_.q,{focusOnMount:e,outerClassName:v,inputClassName:T,svgClassName:k,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:N,onPaste:R,noBorderOnFocus:!0,recordingKey:"stackCounterSpacingControl",inputTestId:"stackCounterSpacingControl",source:"canvas",onCanvasUI:!0}))}function A({stackRegion:e,focusOnMount:t}){let[n]=(0,b.HF)(e),l=Array.isArray(n)?n.length:0;return e===d.RN9.SPACING?null:r.createElement(h.fI,{className:m()("stack_controls--stackPaddingRow--40WUa",{"stack_controls--large--bJFUN":l>3})},r.createElement(f.s,{paddingSelection:e,focusOnMount:t,outerClassName:v,inputClassName:T,onBlur:d.Qa7.clearActiveStackRegion,onKeyDown:N,onPaste:R,noBorderOnFocus:!0,svgClassName:k,recordingKey:"stackPaddingControl",inputTestId:"stackPaddingControl",source:"canvas",disableVariablesEntryPoint:!0}))}function R(e){(0,E.gk)(e)&&(e.preventDefault(),e.currentTarget.blur(),p.l7.user("paste-in-stack",()=>{d.glU.triggerAction("paste",{})}))}let O=r.memo(function(){return(0,l.d4)(e=>e.mirror.appModel.isReadOnly)?null:r.createElement(L,null)});function L(){return r.createElement(a.k,{isShown:!0},r.createElement(s.IA,null,r.createElement(x,{testID:"DesignInlineMenu"})))}function x({testID:e}){let t=(0,l.d4)(e=>{let t=e.mirror.selectionProperties.stackMode;return 1===e.mirror.selectionProperties.numSelected&&("HORIZONTAL"===t||"VERTICAL"===t)});return(0,l.d4)(e=>{let t=e.mirror.selectionProperties.selectedWidgetInfo;return!!(1===e.mirror.selectionProperties.numSelected&&t?.propertyMenu.length)})?r.createElement(c.W1,{size:"small",testID:e},r.createElement(o.jk,null),r.createElement(i.x,null)):t?r.createElement(c.W1,{testID:e,darkModePreferred:!0},r.createElement(I,{key:"stackControls"})):null}},340778:(e,t,n)=>{n.d(t,{m:()=>nZ});var r=n(411855),l=n(805014),a=n(875877),o=n(677840),i=n(178035),s=n(343373),c=n(427494),d=n(176160),p=n(797187),u=n(77383),m=n(2513),y=n(850183),E=n(973800),g=n(432402),h=n(793757),_=n(443342),f=n(363523),b=n(846836),S=n(188507),T=n(18840),v=n(294829),k=n(950512),P=n(190500),I=n(212507),N=n(985814),w=n(509223),C=n(285366),A=n(418664),R=n(943756),O=n(76265),L=n(717288),x=n(563846),M=n(446820),F=n(737976),K=n(695024),D=n(688656),V=n(848969),U=n(765273),B=n(370903),G=n(995382);function Y(){let e=(0,S.wA)(),t=(0,S.d4)(e=>!!e.modalShown),n=(0,S.d4)(e=>e.versionHistory.compareId),a=l.AWq.getChunkChangeCount(),o=(0,F.Z)("chunk_change_navigator_navigate"),i=(0,M.E)(),s=r.useCallback(e=>{l.Egt.setSelectedNodeAndCanvas(e,!0),o((0,K.QZ)({nodeId:e,...U.ob}),U.kh),i(e)},[o,i]),c=r.useCallback(e=>{t||0===a||("ArrowUp"===e.key||"ArrowLeft"===e.key||e.shiftKey&&"Tab"===e.key?s(l.glU.navigateToNextChange(-1)):("ArrowDown"===e.key||"ArrowRight"===e.key||"Tab"===e.key)&&s(l.glU.navigateToNextChange(1)))},[t,a,s]);return(r.useEffect(()=>{e(x.Q.dequeue({type:L._.SEE_WHATS_CHANGED}))},[e]),r.useEffect(()=>{n&&0!==a&&s(l.glU.navigateToFirstVisibleOrClosestChange())},[a,n,s]),r.useLayoutEffect(()=>{if(0!==a)return document.addEventListener("keydown",c),()=>{document.removeEventListener("keydown",c)}},[a,c]),0===a)?null:r.createElement(r.Fragment,null,r.createElement("div",{className:"chunk_change_navigator--chunkChangeCount--ZFnfP"},(0,O.tx)("collaboration.feedback.change_count",{changeCount:a})),r.createElement("div",{className:"chunk_change_navigator--chunkChangeNavigator--82303"},r.createElement(V.K0,{svg:G.A,onClick:e=>{e.stopPropagation(),s(l.glU.navigateToNextChange(-1))},"data-tooltip-type":D.Ib.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.previous_change"),recordingKey:"change_stepper.previous",disabled:0===a}),r.createElement(V.K0,{svg:B.A,onClick:e=>{e.stopPropagation(),s(l.glU.navigateToNextChange(1))},"data-tooltip-type":D.Ib.TEXT,"data-tooltip":(0,O.t)("collaboration.feedback.next_change"),recordingKey:"change_stepper.next",disabled:0===a})))}var H=n(845936),Q=n(126049),z=n(277154),W=n(991458),$=n(512729),j=n(550906),X=n(36748),J=n(71801),q=n(153767),Z=n(299009),ee=n(888807),et=n(736041),en=n(927030),er=n(238235),el=n(864941),ea=n(215802),eo=n(963993),ei=n(58590),es=n(849331),ec=n(15092),ed=n(131776),ep=n(835301),eu=n(287327),em=n(313449),ey=n(510669),eE=n(632673),eg=n(404227),eh=n(785965),e_=n(753392),ef=n(979733),eb=n(831231),eS=n(583044),eT=n(629019),ev=n.n(eT),ek=n(666308),eP=n(747484),eI=n(835878),eN=n(544178),ew=n(27365);function eC({searchOptions:e,keyboardNavigationPath:t,keyboardNavigationColumn:n}){let a=(0,ed.I)(ep.Cn.AssetsPanel),{activeTab:o,shouldFocusSearchBar:i}=(0,S.d4)(e=>e.leftPanel),s=o===l.xae.ASSETS,c=r.useRef(null),d=(0,S.d4)(e=>e.mirror.appModel.activeCanvasEditModeType),p=(0,eN.vb)({isVisible:s,autofocus:!0,selectOnFocus:!0,ref:c});r.useEffect(()=>{let e=e=>{(eP.Ay.chromeos?e.altKey&&e.shiftKey&&e.keyCode===ek.Uz.KEY_2:e.altKey&&e.keyCode===ek.Uz.KEY_2)&&d!==l.m1T.TEXT&&(p(),e.preventDefault())};return document.addEventListener("keydown",e),()=>{document.removeEventListener("keydown",e)}},[d,p]);let u=r.useCallback(t=>{let n;e&&((0,eI.eu)(e.type)?n=e.type:(n={type:ew.I.ALL},e.onSetAssetType(n))),a.setQuery(t,n)},[a,e]),m=ev()("component_sidebar_search--searchWithViewModeToggle--nKJ2-","component_sidebar_search--negMargin--QTfpB");return null!=t?r.createElement(eN.E1,{query:a.query,onChange:u,isVisible:s,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,O.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,entryPointForTracking:"editor:assets_panel",path:t,column:n,forwardedRef:c}):r.createElement(eN.aU,{query:a.query,onChange:u,isVisible:s,className:m,recordingKey:"componentsLibrarySearch",placeholder:(0,O.t)("design_systems.assets_panel.search"),autofocus:i,selectOnFocus:!0,hideSearchIcon:!0,forwardedRef:c,entryPointForTracking:"editor:assets_panel"})}var eA=n(654496),eR=n(35645),eO=n.n(eR),eL=n(663295),ex=n(154267),eM=n(646534),eF=n(811407),eK=n(264259),eD=n(764428),eV=n(739641),eU=n(845804),eB=n(453783);function eG(e){let{assetType:t,libraryNameByFileKey:n,fileKeyToLibraryKey:l,onSetAssetType:a,onSetKeyboardNavigationElement:o,validAssetTypeOptions:i}=e,s=(0,S.wA)(),c=(0,S.d4)(e=>e.modalShown),p=(0,S.d4)(e=>e.dropdownShown),u=(0,S.d4)(d.tB),m=(0,eM.Fl)(),y=r.useCallback(()=>{c?.type===eU.V&&s(et.AS()),z.az.trackDefinedEvent("assets_panel.asset_type_dropdown_opened",{fileKey:u?.key,assetsPanelVersion:2})},[s,c,u?.key]),E=r.useMemo(()=>{if((0,eK.NX)(m)){let e=Object.entries(n??{}).map(([e,t])=>({key:e,name:t,library_key:l[e]}));return(0,eK.k9)({libraries:e,approvedLibraryKeysByResourceType:m}),e.map(({key:e})=>e)}return Object.keys(n??{}).sort((e,t)=>eL.f.LEXICOGRAPHICALLY(n[e],n[t]))},[n,m,l]),g=(0,el.Ck)(),[h,_]=eO()(E,e=>!(0,ex.wJ)(e)),f=_.length>0&&g(),b=r.useMemo(()=>({format:e=>{switch(e.type){case ew.I.RECENT:return(0,O.t)("design_systems.assets_panel.dropdown_type_recents");case ew.I.ALL:return(0,O.t)("design_systems.assets_panel.dropdown_type_all_libraries");case ew.I.LOCAL:return(0,O.t)("design_systems.assets_panel.created_in_this_file");case ew.I.FILE:return n[e.fileKey];case ew.I.SITE_KIT:return""}},isEqual:eY}),[n]);return r.createElement(eB.l6,{className:"sidebar_asset_type_select--select--PTmwH",id:"component-sidebar-asset-type-select",property:t,formatter:b,onChange:a,dropdownAlignment:"left",openOnKeyPressed:[ek.Uz.SPACE,ek.Uz.ENTER],inputRef:o,dispatch:s,chevronClassName:"sidebar_asset_type_select--chevron--xyZLx",inputClassName:"sidebar_asset_type_select--input--sSEn2",dropdownShown:e.useLocalState?e.dropdownShown:p,dropdownWidth:260,onShowDropdown:y,onShowDropdownOverride:e.useLocalState?e.onShowDropdownOverride:void 0,onHideDropdownOverride:e.useLocalState?e.onHideDropdownOverride:void 0,rightIcon:r.createElement(eV.P,{libraryKey:t.type===ew.I.FILE?t.libraryKey:void 0})},!!i[ew.I.ALL]&&r.createElement(eB.c$,{value:{type:ew.I.ALL}}),!!i[ew.I.RECENT]&&r.createElement(eB.c$,{value:{type:ew.I.RECENT}}),!!i[ew.I.LOCAL]&&r.createElement(eB.c$,{value:{type:ew.I.LOCAL}}),h.length>0?r.createElement(eB.sK,null):null,h.length>0?r.createElement(eB.c$,{isHeader:!0,formattedValue:u?.org?.name?(0,O.t)("design_systems.assets_panel.dropdown_org_libraries",{orgName:u.org.name}):(0,O.t)("design_systems.assets_panel.dropdown_libraries")}):null,h.map(e=>(0,eK.sF)(l[e])?r.createElement(eB.c$,{key:e,value:{type:ew.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:r.createElement(eF.FX,null)}):r.createElement(eB.c$,{key:e,value:{type:ew.I.FILE,fileKey:e},fullWidth:!0})),f?r.createElement(eB.sK,null):null,f?r.createElement(eB.c$,{isHeader:!0,formattedValue:(0,O.t)("design_systems.assets_panel.dropdown_curated_libraries")}):null,f&&_.map(e=>r.createElement(eB.c$,{key:e,value:{type:ew.I.FILE,fileKey:e},removeTextRightPadding:!0,rightSettingsIcon:r.createElement(eD.t,null)})))}function eY(e,t){return e.type===ew.I.FILE&&t.type===ew.I.FILE?e.fileKey===t.fileKey:e.type===t.type}var eH=n(563192),eQ=n(280999),ez=n(731719);function eW({disabled:e,isList:t,onSetKeyboardNavigationElement:n,onToggleViewMode:l,recordingKey:a}){let o=t?(0,O.t)("design_systems.assets_panel.show_as_grid"):(0,O.t)("design_systems.assets_panel.show_as_list");return r.createElement(V.K0,{ref:n,recordingKey:eH.Pt(a,"toggleComponentsSidebarViewMode"),"data-tooltip-type":D.Ib.TEXT,"data-tooltip":o,svg:t?eQ.A:ez.A,onClick:l,disabled:e})}var e$=n(784202),ej=n(588352),eX=n(473982),eJ=n(678599);let eq=(0,eX.Wh)(()=>(0,a.atom)(0)),eZ=(0,eX.Wh)(()=>(0,a.atom)(eJ.Bk.Grid));var e0=n(841962),e1=n(568116),e4=n(567095);function e5(e,t,n){return null!=e&&(t[e.type]||e.type===ew.I.FILE&&n[e.fileKey])?e:{type:ew.I.ALL}}var e2=n(33011),e3=n(89865),e7=n.n(e3),e8=n(23478),e6=n(829700),e9=n(414546),te=n(817395),tt=n(775338),tn=n(270143);let tr="searchResults";function tl(e,t){return`${t}:${e.key}`}function ta(e){return`${e}:${tr}:templates`}function to(e){return`${e}:recentlyUsed`}function ti(e){return`${e}:stickySection`}var ts=n(514911),tc=n(846288),td=n(769849),tp=n(650981),tu=n(365315),tm=n(336427),ty=n(399991),tE=n(211020),tg=n(693565),th=n(648800),t_=n(622667),tf=n(200179),tb=n(710443),tS=n(257489),tT=n(592165),tv=n(965434),tk=n(244810),tP=n(997409),tI=n(605369),tN=n(351335),tw=n(742342),tC=n(553920),tA=n(287072),tR=n(408938);function tO({asset:e,fileName:t,sourceForTracking:n,thumbHeight:l,thumbLayout:o,thumbWidth:i,viewMode:s,sectionNameForTracking:c,sectionPosition:d,noFlyout:p,preventDrag:m,disableContextMenu:y}){let E=(0,S.wA)(),g=(0,S.d4)(e=>e.dropdownShown),{query:h,searchOption:_}=(0,ed.I)(ep.Cn.AssetsPanel),f=(0,S.d4)(eg.dK),b=(0,S.d4)(u.F9),T=(0,a.useAtomValue)(tT.T),v=_?.type===ew.I.ALL,k=(0,eM.fV)(e.library_key),P=(0,tf.fd)(e.library_key),I=v&&(k||P),N=r.useRef(null),w=(0,tb.kH)(e.name),C=(0,tE.NG)({text:w,textRef:N}),A=r.useRef(null),R=(0,tE.NG)({text:t??"",textRef:A}),O=g?.type===tN.K.ASSETS_PANEL?g?.data?.component:void 0,L=O?.node_id===e.node_id,x=s===eJ.Bk.List,M=x?"list-no-padding":"grid",F=!!h,K=(0,tk.F)(e,tN.K.ASSETS_PANEL,d,c),D=(0,tv.n)(e),V=(0,tm.ZC)(D),U=!p;r.useEffect(()=>{D&&!V&&E(t_.jD())},[D,E,V]);let B=e.isLocal&&(0,ty.PN)()?(0,tw.eT)(e.node_id,f).join("-"):e.node_id,G="Local components"===c||"Local private components"===c||e.isLocal,Y=o!==tC.rp.SMALL&&!x,H=!x&&(0,e0.kc)().api_asset_search_with_scores,Q=(0,tP.Y)(e),z=x?l:l-2,W=x?i:i-2,$=r.useMemo(()=>m?void 0:{sourceForTracking:n,clickToInsert:!1,afterSuccessfulInsert:tS.$z,sectionNameForTracking:c},[m,c,n]),j=G?r.createElement(tI.MT,{item:e,height:z,width:W,draggable:$,buttonProps:{onContextMenu:y?void 0:K},shouldHideTooltip:U||L||D,isFilePublished:b,recordingNodePath:B,isSearch:F,useBaseTile:!0,hideNameOverlay:Y,numVariants:Q,displayType:M,sectionPosition:d,showTooltipImmediately:!1,fileName:C||R?t:void 0,alwaysShowBorder:!0}):r.createElement(tI.lX,{item:e,showName:!0,height:z,width:W,draggable:$,buttonProps:{onContextMenu:y?void 0:K},shouldHideTooltip:U||L||D,recordingNodePath:B,isSearch:F,useBaseTile:!0,hideNameOverlay:Y,numVariants:Q,displayType:M,sectionPosition:d,showTooltipImmediately:!1,fileName:C||R?t:void 0,alwaysShowBorder:!0});return r.createElement("div",{className:x?tA.AD:tA.iE},x?j:r.createElement("div",{className:ev()(tA.QX,{[tA.Gr]:D,[tA.HR]:D&&T})},j),Y&&r.createElement("div",{role:"button",className:tA.Bm,style:{width:i}},r.createElement("span",{className:tA.UU,ref:N},w),U&&r.createElement(tg.B,{ariaHidden:!0,className:tA.OW,svg:tR.A})),Y&&!!t&&r.createElement(th.Y,{spacing:0,direction:"horizontal"},r.createElement("div",{className:ev()(tA.Md,tA.Rm),ref:A,style:I?{maxWidth:i-eV.J}:{width:i}},t),I&&r.createElement(eV.P,{libraryKey:e.library_key,showPresetTooltip:!0,tooltipDelay:500,tooltipLocation:"below",compact:!0})),H&&r.createElement(r.Fragment,null,r.createElement("div",{className:ev()(tA.Md,tA.Rm),style:I?{maxWidth:i-eV.J}:{width:i}},"Score: "+(e.server_score?.toFixed(2)??"N/A")),r.createElement("div",{className:ev()(tA.Md,tA.Rm),style:I?{maxWidth:i-eV.J}:{width:i}},"(L:"+(e.lexical_score?.toFixed(2)??"N/A")+", AI:"+(e.ai_score?.toFixed(2)??"N/A")+", F:"+(e.fuse_score?.toFixed(2)??"N/A")+")")),U&&x&&r.createElement(tg.B,{ariaHidden:!0,className:tA.Ki,svg:tR.A}))}var tL=n(265851),tx=n(140835),tM=n(580034),tF=n(489018);let tK="library_section_header--sectionHeaderH1--P70zQ ellipsis--ellipsis--Tjyfa",tD="library_section_header--sectionHeader3_redesign--TGISe ellipsis--ellipsis--Tjyfa",tV="library_section_header--sectionHeaderH3--5VrMz ellipsis--ellipsis--Tjyfa";var tU=n(949207),tB=n(432023);let tG=e=>"isExpandable"in e&&e.isExpandable,tY=(e,t)=>{switch(e){case tK:return t?"library_section_header--sectionHeaderDivider--SdrS5 ellipsis--ellipsis--Tjyfa":"library_section_header--sectionHeader1_redesign--cWZaj ellipsis--ellipsis--Tjyfa";case tV:return tD;default:return"library_section_header--sectionHeader3_normal--bf4ra"}},tH=e=>{let t=[];if(e&&e.length){t.push(r.createElement("div",{className:"library_section_header--sectionHeader1_sticky--mZ4QY ellipsis--ellipsis--Tjyfa",key:e[0]},e[0]+" / ","\xa0"));let n=e.slice(1).join(" / ");t.push(r.createElement("div",{className:tD,key:n},n,"\xa0"))}return t};class tQ extends r.Component{componentDidUpdate(e){tG(this.props)&&tG(e)&&e.isExpanded!==this.props.isExpanded&&"h1"===this.props.size&&(0,o.YQ)({id:"library_section_header_toggled"})}render(){let e="h1"===this.props.size?tK:tV,t=tG(this.props)?"library_section_header--sectionHeaderExpandable--hHEFq":"",n=tY(e,this.props.shouldShowDividerLine),l=tG(this.props)&&this.props.isFixed?"library_section_header--isFixed--eVHns":"";return r.createElement(tx.fu,{name:"Section Header",properties:{title:this.props.title,isExpanded:!!tG(this.props)&&this.props.isExpanded},trackingTargets:tM.K.RCS},r.createElement("div",{className:ev()(n,e,t,l)},tG(this.props)&&r.createElement(tg.B,{className:this.props.isExpanded?"library_section_header--expandCaretOpen--083vU library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad":"library_section_header--expandCaret--20Tzs object_row--expandCaret--f1MjE object_row--indent--uZlad",svg:this.props.isExpanded?tU.A:tB.A}),tG(this.props)&&this.props.breadcrumbPath&&!this.props.isFixed&&r.createElement("div",{className:"library_section_header--breadcrumbPath--Jevbg"},this.props.breadcrumbPath,"\xa0"),tG(this.props)&&this.props.isFixed&&this.props.stickyHeadertokens&&this.props.stickyHeadertokens.length?tH(this.props.stickyHeadertokens):r.createElement("div",{className:n},this.props.title),(0,eK.sF)(this.props.subscribedLibraryKey)&&r.createElement("div",{className:tL.s.flex.alignCenter.justifyCenter.ml4.$},r.createElement(eF.KP,{libraryKey:this.props.subscribedLibraryKey})),((0,tf.o3)(this.props.subscribedLibraryKey)||(0,tf.Ag)(this.props.subscribedLibraryKey))&&r.createElement("div",{className:tL.s.flex.alignCenter.justifyCenter.ml4.$},r.createElement(eD.E,{libraryKey:this.props.subscribedLibraryKey,showTooltip:!0,redirectToHubFile:!0}))))}}tQ.H1_HEIGHT=(0,W.hG)(tF.BS),tQ.H3_HEIGHT=(0,W.hG)(tF.T);class tz extends r.Component{render(){return r.createElement("div",{className:12===this.props.size?"library_section_header--spacer12--0h1Dt":"library_section_header--spacer16--iPkYc"})}}tz.HEIGHT=(0,W.hG)(tF.FX);let tW="component_sidebar--stickyHeaderSpacer--SaKsM",t$=(0,W.hG)(tF.FX),tj=(0,W.hG)(tF.FX)/2,tX=(0,W.hG)(tF.Nz),tJ=(0,W.hG)(tF.cP),tq=(0,tp.fv)();function tZ({parent:e,outputElements:t,libraryNameByResourceId:n,items:l,keyPrefix:a,sharedOptions:o,sectionNameForTracking:i}){let s=(0,tC.PI)(l,!0),c={layout:s,...o},d=(0,tC.A5)(c),{width:p,height:u}=(0,tC.rj)(c,d),m=o.isList?1:0,y=o.isList?0:tX,E=o.isList||!n?0:tJ,g=u+(o.isList?tj:t$)+y+E+m+(o.isList?0:-2);(0,e0.kc)().api_asset_search_with_scores&&(g+=2*(0,W.hG)(tF.uY));let h=p+(o.isList?tj:t$)+(o.isList?0:-2),_=0,f=td.oz.getNextRenderedElementTop(t)+tj;for(let[c,m]of l.entries()){let l;let y=o.isList?f+_*g:f+Math.floor(_/d)*g,E=o.isList?0:3+_%d*h,b=(0,tu.V)(m),S=tq(m),T=S?n?.[S]:void 0;l=(0,e0.kc)().asset_search_return_file_name&&m.file_name?m.file_name:T,t.push({parent:e,type:td.zq.TILE,top:y,left:E,height:g,key:`${a}:${b}`,element:function({item:e,fileName:t,sourceForTracking:n,sectionNameForTracking:l,thumbLayout:a,thumbHeight:o,thumbWidth:i,isList:s,sectionPosition:c}){return r.createElement(tO,{asset:e,fileName:t,sourceForTracking:n,sectionNameForTracking:l,thumbLayout:a,thumbHeight:o,thumbWidth:i,viewMode:s?eJ.Bk.List:eJ.Bk.Grid,sectionPosition:c})}({containerWidth:o.containerWidth,fileName:l,sourceForTracking:o.sourceForTracking,sectionNameForTracking:i,thumbLayout:s,thumbHeight:u,thumbWidth:p,isList:o.isList,item:m,isExpanded:o.isExpanded,sectionPosition:c}),item:m,numCols:d,containerWidth:o.containerWidth,sectionNameForTracking:i,sectionPosition:c}),_+=1}}let t0=(e,t,n)=>{let l=ti(n.keyPrefix),a=td.oz.getNextRenderedElementTop(t),o={parent:e,type:td.zq.ROW,top:a,height:"h1"==n.size?tQ.H1_HEIGHT:tQ.H3_HEIGHT,key:l,element:r.createElement(tQ,{size:n.size,isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!1,subscribedLibraryKey:n.subscribedLibraryKey}),isSticky:!0,isFixed:!1,children:[],isExpandable:!0,isExpanded:n.isExpanded,getExpandableElement:e=>r.createElement(tQ,{size:n.size,isExpandable:!0,isExpanded:e,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,subscribedLibraryKey:n.subscribedLibraryKey}),sectionNameForTracking:n.sectionNameForTracking,rowType:n.rowType,fixedElement:r.createElement(r.Fragment,null,r.createElement("div",{className:tW}),r.createElement(tQ,{size:"h1",isExpandable:!0,isExpanded:n.isExpanded,title:n.title,breadcrumbPath:n.breadcrumbPath?n.breadcrumbPath:null,stickyHeadertokens:n.stickyHeaderTokens?n.stickyHeaderTokens:void 0,isFixed:!0,subscribedLibraryKey:n.subscribedLibraryKey}))};return t.push(o),o};function t1({sectionHeaderText:e,isFixed:t}){return r.createElement("div",{className:ev()("component_sidebar--sectionHeader--v0N1h",t?"component_sidebar--isFixed--orinE":"")},r.createElement("div",{className:"component_sidebar--sectionHeaderText--hDKu5"},e))}function t4(e,t,n){let l=td.oz.getNextRenderedElementTop(e),a={key:`${n.keyPrefix}:sectionHeader:${t}`,isSticky:!0,parent:null,isFixed:!1,type:td.zq.ROW,top:l,height:40,element:r.createElement(t1,{sectionHeaderText:t,isFixed:!1}),fixedElement:r.createElement(r.Fragment,null,r.createElement("div",{className:tW}),r.createElement(t1,{sectionHeaderText:t,isFixed:!0})),isStaticRow:!0,sectionNameForTracking:n.sectionNameForTracking};return e.push(a),a}function t5({outputElements:e,results:t,moreResults:n,showMoreResults:l,keyPrefix:a,overallOptions:o,libraryNameByResourceId:i,toggleShowMoreResults:s,parent:c}){if(t.length>0&&tZ({parent:c??null,outputElements:e,items:t,keyPrefix:`${a}:results`,sharedOptions:o,libraryNameByResourceId:i,sectionNameForTracking:"Primary search results"}),n.length>0){let t=td.oz.getNextRenderedElementTop(e);e.push({parent:c??null,type:td.zq.ROW,top:t,height:40,key:`${a}:moreResultsLink`,element:r.createElement("div",{className:"component_sidebar--text--g20jk"},l&&(0,O.tx)("design_systems.assets_panel.showing_results_from_all_libraries"),!l&&r.createElement("a",{className:"component_sidebar--link--I-ane blue_link--blueLink--9rlnd",onClick:s},(0,O.tx)("design_systems.assets_panel.more_results_in_all_libraries",{results:n.length}))),sectionNameForTracking:"More search results"}),l&&tZ({parent:null,outputElements:e,items:n,keyPrefix:`${a}:moreResults`,sharedOptions:o,libraryNameByResourceId:i,sectionNameForTracking:"More search results"})}}function t2({prevParent:e,outputElements:t,inputSubtree:n,inputParentTree:l,keyPrefix:a,sharedOptions:o,sectionNameForTracking:i,hideTitle:s}){let c=tl(n,a),d=!s&&function(e,t){switch(e.type){case"FILE":return""!==e.name;case"PAGE":return t.subtrees.length>1;case"NAME_GROUP":return!e.skipElementsInRendering;case"ASSET_TYPE":return e.items.length>0||e.subtrees.length>0}}(n,l),p=function(e,t,n,r,l,a){if(!e)return null;let o=tl(r,l),i=ti(o),s=a.isExpanded(i,(0,ts.pR)(r.type,r.sectionNameForTracking));switch(r.type){case"FILE":return t0(null,n,{keyPrefix:o,size:"h1",title:r.name,isExpanded:s,stickyHeaderTokens:r.stickyHeaderTokens?r.stickyHeaderTokens:void 0,subscribedLibraryKey:r.subscribedLibraryKey,sectionNameForTracking:r.sectionNameForTracking,rowType:td.l$.LIBRARY});case"PAGE":return t0(t,n,{keyPrefix:o,title:r.name,size:"h3",isExpanded:s,stickyHeaderTokens:r.stickyHeaderTokens?r.stickyHeaderTokens:void 0,sectionNameForTracking:r.sectionNameForTracking,rowType:td.l$.PAGE});case"NAME_GROUP":return t0(t,n,{keyPrefix:o,size:"h3",title:r.flattenedPath?r.flattenedPath:r.name,isExpanded:s,breadcrumbPath:r.breadcrumbPath?r.breadcrumbPath:void 0,stickyHeaderTokens:r.stickyHeaderTokens?r.stickyHeaderTokens:void 0,sectionNameForTracking:r.sectionNameForTracking,rowType:td.l$.NAME_GROUP});case"ASSET_TYPE":let c=t3(r.sectionNameForTracking);return t0(t,n,{keyPrefix:o,size:"h3",title:r.name,isExpanded:!0,sectionNameForTracking:r.sectionNameForTracking,rowType:c})}}(d,e,t,n,a,o),u=p?p.children:t,m=p||e;if((0,e0.kc)().dse_templates_proto){let e=n.subtrees.find(te.Qe);null!=e&&t2({prevParent:null,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:a,sharedOptions:o,sectionNameForTracking:e.sectionNameForTracking})}switch(n.type){case"PAGE":case"ASSET_TYPE":case"FILE":tZ({parent:m,outputElements:u,items:n.items,keyPrefix:c,sharedOptions:o,sectionNameForTracking:i});break;case"NAME_GROUP":n.skipElementsInRendering||tZ({parent:m,outputElements:u,items:n.items,keyPrefix:c,sharedOptions:o,sectionNameForTracking:i});break;default:(0,tc.xb)(n.type)}for(let e of n.subtrees)(0,e0.kc)().dse_templates_proto&&(0,te.Qe)(e)||t2({prevParent:m,outputElements:u,inputSubtree:e,inputParentTree:n,keyPrefix:c,sharedOptions:o,sectionNameForTracking:i});"FILE"===n.type&&d&&function(e,t,n){let l=td.oz.getNextRenderedElementTop(t);t.push({parent:e,type:td.zq.SEPARATOR,top:l,height:n.size,key:`${n.keyPrefix}:spacer${n.size}`,element:r.createElement(tz,{size:n.size})})}(m,u,{keyPrefix:c,size:16})}let t3=e=>{let t=e?.toLowerCase().includes("local");return e?.toLowerCase().includes("templates")?t?td.l$.LOCAL_TEMPLATES:td.l$.TEMPLATES:t?td.l$.LOCAL_COMPONENTS:td.l$.COMPONENTS},t7="root";var t8=n(650350);let t6=[];function t9(e,t,n){let r=[];return e&&t2({prevParent:null,outputElements:r,inputSubtree:e,inputParentTree:t,keyPrefix:t7,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!0}),r}var ne=n(73584);let nt="library-section-asset-type";function nn(e){switch(e){case"all":return{type:ew.I.ALL};case"recent":return{type:ew.I.RECENT};case"local":return{type:ew.I.LOCAL};default:return{type:ew.I.FILE,fileKey:e,libraryKey:(0,ne.$)(e)}}}var nr=n(295221),nl=n(62528),na=n(184392),no=n(113645),ni=n(488527);let ns=(0,W.hG)(ni.gNA),nc={improved:{search:{path:[0,0],column:0},libraryModal:{path:[0,0],column:1},dropdown:{path:[0,1],column:0},viewToggle:{path:[0,1],column:1}}};function nd(e,t){(0,z.sx)("Component Sidebar Viewed",{viewMode:(0,eJ.RN)(e),assetsPanelVersion:2,fileKey:t?.key,fileTeamId:t?.teamId??void 0,fileOrgId:t?.parentOrgId??void 0})}function np({containerSizingOptions:e,recordingKey:t}){let n=(0,ec.iZ)(),l=(0,d.q5)(),[o,i]=(0,a.useAtom)(eq),s=(0,Q.A)(e=>{i(e),n&&(0,P.uE)("action_left_panel_scroll",{user:n},{assetsPanelVersion:2,tab:"assets",fileKey:l?.key,fileTeamId:l?.teamId??void 0,fileOrgId:l?.parentOrgId??void 0})},500),[c,p]=(0,a.useAtom)(eZ);(0,$.h)(()=>{nd(c,l)});let u=r.useCallback(()=>{p(e=>{let t=e===eJ.Bk.Grid?eJ.Bk.List:eJ.Bk.Grid;return nd(t,l),t})},[l,p]);return r.createElement(q.dP,{recordingKey:"localComponents",className:"component_sidebar--container--Wxtr4",dataTestId:"component-sidebar","data-does-not-dismiss-component-flyout":!0},r.createElement(nu,{initialScrollTop:o,onScroll:s,viewMode:c,toggleViewMode:u,containerSizingOptions:e,recordingKey:t}))}function nu({initialScrollTop:e,onScroll:t,viewMode:n,toggleViewMode:l,containerSizingOptions:o,recordingKey:i}){let s=(0,S.wA)(),c=(0,S.d4)(e=>e.dropdownShown),p=(0,S.d4)(u.e_),m=(0,S.d4)(eE.hK),y=(0,S.d4)(eg.dK),E=(0,S.d4)(eg.Xt),g=(0,S.d4)(eh.P),h=(0,S.d4)(e=>e.userFlags.has_dismissed_component_sidebar_library_upsell_banner),_=(0,S.d4)(e=>e.isFreeUser),f=(0,S.d4)(e=>e.user),b=(0,X.Av)(),T=(0,d.q5)(),v=(0,es.FC)(),k=(0,tn.D)(),{query:P,searchSessionId:I}=(0,ea.Gq)();(0,nr.y)(),(0,er.S)();let N=(0,q.q_)();r.useEffect(()=>{s(ee.cr({shouldSearchDefaultLibraries:!1}))},[s]);let{assetType:w,libraryNameByFileKey:C,fileKeyToLibraryKey:A,onSetAssetType:R,scrollContent:L,validAssetTypeOptions:x}=function({containerSizingOptions:e,viewMode:t}){var n;let l=function(){let e=(0,S.d4)(u.e_),t=(0,S.d4)(d.tB),n=(0,S.d4)(e9.t_),l=(0,S.d4)(e=>e.hubFiles),a=r.useMemo(()=>e7()(Object.values(l),e=>(0,e2.l)(e.library_key??"")),[l]),o=(0,S.d4)(u.MH),i=(0,S.d4)(u.dM),s=(0,S.d4)(u.h3),c=(0,S.d4)(eh.P),p=(0,el.Ck)(),m=(0,eM.Fl)(),y=t?.teamId?c[t.teamId]:null,E=!!y&&(0,em.w5)(y),g=r.useMemo(()=>(0,eJ.Sg)(o,i),[o,i]),h=r.useMemo(()=>(0,eJ.ND)(s),[s]),_=(0,eJ.UY)(e,n),f=(0,tt.Lm)(),b=(0,eJ.jl)(f,n),T=(0,eJ.Tk)(e,l),v=(0,eJ.oV)({library:e,hubFilesByLibraryKey:a}),k=r.useMemo(()=>p()?T:null,[p,T]),P=r.useMemo(()=>p()?v:null,[p,v]);return(0,e6.jP)(k,P),r.useMemo(()=>(0,te.Nx)({localLibraryItemsInfo:g,localTemplatesInfo:h,subscribedItemsInfo:_,subscribedTemplatesInfo:b,subscribedCommunityItemsInfo:k,defaultSubscribedItemsInfo:(0,eJ.Mt)(),canPublish:E,currentFileKeyForPublish:t?(0,e8.Kz)(t)?t.sourceFileKey:t.key:null,approvedLibraryKeysByResourceType:m}),[g,h,_,b,k,E,t,m])}(),{productComponents:a,templates:o}=(0,e1.g5)(e4.$A.Design),{query:i}=(0,ed.I)(ep.Cn.AssetsPanel),s=(0,tn.D)(),c=r.useMemo(()=>({productComponents:a,templates:(0,e0.u4)("dse_editor_templates_v1",o,[])}),[a,o]),p=r.useMemo(()=>i?ew.v:function(e,t,n,r=[]){let l=!!((0,e0.kc)().dse_editor_templates_v1&&n&&(n.items.length>0||t.subtrees.length>0));return{[ew.I.ALL]:!0,[ew.I.RECENT]:!!(e.length+(0,e0.u4)("dse_editor_templates_v1",r.length,0)),[ew.I.LOCAL]:t.items.length>0||t.subtrees.length>0||l,[ew.I.FILE]:!1,[ew.I.SITE_KIT]:!1}}(a,l.localSubtree,l.localTemplateSubtree,o),[i,a,o,l.localSubtree,l.localTemplateSubtree]),m=(n=l.subscribedFileSubtrees,r.useMemo(()=>{let e={};for(let[t,r]of Object.entries(n))r&&(e[t]=r.name);return e},[n])),y=l.fileKeyToLibraryKey,{assetType:E,onSetAssetType:g}=function(e,t){let[n,l]=r.useState(!1),[a,o]=r.useState({type:ew.I.ALL}),i=(0,S.wA)(),s=(0,S.d4)(eI.q5),c=(0,d.q5)();r.useEffect(()=>{n||"loading"===e||(o(e5(function(){if(j.x4)try{let e=j.x4.getItem(nt);if(!e)return;return nn(e)}catch(e){return}}(),e,t)),l(!0))},[n,e,t]);let p=r.useCallback(e=>{(!s||(0,eI.eu)(e))&&(o(e),j.x4?.setItem(nt,function(e){switch(e.type){case ew.I.ALL:return"all";case ew.I.RECENT:return"recent";case ew.I.LOCAL:return"local";case ew.I.FILE:return e.fileKey;case ew.I.SITE_KIT:return""}}(e)),s&&i(ee.gP({searchOptions:e})),z.az.trackDefinedEvent("assets_panel.asset_type_changed",{assetType:e.type,isSearching:!!s,fileKey:e.type===ew.I.FILE?e.fileKey:void 0,openFileKey:c?.key,fileTeamId:c?.teamId??void 0,fileOrgId:c?.parentOrgId??void 0,assetsPanelVersion:2}))},[s,i,c?.key,c?.parentOrgId,c?.teamId]),u=r.useCallback(e=>e.key===nt&&null!=e.newValue,[]),m=r.useCallback(n=>{if(!n)return;let r=nn(n);"loading"!==e&&o(e5(r,e,t))},[e,t]);return(0,j.tl)({onSync:m,shouldSyncValue:u}),{assetType:a,onSetAssetType:p}}(s?"loading":p,m),h=function({assetType:e,containerSizingOptions:t,recentlyUsedItems:n,treeWithSubtrees:l,viewMode:a}){let o=(0,t8.O)(),[i,s]=r.useState(!1),c=a===eJ.Bk.List,d=(0,ed.I)(ep.Cn.AssetsPanel),p=r.useMemo(()=>({isList:c,isExpanded:ts.xO,sourceForTracking:eJ.mZ,...t}),[t,c]),u=r.useMemo(()=>{let e,t;let{query:n,results:{normalizedSearchResults:r,unsubscribedSearchResults:l}}=d;if(!n)return t6;(0,e0.kc)().dse_editor_templates_v1?[t,e]=(0,eI._2)(r):e=r;let a=e,c=a.length+l.length;if(0===c&&(!t||0===t.length))return t6;!i&&0===a.length&&l.length>0&&s(!0);let u=[];if(t&&t.length>0&&(0,e0.kc)().dse_editor_templates_v1){let e=t4(u,(0,O.t)("design_systems.assets_panel.templates"),{keyPrefix:ta(t7),sectionNameForTracking:"Templates search results"});t5({outputElements:u,results:t,moreResults:[],showMoreResults:!1,keyPrefix:ta(t7),overallOptions:p,libraryNameByResourceId:o,toggleShowMoreResults:()=>{},parent:e})}if(c>0){let e=(0,e0.kc)().dse_editor_templates_v1?t4(u,(0,O.t)("design_systems.assets_panel.components"),{keyPrefix:`${t7}:${tr}`,sectionNameForTracking:"Primary search results"}):null;t5({outputElements:u,results:a,moreResults:l,showMoreResults:i,keyPrefix:`${t7}:${tr}`+((0,e0.kc)().dse_editor_templates_v1?"1":""),overallOptions:p,libraryNameByResourceId:o,toggleShowMoreResults:()=>{s(e=>!e)},parent:e})}return u},[d,i,p,o]),{productComponents:m,templates:y}=n,E=r.useMemo(()=>{if(!m.length&&!y.length)return t6;let e=[];return(0,e0.kc)().dse_editor_templates_v1?(y.length>0&&tZ({parent:t4(e,(0,O.t)("design_systems.assets_panel.templates"),{keyPrefix:to(t7+":templates"),sectionNameForTracking:"Recently used templates"}),outputElements:e,items:y,keyPrefix:to(t7+":templates"),sharedOptions:p}),m.length>0&&tZ({parent:t4(e,(0,O.t)("design_systems.assets_panel.components"),{keyPrefix:to(t7+":components"),sectionNameForTracking:"Recently used"}),outputElements:e,items:m,keyPrefix:to(t7+":components"),sharedOptions:p})):tZ({parent:null,outputElements:e,items:m,keyPrefix:to(t7),sharedOptions:p}),e},[m,y,p]),g=r.useMemo(()=>(0,e0.kc)().dse_editor_templates_v1?function(e,t,n){let r=[];return e.forEach(e=>{e&&t2({prevParent:null,outputElements:r,inputSubtree:e,inputParentTree:t,keyPrefix:t7,sharedOptions:n,sectionNameForTracking:e.sectionNameForTracking,hideTitle:!1})}),r}([l.localTemplateSubtree,l.localSubtree],l.tree,p):t9(l.localSubtree,l.tree,p),[p,l.localSubtree,l.localTemplateSubtree,l.tree]),h=r.useMemo(()=>t9(e.type===ew.I.FILE?l.subscribedFileSubtrees[e.fileKey]:void 0,l.tree,p),[e,p,l.subscribedFileSubtrees,l.tree]),_=r.useMemo(()=>{let e=[];return!function(e,t,n,r){if((0,e0.kc)().dse_templates_proto){let l=t.subtrees.find(te.Qe);null!=l&&t2({prevParent:null,outputElements:e,inputSubtree:l,inputParentTree:t,keyPrefix:n,sharedOptions:r,sectionNameForTracking:l.sectionNameForTracking})}for(let l of(t.items.length>0&&tZ({parent:null,outputElements:e,items:t.items,keyPrefix:n,sharedOptions:r}),t.subtrees))(0,e0.kc)().dse_templates_proto&&(0,te.Qe)(l)||t2({prevParent:null,outputElements:e,inputSubtree:l,inputParentTree:t,keyPrefix:n,sharedOptions:r,sectionNameForTracking:l.sectionNameForTracking})}(e,l.tree,t7,p),e},[p,l.tree]);return d.query?u:e.type===ew.I.RECENT?E:e.type===ew.I.LOCAL?g:e.type===ew.I.FILE?h:_}({assetType:E,containerSizingOptions:e,recentlyUsedItems:c,treeWithSubtrees:l,viewMode:t});return{assetType:E,libraryNameByFileKey:m,fileKeyToLibraryKey:y,onSetAssetType:g,scrollContent:h,validAssetTypeOptions:p}}({viewMode:n,containerSizingOptions:o}),[M,F]=(0,a.useAtom)(ef.Cl);(0,$.h)(()=>{if(M){let e=A[M];e&&(R({type:ew.I.FILE,fileKey:M,libraryKey:e}),F(null))}});let K=(0,ei.LR)(),D=(0,S.d4)(e=>e.universalInsertModal.showing),V=r.useCallback(()=>{D&&K()},[K,D]),U=r.useCallback((e,t,n)=>{V(),s((0,et.to)({type:ej.m,data:{asset:e,searchSessionId:I??void 0,query:P??void 0,sectionPosition:t,sectionNameForTracking:n,assetTypeDropdownSelection:w?.type,containerWidth:o.containerWidth,onGetKeyboardNavigationItemById:N}}))},[w,o.containerWidth,s,V,N,I,P]),B=r.useMemo(()=>({onOpenFlyout:U,assetTypeDropdownSelection:w?.type}),[w,U]);(0,na.d)({allElements:L});let G=n===eJ.Bk.List,Y=(0,ed.I)(ep.Cn.AssetsPanel),H=0===L.length,Q=c?.type===tN.K.ASSETS_PANEL,W=Q&&c?.data?.component||null,ec=(0,nl.K)(!0),eS=r.useCallback(()=>{Q||(0,eo.wr)()},[Q]),[eT,ev]=(0,j.Vc)("has-auto-expanded-component-libraries-for-nux",!1),ek=(0,el.Ck)(),eP=r.useRef(null);r.useEffect(()=>{let e=eP.current;e&&0!==L.length&&ek()&&!eT&&e.expandAllComponentLibraries(308)>0&&ev(!0)},[eT,ek,L.length,ev]);let eN=r.useCallback(()=>{let e=!!Y.query,t=0===L.length;return r.createElement("div",null,e&&t&&r.createElement(eb.Wq,null),!e&&t&&r.createElement(eb.od,null))},[Y.query,L.length]),eC=k||Y.isLoading,eA=(0,eu.jO)(),eR=T?.teamId?g[T.teamId]:null,eO=!h&&_&&(!eR||!(0,em.w5)(eR)&&(0,ey.canEditTeam)(eR.id,v))&&T?.canEdit&&eA&&Object.keys(p.local.components).length>0&&(0,en.Hz)(f?.id);return r.createElement(e$.U.Provider,{value:B},r.createElement(nm,{assetType:w,componentsEmpty:H,isList:G,isSearching:!!Y.query,isComponentSidebarInitialLoading:k,libraryNameByFileKey:C,fileKeyToLibraryKey:A,onSetAssetType:R,onToggleViewMode:l,recordingKey:i,validAssetTypeOptions:x}),eC?r.createElement("div",{className:"component_sidebar--loadingSpinnerContainerWithDropdown--9b8ZI"},r.createElement(Z.kt,null)):r.createElement("div",{className:"component_sidebar--assetPanelSection--mYuo2"},r.createElement(J.O,{ref:eP,scrollContent:L,recordingKey:"componentsListContainer",isList:G,getViewportHeight:e=>e-2*b,topOffset:ns,isTileSelected:e=>!!e.item.isLocal&&E&&(0,e_.sp)(y,E,e.item.node_id),onMouseUp:eS,renderEmptyState:eN,width:o.containerWidth,className:"component_sidebar--scrollContainerFullHeight---DTUM component_sidebar--_scrollContainerBase--1rakD",initialScrollTop:e,onScroll:t,enableKeyboardNavigation:!0,shouldRefocusAfterKeyboardInsert:w.type===ew.I.RECENT,fileKey:T?.key,teamId:T?.teamId??void 0,orgId:T?.parentOrgId??void 0}),!!W&&r.createElement(tN.h,{selectedView:m,dropdownShown:c,onJumpToLocalComponent:ec,onOpenFlyout:U,usePortal:!0}),eO&&r.createElement(no.V,null)))}function nm({assetType:e,componentsEmpty:t,isList:n,isSearching:l,isComponentSidebarInitialLoading:a,libraryNameByFileKey:o,fileKeyToLibraryKey:i,onSetAssetType:s,onToggleViewMode:c,validAssetTypeOptions:d,recordingKey:p}){let u=nc.improved,{setKeyboardNavigationElement:m}=(0,q.M3)({path:u.libraryModal.path,column:u.libraryModal.column}),{setKeyboardNavigationElement:y}=(0,q.M3)({path:nc.improved.dropdown.path,column:nc.improved.dropdown.column}),{setKeyboardNavigationElement:E}=(0,q.M3)({path:u.viewToggle.path,column:u.viewToggle.column});return r.createElement("div",null,r.createElement("div",{className:"component_sidebar--searchHeader--yTD7D component_sidebar--_header--nHN39"},r.createElement(eC,{searchOptions:{type:e,onSetAssetType:s},keyboardNavigationPath:u.search.path,keyboardNavigationColumn:u.search.column}),r.createElement(eA.b,{entrypoint:eS.r6.ASSETS_PANEL_BUTTON,onSetKeyboardNavigationElement:m,recordingKey:p})),a||t&&!l?null:r.createElement("div",{className:"component_sidebar--pageHeader--m9FWc component_sidebar--_header--nHN39"},r.createElement(eG,{assetType:e,libraryNameByFileKey:o,fileKeyToLibraryKey:i,onSetAssetType:s,onSetKeyboardNavigationElement:y,validAssetTypeOptions:d}),r.createElement(eW,{isList:n,onToggleViewMode:c,onSetKeyboardNavigationElement:E,recordingKey:p})))}var ny=n(835173),nE=n(189334),ng=n(940100),nh=n(88682);function n_({children:e}){return r.createElement("div",{className:"objects_panel_container--container--jBz9j"},e)}var nf=n(878475),nb=n(369565),nS=n(127014),nT=n(909712),nv=n(351966),nk=n(137565),nP=n(581713),nI=n(46263),nN=n(142420),nw=n(574805);function nC({showTabs:e,activeTab:t,isComparingChanges:n,pageTabChevron:a,currentPageName:o,onCanvasSearch:i,onPageContextMenu:s,onTogglePages:c,recordingKey:d}){let p=(0,nS.U)(),u=(0,I.dh)(),m=(0,eH.rf)(eH.Pt(d,"collapsedRow"),"contextmenu",(0,r.useCallback)(e=>{(0,nP.jo)(e),s({nodeId:u,clientX:e.clientX,clientY:e.clientY})},[s,u]));return r.createElement(nT.y,{withBorder:!0},e&&r.createElement(r.Fragment,null,r.createElement(nI._,{onClick:i}),r.createElement(nk.Bx,{className:t===l.xae.LAYERS?nw.yR:nw.Mf,onMouseDown:p.showLayersPanel,onContextMenu:nP.jo,"data-label":(0,O.t)("fullscreen.pages_panel.layers_tab"),recordingKey:eH.Pt(d,"tab","layers"),innerText:"Layers"},(0,O.tx)("fullscreen.pages_panel.layers_tab")),r.createElement(nk.Bx,{className:nw.dB,onMouseDown:()=>p.showPublish(),onContextMenu:nP.jo,recordingKey:eH.Pt(d,"tab","assets"),innerText:"Assets","data-onboarding-key":nN.Qr},r.createElement("div",{className:t===l.xae.ASSETS?nw.yR:nw.Mf,"data-label":(0,O.t)("fullscreen.pages_panel.assets_tab")},r.createElement("div",null,(0,O.tx)("fullscreen.pages_panel.assets_tab"))))),!e&&r.createElement("div",{className:ev()("ui2_tabs_row--viewOnlySearchRow--lXeEC",{"ui2_tabs_row--hidden--H29bc":n})},r.createElement(y.Y,{onFocus:i})),r.createElement(nv.E,{className:ev()("ui2_tabs_row--toggleButton--3lJw1",{"ui2_tabs_row--viewOnly--crQc4":!e}),onClick:c,htmlAttributes:{onContextMenu:m},recordingKey:eH.Pt(d,"collapsedRow")},r.createElement("span",{className:"ui2_tabs_row--pageTitle--PPrKt ellipsis--ellipsis--Tjyfa","data-onboarding-key":"pages-panel-toggle"},o||""),r.createElement(tg.B,{className:"ui2_tabs_row--chevron--GSVx7",svg:a})))}var nA=n(138225),nR=n(435816),nO=n(641060),nL=n(310020),nx=n(391482),nM=n(779099),nF=n(626626),nK=n(253244),nD=n(647841),nV=n(900862),nU=n(843708),nB=n(972192),nG=n(682807);function nY({isLayersOpen:e,onToggleLayers:t,recordingKey:n,...l}){let a=(0,d.q5)(),o=a?.thumbnailGuid||null;return r.createElement(r.Fragment,null,r.createElement(nU.B,null,r.createElement(nB.H,{dataOnboardingKey:C.BZ},r.createElement(nv.E,{onClick:t,className:"ui3_objects_panel--toggleButton--A3BEZ",recordingKey:eH.Pt(n,"layersCollapsedRow")},r.createElement(nG.g,{isExpanded:e}),(0,O.tx)("fullscreen.pages_panel.layers_tab")),(0,e0.kc)().eu_quality_week_collapse_layers_entrypoint&&e&&r.createElement(nH,{recordingKey:eH.Pt(n,"layersOptionMenu")}))),e&&r.createElement(ng.X,{...l,thumbnailGuid:o}))}function nH(e){let t=(0,S.d4)(e=>e.mirror.appModel.keyboardShortcuts),n="collapse-layers",a=()=>{l.glU?.triggerActionEnumInUserEditScope(l.rcl.COLLAPSE_LAYERS,{})};if(!(0,nx.A0)(l.uQ6.LAYERS_PANEL_OVERFLOW_MENU))return r.createElement(nA.K,{"aria-label":(0,nL.A)(n),onClick:a,recordingKey:eH.Pt(e.recordingKey,n),htmlAttributes:{"data-tooltip-type":D.Ib.TEXT,"data-tooltip":(0,nL.A)(n)}},r.createElement(nR._,null));{let o=[{displayText:(0,nL.A)(n),callback:a,sideText:(0,nM.c1)(t,n),rightJustifySideText:!0,icon:r.createElement(nR._,null),recordingKey:n},{displayText:(0,nL.A)("auto-rename-layers"),callback:()=>{(0,nx.Br)({source:l.uQ6.LAYERS_PANEL_OVERFLOW_MENU,trackingDataSource:"layers_panel_overflow_menu"})},icon:r.createElement(nO._,null),rightIcon:r.createElement(nV.y,{variant:nD.x.ON_MENU,helpUrlVariant:nK.JT.AUTO_RENAME_LAYERS}),recordingKey:"auto-rename-layers"}];return r.createElement(nF.U,{dropdownItems:o,lean:"left",recordingKey:e.recordingKey})}}var nQ=n(121093),nz=n(236361),nW=n(445506);let n$=new Map;var nj=n(783423),nX=n(560560);function nJ(){let e=(0,b.cT)(),{pagesList:t,pageToNumChangesMap:n,isComparingChanges:a}=function(){let e=(0,b.n0)(),t=(0,S.d4)(e=>!!(0,e0.kc)().version_diffing&&e.mirror.appModel.activeCanvasEditModeType===l.m1T.COMPARE_CHANGES),n=(0,S.d4)(e=>e.versionHistory.compareId);return r.useMemo(()=>{if(!t||!n)return{pagesList:e,pageToNumChangesMap:n$,isComparingChanges:t};let r=(0,U.ee)(e);return{pagesList:e,pageToNumChangesMap:r,isComparingChanges:t}},[t,n,e])}(),o=(0,nz.g)({pagesList:t}),i=(0,b.GQ)();return t.length?r.createElement(nq,{recordingKey:"pagesPanel",isReadOnly:e,width:i,pagesList:t,isComparingChanges:a,pageToNumChanges:n,onPageContextMenu:o}):null}function nq({width:e,isReadOnly:t,pagesList:n,onPageContextMenu:o,isComparingChanges:i,pageToNumChanges:c,recordingKey:p}){let u=(0,s.GS)(),m=(0,ny.M)(),y=(0,tw._j)(),E=(0,d.q5)(),g=(0,S.d4)(e=>t||!E?l.xae.LAYERS:e.leftPanel.activeTab),h=(0,S.d4)(e=>e.versionHistory),_=(0,I.dh)(),f=(0,I.nn)(),O=(0,a.useAtomValue)(nb.l7),L=(0,nS.U)(),{toggleManageMemoryModal:x,closeManageMemoryModal:M}=(0,R.P)({sidebarWidth:e}),F=(0,N.T)(),{isLayersOpen:K,toggleLayersAction:D}=(0,b.vr)(),{renamingNodeGuid:V,startRenamingNode:U,stopRenamingNode:B}=(0,b.TU)(),G=(0,b._4)(),{height:Q,setHeight:z,isOpen:W,setIsOpen:$}=(0,nW.d)({defaultIsOpen:n.length>1||u}),j=g===l.xae.LAYERS,X=j&&(!!u||W),J=W&&j?nX.A:nj.A,q=l.AWq.getChunkChangeCount(),Z=(0,S.Pj)(),ee=(0,r.useCallback)(e=>{L.showLayersPanel(),(0,P.ds)("pages_panel_open_toggle",E?.key,Z.getState(),{isPagesOpen:e},{forwardToDatadog:!0}),$(e)},[E,L,$,Z]),et=(0,r.useCallback)(()=>{ee(!0)},[ee]),en=(0,v.F)(W),er=(0,r.useCallback)(()=>{ee(!en.current)},[en,ee]),el=(0,T.$)(O);return(0,r.useEffect)(()=>{O&&el&&!t&&et()},[el,O,t,et]),r.createElement(nh.A,{isFullHeight:!0},u?r.createElement(r.Fragment,null,r.createElement(k.$,null),!t&&r.createElement(nQ.I,{recordingKey:p,activeTab:g,onCanvasSearch:G})):r.createElement(r.Fragment,null,r.createElement(nC,{recordingKey:p,showTabs:!t,activeTab:g,pageTabChevron:J,isComparingChanges:i,currentPageName:f,onCanvasSearch:G,onTogglePages:g===l.xae.ASSETS?et:er,onPageContextMenu:o}),g===l.xae.LAYERS&&r.createElement(k.$,null)),i&&j&&r.createElement(r.Fragment,null,h.compareId&&r.createElement(H.ZI,{compareId:h.compareId,versions:h.versions}),q>0&&r.createElement(nT.y,{withBorder:!0},r.createElement(Y,null))),E&&r.createElement(A.QU,{fileKey:E.key,toggleManageMemoryModal:x,closeManageMemoryModal:M}),X&&r.createElement(nf.R,{isOpen:W,onToggle:er,height:Q,onHeightChange:z,showHeader:!F,pages:n,isComparingChanges:i,pageToNumChanges:c,isReadOnly:t,onPageContextMenu:o,onCanvasSearch:G}),j&&r.createElement(n_,null,y&&K&&r.createElement(w.p,null,r.createElement(C.Ay,null)),u?r.createElement(nY,{isReadOnly:t,isLayersOpen:K,onToggleLayers:D,currentPage:_,width:e,renamingGuid:V,startRenaming:U,stopRenaming:B,versionHistory:h,recordingKey:p}):r.createElement(ng.X,{isReadOnly:t,currentPage:_,width:e,renamingGuid:V,startRenaming:U,stopRenaming:B,thumbnailGuid:E?.thumbnailGuid||null,versionHistory:h})),g===l.xae.ASSETS&&r.createElement(r.Fragment,null,m?r.createElement(nE.g,{width:e}):r.createElement(np,{recordingKey:"componentsSidebar",containerSizingOptions:{containerWidth:e,maxSmallThumbSize:40,maxWideColWidth:300}})))}let nZ=r.memo(function(){let e=(0,a.useAtomValue)((0,u.Xh)(void 0)),t=(0,d.q5)(),n=(0,s.GS)(),S=(0,c.aV)();(0,b.bi)();let T=(0,i.X0)(),v=!!t&&e,k=(0,p.J2)(l.Ez5.uiState().showCanvasSearch);return r.useEffect(()=>{v&&(0,o.YQ)({id:"Found Updates To Publish"})},[v]),r.createElement(f.Q,{ignoreRulers:S},r.createElement(g.s,null),r.createElement(E.$,null,n&&r.createElement(_.n,null),n&&r.createElement(h.d,{shouldUseBottomBorder:!T}),k?r.createElement(m.EA.Provider,{value:!0},r.createElement(y.f,{showFilter:!0})):r.createElement(nJ,null)))})},516106:(e,t,n)=>{n.d(t,{K:()=>p});var r=n(411855),l=n(805014),a=n(336427),o=n(250379),i=n(427494),s=n(732767),c=n(253244),d=n(276769);function p(){let e=(0,o.VW)(),t=(0,a.ZC)(e?.guid),n=(0,i.p8)("activeUserAction"),p=(0,s.LC)();r.useEffect(()=>{(e?.guid!==t&&t||![l.QOV.DEFAULT,l.QOV.CLICKING_TO_CHANGE_SELECTION].includes(n))&&(0,d.KY)({actionToClear:c.JT.FIND_INSPIRATION})},[e,n,t,p])}}}]);

//# debugId=33f376f5-18ab-5c1c-8111-c16b6e11b752

//# sourceMappingURL=https://admin.figma.com/admin/webpack-artifacts/1176c482f07d2b2a35742b3bb4cadcc6d63f6b91/5368-de1f6db38548f93c.min.js.map